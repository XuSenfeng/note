<!DOCTYPE html>

<html lang="zh-CN"  class="">


<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="keywords" content="">
    
    
    <meta name="description" content="">
    
    <meta name="generator" content="teedoc">
    <meta name="theme" content="teedoc-plugin-theme-default">
    
        
        <meta name="markdown-generator" content="teedoc-plugin-markdown-parser">
        
        <script>
MathJax = {"loader": {"load": ["output/svg"]}, "tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]]}, "svg": {"fontCache": "global"}};
</script>
        
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        
        <meta name="html-generator" content="teedoc-plugin-jupyter-notebook-parser">
        
        <script src="/note/static/js/theme_default/pre_main.js"></script>
        
        <link rel="stylesheet" href="/note/static/css/theme_default/prism.min.css" type="text/css"/>
        
        <link rel="stylesheet" href="/note/static/css/theme_default/viewer.min.css" type="text/css"/>
        
        <link rel="stylesheet" href="/note/static/css/theme_default/dark.css" type="text/css"/>
        
        <link rel="stylesheet" href="/note/static/css/theme_default/light.css" type="text/css"/>
        
        <script src="/note/static/js/theme_default/jquery.min.js"></script>
        
        <script src="/note/static/js/theme_default/split.js"></script>
        
        <link rel="stylesheet" href="/note/static/css/search/style.css" type="text/css"/>
        
        <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?4d52982572d5512e9762879ebf063c86";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
        
        <meta name="blog-generator" content="teedoc-plugin-blog">
        
        <link rel="stylesheet" href="/note/static/css/gitalk/gitalk.css" type="text/css"/>
        
        <link rel="stylesheet" href="/note/static/css/gitalk/custom_gitalk.css" type="text/css"/>
        
        <link rel="stylesheet" href="/note/static/css/custom.css" type="text/css"/>
        
    
    
    <title>添加板子 - XvSenfeng's Note</title>
    
    <script type="text/javascript">js_vars = {"teedoc-plugin-ad-hint": {"type": "hint", "label": "☆", "content": "这是一个支持国际化的消息示例</br>喜欢项目请<a target=\"_blank\" href=\"https://github.com/teedoc/teedoc\">点下 ☆ star </a>哦~🦀🦀", "show_times": 2, "show_after_s": 432000, "date": "2021-11-16 14:40", "color": "#a0421d", "link_color": "#e53935", "link_bg_color": "#e6ae5c", "bg_color": "#ffcf89", "color_hover": "white", "bg_color_hover": "#f57c00", "close_color": "#eab971"}}</script>
    <script type="text/javascript">metadata = {"tags": [], "date": null, "update": [], "ts": 0, "author": "", "brief": "", "cover": ""}</script>
</head>


<body class="type_doc">
    
    <div id="navbar">
        <div id="navbar_menu">
            <a class="site_title" href="/note/">
                
                    <img class="site_logo" src="/note/static/image/logo.png" alt="XvSenfeng logo">
                
                
                    <h2>XvSenfeng</h2>
                
        </a>
            <a id="navbar_menu_btn"></a>
        </div>
        <div id="navbar_items">
            <div>
                <ul id="nav_left">
<li class=""><a  href="/note/blog/">博客</a></li>
<li class="active"><a  href="/note/Linux/">Linux</a></li>
<li class=""><a  href="/note/代码分析/">代码分析</a></li>
<li class=""><a  href="/note/使用软件/">使用软件</a></li>
<li class=""><a  href="/note/嵌入式/">嵌入式</a></li>
<li class=""><a  href="/note/手机安卓/">手机安卓</a></li>
<li class=""><a  href="/note/机器学习/">机器学习</a></li>
<li class=""><a  href="/note/编程基础/">编程基础</a></li>
<li class=""><a  href="/note/网络/">网络</a></li>
</ul>

            </div>
            <div>
                <ul id="nav_right">
<li class=""><a target="_blank" href="https://github.com/XuSenfeng/note/">github</a></li>
</ul>

                <ul class="nav_plugins"><li><a id="google_translate_element"><img class="icon" src="/note/static/image/google_translate/translate.svg"/>Translate</a></li></ul><ul class="nav_plugins"><li><a id="themes" class="light"></a></li></ul><ul class="nav_plugins"><li><a id="search"><span class="icon"></span><span class="placeholder">搜索</span>
                            <div id="search_hints">
                                <span id="search_input_hint">输入关键词，多关键词空格隔开</span>
                                <span id="search_loading_hint">正在加载，请稍候。。。</span>
                                <span id="search_download_err_hint">下载文件失败，请刷新重试或检查网络</span>
                                <span id="search_other_docs_result_hint">来自其它文档的结果</span>
                                <span id="search_curr_doc_result_hint">当前文档搜索结果</span>
                            </div></a></li></ul>
            </div>
        </div>
    </div>
    
    <div id="wrapper">
        <div id="sidebar_wrapper">
            <div id="sidebar">
                <div id="sidebar_title">
                    
                </div>
                <ul class="show">
<li class="not_active with_link"><a href="/note/Linux/index.html"><span class="label">README</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">Linux命令行与shell脚本编程大全</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/Linux/Linux命令行与shell脚本编程大全/2022-8-1-初认识Linux_shell.html"><span class="label">2022-8-1-初认识Linux_shell</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux命令行与shell脚本编程大全/2022-8-1-基本bashshell命令.html"><span class="label">2022-8-1-基本bashshell命令</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux命令行与shell脚本编程大全/2022-8-1-走进shell.html"><span class="label">2022-8-1-走进shell</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux命令行与shell脚本编程大全/2022-8-10-sed进阶.html"><span class="label">2022-8-10-sed进阶</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux命令行与shell脚本编程大全/2022-8-11-gawk进阶.html"><span class="label">2022-8-11-gawk进阶</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux命令行与shell脚本编程大全/2022-8-11-使用其他shell.html"><span class="label">2022-8-11-使用其他shell</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux命令行与shell脚本编程大全/2022-8-11-实例.html"><span class="label">2022-8-11-实例</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux命令行与shell脚本编程大全/2022-8-12-邮件相关.html"><span class="label">2022-8-12-邮件相关</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux命令行与shell脚本编程大全/2022-8-2-更多命令.html"><span class="label">2022-8-2-更多命令</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux命令行与shell脚本编程大全/2022-8-2-理解shell.html"><span class="label">2022-8-2-理解shell</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux命令行与shell脚本编程大全/2022-8-3-使用Linux环境变量.html"><span class="label">2022-8-3-使用Linux环境变量</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux命令行与shell脚本编程大全/2022-8-3-理解Linux的文件权限.html"><span class="label">2022-8-3-理解Linux的文件权限</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux命令行与shell脚本编程大全/2022-8-4-安装软件程序.html"><span class="label">2022-8-4-安装软件程序</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux命令行与shell脚本编程大全/2022-8-4-管理文件系统.html"><span class="label">2022-8-4-管理文件系统</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux命令行与shell脚本编程大全/2022-8-5-使用编辑器.html"><span class="label">2022-8-5-使用编辑器</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux命令行与shell脚本编程大全/2022-8-5-构建基本脚本.html"><span class="label">2022-8-5-构建基本脚本</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux命令行与shell脚本编程大全/2022-8-6-使用结构初始化.html"><span class="label">2022-8-6-使用结构初始化</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux命令行与shell脚本编程大全/2022-8-6-处理用户输入.html"><span class="label">2022-8-6-处理用户输入</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux命令行与shell脚本编程大全/2022-8-6-更多结构化命令.html"><span class="label">2022-8-6-更多结构化命令</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux命令行与shell脚本编程大全/2022-8-7-呈现数据.html"><span class="label">2022-8-7-呈现数据</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux命令行与shell脚本编程大全/2022-8-7-控制脚本.html"><span class="label">2022-8-7-控制脚本</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux命令行与shell脚本编程大全/2022-8-8-创建函数.html"><span class="label">2022-8-8-创建函数</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux命令行与shell脚本编程大全/2022-8-9-图形化桌面环境中的脚本编程.html"><span class="label">2022-8-9-图形化桌面环境中的脚本编程</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux命令行与shell脚本编程大全/2022-8-9-正则表达式.html"><span class="label">2022-8-9-正则表达式</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux命令行与shell脚本编程大全/2022-8-9-认识sed和gawk.html"><span class="label">2022-8-9-认识sed和gawk</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">Linux就该这么学</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/Linux/Linux就该这么学/2022-8-23-.html"><span class="label">2022-8-23-</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">鸟哥的linux私房菜</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/Linux/Linux就该这么学/鸟哥的linux私房菜/2022-9-10-计算机概论.html"><span class="label">2022-9-10-计算机概论</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux就该这么学/鸟哥的linux私房菜/2022-9-20-主机规划与磁盘分区.html"><span class="label">2022-9-20-主机规划与磁盘分区</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux就该这么学/鸟哥的linux私房菜/2022-9-20-安装CentOS.html"><span class="label">2022-9-20-安装CentOS</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux就该这么学/鸟哥的linux私房菜/2022-9-20-首次登录.html"><span class="label">2022-9-20-首次登录</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux就该这么学/鸟哥的linux私房菜/2022-9-25-文件权限以及目录.html"><span class="label">2022-9-25-文件权限以及目录</span><span class=""></span></a></li>
</ul>
</li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">Linux源码趣读</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/Linux/Linux源码趣读/2024-1-26-01最开始的代码.html"><span class="label">2024-1-26-01最开始的代码</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">Linux系统编程</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/Linux/Linux系统编程/2024-2-14-01文件IO.html"><span class="label">2024-2-14-01文件IO</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux系统编程/2024-3-19-02文件系统.html"><span class="label">2024-3-19-02文件系统</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux系统编程/2024-3-21-03程序和进程.html"><span class="label">2024-3-21-03程序和进程</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux系统编程/2024-3-23-04进程间通信.html"><span class="label">2024-3-23-04进程间通信</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux系统编程/2024-3-25-05信号.html"><span class="label">2024-3-25-05信号</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux系统编程/2024-3-28-06守护进程、线程.html"><span class="label">2024-3-28-06守护进程、线程</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux系统编程/2024-3-31-07线程同步.html"><span class="label">2024-3-31-07线程同步</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">Linux网络编程</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/Linux/Linux网络编程/2024-4-10-04线程池.html"><span class="label">2024-4-10-04线程池</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux网络编程/2024-4-13-05本地套接字.html"><span class="label">2024-4-13-05本地套接字</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux网络编程/2024-4-14-06libevent库.html"><span class="label">2024-4-14-06libevent库</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux网络编程/2024-4-16-07简单的Web服务器.html"><span class="label">2024-4-16-07简单的Web服务器</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux网络编程/2024-4-16-08html入门.html"><span class="label">2024-4-16-08html入门</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux网络编程/2024-4-17-09CSS.html"><span class="label">2024-4-17-09CSS</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux网络编程/2024-4-17-09HTTP协议.html"><span class="label">2024-4-17-09HTTP协议</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux网络编程/2024-4-2-01网络基础.html"><span class="label">2024-4-2-01网络基础</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux网络编程/2024-4-20-10telnet调试.html"><span class="label">2024-4-20-10telnet调试</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux网络编程/2024-4-20-11服务器.html"><span class="label">2024-4-20-11服务器</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux网络编程/2024-4-3-02Socket编程.html"><span class="label">2024-4-3-02Socket编程</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/Linux网络编程/2024-4-6-03高并发服务器.html"><span class="label">2024-4-6-03高并发服务器</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">原子Linux</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-10-Linux常用命令.html"><span class="label">2022-8-10-Linux常用命令</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-11-压缩解压缩.html"><span class="label">2022-8-11-压缩解压缩</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-11-文件系统结构.html"><span class="label">2022-8-11-文件系统结构</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-11-磁盘管理.html"><span class="label">2022-8-11-磁盘管理</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-12-LinuxC.html"><span class="label">2022-8-12-LinuxC</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-12-Makefile书.html"><span class="label">2022-8-12-Makefile书</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-12-make和Makefile.html"><span class="label">2022-8-12-make和Makefile</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-12-开发环境搭建.html"><span class="label">2022-8-12-开发环境搭建</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-12-用户和用户组.html"><span class="label">2022-8-12-用户和用户组</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-12-链接文件.html"><span class="label">2022-8-12-链接文件</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-13-IMX启动方式.html"><span class="label">2022-8-13-IMX启动方式</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-13-vscode.html"><span class="label">2022-8-13-vscode</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-13-开发板简介.html"><span class="label">2022-8-13-开发板简介</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-13-汇编LED驱动.html"><span class="label">2022-8-13-汇编LED驱动</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-14-C语言点灯.html"><span class="label">2022-8-14-C语言点灯</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-14-按键检测.html"><span class="label">2022-8-14-按键检测</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-14-模仿stm32编程.html"><span class="label">2022-8-14-模仿stm32编程</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-15-中断.html"><span class="label">2022-8-15-中断</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-15-主频时钟配置.html"><span class="label">2022-8-15-主频时钟配置</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-16-EPIT定时器.html"><span class="label">2022-8-16-EPIT定时器</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-16-GPT时钟.html"><span class="label">2022-8-16-GPT时钟</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-17-DDR3.html"><span class="label">2022-8-17-DDR3</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-17-RGBLED.html"><span class="label">2022-8-17-RGBLED</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-17-串口.html"><span class="label">2022-8-17-串口</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-18-I2C.html"><span class="label">2022-8-18-I2C</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-18-RTC.html"><span class="label">2022-8-18-RTC</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-19-PWM.html"><span class="label">2022-8-19-PWM</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-19-SPI.html"><span class="label">2022-8-19-SPI</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-19-多点电容触摸屏.html"><span class="label">2022-8-19-多点电容触摸屏</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-20-uBoot.html"><span class="label">2022-8-20-uBoot</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-20-系统烧写.html"><span class="label">2022-8-20-系统烧写</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-22-源码目录分析.html"><span class="label">2022-8-22-源码目录分析</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-22-顶层Makefile.html"><span class="label">2022-8-22-顶层Makefile</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-23-Linux内核.html"><span class="label">2022-8-23-Linux内核</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-23-uboot图形化配置界面.html"><span class="label">2022-8-23-uboot图形化配置界面</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-23-启动流程.html"><span class="label">2022-8-23-启动流程</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-23-移植.html"><span class="label">2022-8-23-移植</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-24-驱动开发.html"><span class="label">2022-8-24-驱动开发</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-26-linux点灯.html"><span class="label">2022-8-26-linux点灯</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-27-设备树.html"><span class="label">2022-8-27-设备树</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-28-led设备树.html"><span class="label">2022-8-28-led设备树</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-29-Linux的并发与竞争.html"><span class="label">2022-8-29-Linux的并发与竞争</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-29-pinclt和gpio.html"><span class="label">2022-8-29-pinclt和gpio</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-30-Linux中断.html"><span class="label">2022-8-30-Linux中断</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-30-Linux内核定时器.html"><span class="label">2022-8-30-Linux内核定时器</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-31-异步通知.html"><span class="label">2022-8-31-异步通知</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-8-31-阻塞非阻塞.html"><span class="label">2022-8-31-阻塞非阻塞</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-9-1-platform设备驱动.html"><span class="label">2022-9-1-platform设备驱动</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-9-10-WIFI.html"><span class="label">2022-9-10-WIFI</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-9-10-网络驱动.html"><span class="label">2022-9-10-网络驱动</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-9-11-4G.html"><span class="label">2022-9-11-4G</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-9-11-IIO.html"><span class="label">2022-9-11-IIO</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-9-11-PWM.html"><span class="label">2022-9-11-PWM</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-9-11-RGBtoHDMI.html"><span class="label">2022-9-11-RGBtoHDMI</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-9-11-Regmap.html"><span class="label">2022-9-11-Regmap</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-9-2-INPUT子系统.html"><span class="label">2022-9-2-INPUT子系统</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-9-2-LCD屏幕.html"><span class="label">2022-9-2-LCD屏幕</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-9-2-Linux自带的led.html"><span class="label">2022-9-2-Linux自带的led</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-9-2-MISC.html"><span class="label">2022-9-2-MISC</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-9-3-I2C.html"><span class="label">2022-9-3-I2C</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-9-3-RTC.html"><span class="label">2022-9-3-RTC</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-9-3-SPI.html"><span class="label">2022-9-3-SPI</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-9-4-串口.html"><span class="label">2022-9-4-串口</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-9-5-触摸屏.html"><span class="label">2022-9-5-触摸屏</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-9-5-音频驱动.html"><span class="label">2022-9-5-音频驱动</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-9-6-CAN协议.html"><span class="label">2022-9-6-CAN协议</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-9-7-USB.html"><span class="label">2022-9-7-USB</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/原子Linux/2022-9-7-块设备驱动.html"><span class="label">2022-9-7-块设备驱动</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">操作系统原理</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/Linux/操作系统原理/2023-6-17-1操作系统.html"><span class="label">2023-6-17-1操作系统</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/操作系统原理/2023-6-17-2操作系统目标和作用.html"><span class="label">2023-6-17-2操作系统目标和作用</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/操作系统原理/2023-6-17-3操作系统特征.html"><span class="label">2023-6-17-3操作系统特征</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/操作系统原理/2023-6-17-4操作系统的发展.html"><span class="label">2023-6-17-4操作系统的发展</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/操作系统原理/2023-6-17-5运行机制.html"><span class="label">2023-6-17-5运行机制</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/操作系统原理/2023-6-18-6中断异常.html"><span class="label">2023-6-18-6中断异常</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/操作系统原理/2023-6-18-7系统调用.html"><span class="label">2023-6-18-7系统调用</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/操作系统原理/2023-6-19-8体系结构.html"><span class="label">2023-6-19-8体系结构</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/操作系统原理/2023-6-20-10虚拟机.html"><span class="label">2023-6-20-10虚拟机</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/操作系统原理/2023-6-20-11进程.html"><span class="label">2023-6-20-11进程</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/操作系统原理/2023-6-20-9操作系统的引导.html"><span class="label">2023-6-20-9操作系统的引导</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/操作系统原理/2023-6-22-12线程.html"><span class="label">2023-6-22-12线程</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/操作系统原理/2023-6-23-13调度.html"><span class="label">2023-6-23-13调度</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/操作系统原理/2023-6-27-14进程同步进程互斥.html"><span class="label">2023-6-27-14进程同步进程互斥</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/操作系统原理/2023-6-28-15锁.html"><span class="label">2023-6-28-15锁</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/操作系统原理/2023-6-28-16信号量机制.html"><span class="label">2023-6-28-16信号量机制</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">服务器</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/Linux/服务器/2023-6-12-代理.html"><span class="label">2023-6-12-代理</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/服务器/2023-6-12-新服务器搭建.html"><span class="label">2023-6-12-新服务器搭建</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">李述铜手写操作系统</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/Linux/李述铜手写操作系统/2023-10-26-05中断和异常处理.html"><span class="label">2023-10-26-05中断和异常处理</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/李述铜手写操作系统/2023-11-10-06日志与printf输出.html"><span class="label">2023-11-10-06日志与printf输出</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/李述铜手写操作系统/2023-9-23-03引导程序接管控制权.html"><span class="label">2023-9-23-03引导程序接管控制权</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/李述铜手写操作系统/2023-9-28-04加载器loader的实现.html"><span class="label">2023-9-28-04加载器loader的实现</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/李述铜手写操作系统/2023-9-6-01补充知识2.html"><span class="label">2023-9-6-01补充知识2</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/李述铜手写操作系统/2023-9-6-0补充知识.html"><span class="label">2023-9-6-0补充知识</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/李述铜手写操作系统/2023-9-6-1操作系统准备.html"><span class="label">2023-9-6-1操作系统准备</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/李述铜手写操作系统/2023-9-7-2x86保护模式下的编程.html"><span class="label">2023-9-7-2x86保护模式下的编程</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/李述铜手写操作系统/2024-2-17-07进程切换.html"><span class="label">2024-2-17-07进程切换</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/李述铜手写操作系统/2024-2-17-08链表.html"><span class="label">2024-2-17-08链表</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/李述铜手写操作系统/2024-2-17添加任务管理器.html"><span class="label">2024-2-17添加任务管理器</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/李述铜手写操作系统/2024-2-18-内存管理.html"><span class="label">2024-2-18-内存管理</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/李述铜手写操作系统/2024-2-24-系统调用.html"><span class="label">2024-2-24-系统调用</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/李述铜手写操作系统/2024-2-26-移植Newlib库.html"><span class="label">2024-2-26-移植Newlib库</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/李述铜手写操作系统/2024-2-27-屏幕显示信息.html"><span class="label">2024-2-27-屏幕显示信息</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/李述铜手写操作系统/2024-2-29-键盘初始化.html"><span class="label">2024-2-29-键盘初始化</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/李述铜手写操作系统/2024-3-1-设备管理.html"><span class="label">2024-3-1-设备管理</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/李述铜手写操作系统/2024-3-3-Shell.html"><span class="label">2024-3-3-Shell</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/李述铜手写操作系统/2024-3-4-文件系统.html"><span class="label">2024-3-4-文件系统</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/李述铜手写操作系统/2024-3-5-磁盘.html"><span class="label">2024-3-5-磁盘</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/李述铜手写操作系统/2024-3-7-Fat16.html"><span class="label">2024-3-7-Fat16</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">树莓派</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/Linux/树莓派/2024-2-1-01开始使用.html"><span class="label">2024-2-1-01开始使用</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/树莓派/2024-2-1-02-使用命令了解树莓派.html"><span class="label">2024-2-1-02-使用命令了解树莓派</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/树莓派/2024-2-1-03-安装mysql.html"><span class="label">2024-2-1-03-安装mysql</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/树莓派/2024-2-3-04网络连接.html"><span class="label">2024-2-3-04网络连接</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/树莓派/2024-2-8-时钟设置.html"><span class="label">2024-2-8-时钟设置</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">泰山派</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/Linux/泰山派/2025-12-20-05-lvgl程序.html"><span class="label">2025-12-20-05-lvgl程序</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/泰山派/2025-12-24-06-二维码识别.html"><span class="label">2025-12-24-06-二维码识别</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/泰山派/2025-12-24-07-yolo部署.html"><span class="label">2025-12-24-07-yolo部署</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/泰山派/2025-12-25-08-OpenCV.html"><span class="label">2025-12-25-08-OpenCV</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/泰山派/2025-12-26-09-拍照.html"><span class="label">2025-12-26-09-拍照</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/泰山派/2025-12-26-10-Qt.html"><span class="label">2025-12-26-10-Qt</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/泰山派/2025-5-11-01环境搭建.html"><span class="label">2025-5-11-01环境搭建</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/泰山派/2025-5-11-02设备树.html"><span class="label">2025-5-11-02设备树</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/泰山派/2025-5-14-03屏幕驱动.html"><span class="label">2025-5-14-03屏幕驱动</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/泰山派/2025-5-17-04触摸驱动.html"><span class="label">2025-5-17-04触摸驱动</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/泰山派/2026-1-27-ROS.html"><span class="label">2026-1-27-ROS</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/泰山派/2026-1-30-Ubuntu22.html"><span class="label">2026-1-30-Ubuntu22</span><span class=""></span></a></li>
</ul>
</li>
<li class="active_parent no_link"><a><span class="label">瑞芯微Linux</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/note/Linux/瑞芯微Linux/2025-12-10-Cpp提供C接口.html"><span class="label">2025-12-10-Cpp提供C接口</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/瑞芯微Linux/2025-12-5-01-EchoAI编译代码.html"><span class="label">2025-12-5-01-EchoAI编译代码</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/瑞芯微Linux/2025-12-5-02-EchoAI代码.html"><span class="label">2025-12-5-02-EchoAI代码</span><span class=""></span></a></li>
<li class="active with_link"><a href="/note/Linux/瑞芯微Linux/2025-12-7-03-添加板子.html"><span class="label">2025-12-7-03-添加板子</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/瑞芯微Linux/2025-12-8-04-内核.html"><span class="label">2025-12-8-04-内核</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/瑞芯微Linux/2025-12-9-05-模型.html"><span class="label">2025-12-9-05-模型</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/瑞芯微Linux/配置网络.html"><span class="label">配置网络</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">野火Linux</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-10-11-55-buildroot.html"><span class="label">2025-10-11-55-buildroot</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-10-11-56-裸机汇编开发.html"><span class="label">2025-10-11-56-裸机汇编开发</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-10-12-57-Uboot编译脚本.html"><span class="label">2025-10-12-57-Uboot编译脚本</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-10-2-47-镜像构建.html"><span class="label">2025-10-2-47-镜像构建</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-10-2-48-systemd.html"><span class="label">2025-10-2-48-systemd</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-10-2-49-deb包.html"><span class="label">2025-10-2-49-deb包</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-10-2-50-修改img文件.html"><span class="label">2025-10-2-50-修改img文件</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-10-2-51-备份量产.html"><span class="label">2025-10-2-51-备份量产</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-10-2-52-Uboot启动.html"><span class="label">2025-10-2-52-Uboot启动</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-10-28-58-Uboot移植.html"><span class="label">2025-10-28-58-Uboot移植</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-10-30-59-Uboot图形配置界面语法.html"><span class="label">2025-10-30-59-Uboot图形配置界面语法</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-10-30-60-Linux编译脚本.html"><span class="label">2025-10-30-60-Linux编译脚本</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-10-31-61-Linux启动流程.html"><span class="label">2025-10-31-61-Linux启动流程</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-10-9-53-Uboot启动(二).html"><span class="label">2025-10-9-53-Uboot启动(二)</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-10-9-54-Uboot启动(三).html"><span class="label">2025-10-9-54-Uboot启动(三)</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-11-1-62-linux移植.html"><span class="label">2025-11-1-62-linux移植</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-11-1-63-Busybox.html"><span class="label">2025-11-1-63-Busybox</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-11-10-65-定时器.html"><span class="label">2025-11-10-65-定时器</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-11-12-66-信号.html"><span class="label">2025-11-12-66-信号</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-11-14-67-MISC设备.html"><span class="label">2025-11-14-67-MISC设备</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-11-15-68-RTC.html"><span class="label">2025-11-15-68-RTC</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-11-16-69-串口.html"><span class="label">2025-11-16-69-串口</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-11-18-70-中断线程化.html"><span class="label">2025-11-18-70-中断线程化</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-11-18-71-音频.html"><span class="label">2025-11-18-71-音频</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-11-19-72-CAN.html"><span class="label">2025-11-19-72-CAN</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-11-19-73-USB.html"><span class="label">2025-11-19-73-USB</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-11-2-64-mfgtool.html"><span class="label">2025-11-2-64-mfgtool</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-11-20-74-块设备.html"><span class="label">2025-11-20-74-块设备</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-11-21-75-网络设备.html"><span class="label">2025-11-21-75-网络设备</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-11-22-76-Wifi.html"><span class="label">2025-11-22-76-Wifi</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-11-22-77-PWM.html"><span class="label">2025-11-22-77-PWM</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-11-22-78-Regmap通用寄存器.html"><span class="label">2025-11-22-78-Regmap通用寄存器</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-11-22-79-IIO驱动框架.html"><span class="label">2025-11-22-79-IIO驱动框架</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-11-25-80-ADC驱动.html"><span class="label">2025-11-25-80-ADC驱动</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-12-6-81-音频驱动.html"><span class="label">2025-12-6-81-音频驱动</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-12-8-82-DRM显示设备.html"><span class="label">2025-12-8-82-DRM显示设备</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-6-11-01-入门.html"><span class="label">2025-6-11-01-入门</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-6-22-02-开发板下载启动.html"><span class="label">2025-6-22-02-开发板下载启动</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-7-12-04-镜像文件.html"><span class="label">2025-7-12-04-镜像文件</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-7-13-06-GPIO.html"><span class="label">2025-7-13-06-GPIO</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-7-13-07-中断.html"><span class="label">2025-7-13-07-中断</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-7-14-05-ARMv7汇编.html"><span class="label">2025-7-14-05-ARMv7汇编</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-7-14-08-时钟控制模块.html"><span class="label">2025-7-14-08-时钟控制模块</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-7-14-09-串口.html"><span class="label">2025-7-14-09-串口</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-7-15-10-内核模块.html"><span class="label">2025-7-15-10-内核模块</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-7-15-11-字符设备.html"><span class="label">2025-7-15-11-字符设备</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-7-15-12-驱动设备模型.html"><span class="label">2025-7-15-12-驱动设备模型</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-7-19-13-Kset.html"><span class="label">2025-7-19-13-Kset</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-7-19-14-uevent消息.html"><span class="label">2025-7-19-14-uevent消息</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-7-19-15-class设备管理.html"><span class="label">2025-7-19-15-class设备管理</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-7-19-16-17-总结.html"><span class="label">2025-7-19-16-17-总结</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-7-19-16-xbus和platform.html"><span class="label">2025-7-19-16-xbus和platform</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-7-2-03-控制设备.html"><span class="label">2025-7-2-03-控制设备</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-7-20-18-DTS设备树.html"><span class="label">2025-7-20-18-DTS设备树</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-7-20-19-DeviceTreeOverlay.html"><span class="label">2025-7-20-19-DeviceTreeOverlay</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-9-16-21-iomux节点(中).html"><span class="label">2025-9-16-21-iomux节点(中)</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-9-16-22-iomux节点(下).html"><span class="label">2025-9-16-22-iomux节点(下)</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-9-17-23-iomux节点(应用).html"><span class="label">2025-9-17-23-iomux节点(应用)</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-9-17-24-GPIO子系统.html"><span class="label">2025-9-17-24-GPIO子系统</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-9-17-25-并发硬件同步原语.html"><span class="label">2025-9-17-25-并发硬件同步原语</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-9-18-26-IIC驱动框架.html"><span class="label">2025-9-18-26-IIC驱动框架</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-9-20-27-IIC驱动框架使用.html"><span class="label">2025-9-20-27-IIC驱动框架使用</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-9-25-28-阻塞和非阻塞IO.html"><span class="label">2025-9-25-28-阻塞和非阻塞IO</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-9-25-29-POLL机制.html"><span class="label">2025-9-25-29-POLL机制</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-9-25-30-Completion.html"><span class="label">2025-9-25-30-Completion</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-9-25-31-kthread_worker.html"><span class="label">2025-9-25-31-kthread_worker</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-9-26-32-SPI.html"><span class="label">2025-9-26-32-SPI</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-9-26-33-SPI使用.html"><span class="label">2025-9-26-33-SPI使用</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-9-27-34-中断.html"><span class="label">2025-9-27-34-中断</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-9-27-35-软中断和tasklet.html"><span class="label">2025-9-27-35-软中断和tasklet</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-9-27-36-工作队列.html"><span class="label">2025-9-27-36-工作队列</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-9-27-37-Input子系统.html"><span class="label">2025-9-27-37-Input子系统</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-9-28-38-电容触摸屏.html"><span class="label">2025-9-28-38-电容触摸屏</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-9-28-39-PWM.html"><span class="label">2025-9-28-39-PWM</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-9-28-40-LCD-FB设备.html"><span class="label">2025-9-28-40-LCD-FB设备</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-9-29-41-Linux系统构成.html"><span class="label">2025-9-29-41-Linux系统构成</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-9-29-42-Uboot基础使用.html"><span class="label">2025-9-29-42-Uboot基础使用</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-9-29-43-Linux.html"><span class="label">2025-9-29-43-Linux</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-9-29-44-添加驱动(设备树).html"><span class="label">2025-9-29-44-添加驱动(设备树)</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-9-30-45-图标.html"><span class="label">2025-9-30-45-图标</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-9-30-46-根文件系统.html"><span class="label">2025-9-30-46-根文件系统</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/2025-9-4-20-iomux节点(上).html"><span class="label">2025-9-4-20-iomux节点(上)</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/野火Linux/Untitled.html"><span class="label">Untitled</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">问题处理</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/Linux/问题处理/2022-11-20-Linux图形界面.html"><span class="label">2022-11-20-Linux图形界面</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/问题处理/2022-8-24-tftp下载.html"><span class="label">2022-8-24-tftp下载</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/问题处理/2022-8-26-uboot设置.html"><span class="label">2022-8-26-uboot设置</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/问题处理/2022-8-27-根文件系统被删除.html"><span class="label">2022-8-27-根文件系统被删除</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/问题处理/2022-8-5-没有release文件.html"><span class="label">2022-8-5-没有release文件</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/问题处理/2022-9-7-备份根文件.html"><span class="label">2022-9-7-备份根文件</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/问题处理/2022-9-9-ubuntu移植问题处理.html"><span class="label">2022-9-9-ubuntu移植问题处理</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/问题处理/2023-11-11-树莓派.html"><span class="label">2023-11-11-树莓派</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/问题处理/2023-6-14-打不开gpedit-msc.html"><span class="label">2023-6-14-打不开gpedit-msc</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/问题处理/2023-6-28-vscode配置.html"><span class="label">2023-6-28-vscode配置</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/Linux/问题处理/2023-8-27-开发板网络设置.html"><span class="label">2023-8-27-开发板网络设置</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">韦东山Linux</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/Linux/韦东山Linux/2025-3-4-基础.html"><span class="label">2025-3-4-基础</span><span class=""></span></a></li>
</ul>
</li>
</ul>

            </div>
        </div>
        <div id="article">
            <div id="menu_wrapper">
                <div id="menu">
                </div>
            </div>
            <div id="content_wrapper">
                <div id="content_body">
                    <div id="article_head">
                        <div id="article_title">
                            
                            <h1>添加板子</h1>
                            
                        </div>
                        <div id="article_tags">
                            <ul>
                            
                            </ul>
                        </div>
                        <div id="article_info">
                        <div id="article_info_left">
                            <span class="article_author">
                                
                            </span>
                            
                                <span class="article_date" title="最后修改日期： 2025-12-14">
                                    2025-12-14
                                </span>
                            
                        </div>
                        <div id="article_info_right">
                            
                            <div id="source_link">
                                <a href="https://github.com/XuSenfeng/note/tree/master/doc/Linux/瑞芯微Linux/2025-12-7-03-添加板子.md" target="_blank">
                                    编辑本页
                                </a>
                            </div>
                            
                        </div>
                        </div>
                    </div>
                    <div id="article_tools">
                        <span></span>
                        <span id="toc_btn"></span>
                    </div>
                    <div id="update_history">
                        
                    </div>
                    <div id="article_content">
                        
                            <h2 id="mk%E6%96%87%E4%BB%B6">mk文件</h2>
<p>从build.sh文件里面可以获取到</p>

<pre class="language-bash"><code class="language-bash">    RK_TARGET_BOARD_ARRAY=($(
    	cd ${TARGET_PRODUCT_DIR}/
    	ls BoardConfig_*/BoardConfig*.mk | sort
    ))
</code></pre>
<p>他会获取这个文件夹下面的所有文件</p>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202512072231867.png" alt="image-20251207223158783" /></p>
<p>在函数<code>choose_target_board</code>里面进行实际的开发板选择, 以及选择使用的存储媒介, 使用的根文件系统, 最终根据使用的配置获取到上面的板子文件</p>
<p>最终这个文件被链接到./.BoardConfig.mk文件上面</p>

<pre class="language-bash"><code class="language-bash">jiao@jiao-virtual-machine:~/rv/echo-mate/Echo-Mate/SDK/rv1106-sdk$ ls ./.BoardConfig.mk -l
lrwxrwxrwx 1 jiao jiao 87 12月  4 17:42 ./.BoardConfig.mk -&gt; project/cfg/BoardConfig_IPC/BoardConfig-SPI_NAND-Buildroot-RV1106_Echo_Mate-DeskMate.mk
</code></pre>
<h3 id="%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9">文件内容</h3>
<p>所有的配置可以在<code>project/cfg-all-items-introduction.txt</code>里面看到</p>
<p>这个文件里面配置开发板实际使用的配置</p>
<ul>
<li>芯片: rv1106</li>
<li>使用的设备树: rv1106g-echo-mate.dts</li>
<li>使用的uboot默认配置: echo_rv1106_uboot_defconfig</li>
<li>内核基础配置: echo_rv1106_linux_defconfig</li>
<li>使用Wifi</li>
</ul>
<h2 id="build.sh%E8%84%9A%E6%9C%AC">build.sh脚本</h2>
<p>传入的命令解析</p>

<pre class="language-bash"><code class="language-bash">num=$#
option=&quot;&quot;
# 遍历所有的命令
while [ $# -ne 0 ]; do
    case $1 in
    DEBUG) export RK_BUILD_VERSION_TYPE=DEBUG ;;
    all) option=build_all ;;
    save) option=build_save ;;
    allsave) option=build_allsave ;;
    check) option=build_check ;;
    clean)
    	option=&quot;build_clean $2&quot;
    	break # 后面的参数忽略
    	;;
    firmware) option=build_firmware ;;
    ota) option=build_ota ;;
    updateimg) option=build_updateimg ;;
    unpackimg) option=build_unpack_updateimg ;;
    factory) option=build_factory ;;
    recovery) option=build_recovery ;;
    env) option=build_env ;;
    meta) option=build_meta ;;
    driver) option=build_driver ;;
    sysdrv) option=build_sysdrv ;;
    uboot) option=build_uboot ;;
    kernel) option=build_kernel ;;
    rootfs) option=build_rootfs ;;
    media) option=build_media ;;
    app) option=build_app ;;
    info) option=build_info ;;
    tool) option=build_tool ;;
    buildrootconfig) option=buildroot_config ;;
    kernelconfig) option=kernel_config ;;
    *) option=usage ;;
    esac
    if [ $((num)) -gt 0 ]; then
    	# shift 会将参数列表左移一位，每次处理完 $1 后
    	# 下一个参数变成新的 $1
    	shift
    fi
done
# 如果 option 非空（已匹配到有效参数），则使用 option 的值；
# 如果 option 为空（如仅传 DEBUG、或未传任何参数），则使用默认值 build_allsave。
eval &quot;${option:-build_allsave}&quot;
</code></pre>
<p>默认执行的是build_allsave</p>

<pre class="language-bash"><code class="language-bash">function build_allsave() {
    # rm -rf ${RK_PROJECT_OUTPUT_IMAGE} ${RK_PROJECT_OUTPUT}
    build_all
    build_save

    build_check_power_domain

    finish_build
}
</code></pre>
<h3 id="build_recovery%E5%8D%87%E7%BA%A7%E5%88%86%E5%8C%BA">build_recovery升级分区</h3>
<table>
<thead>
<tr>
  <th>特性</th>
  <th>update.img</th>
  <th>update_ota.tar</th>
</tr>
</thead>
<tbody>
<tr>
  <td>核心定位</td>
  <td>瑞芯微标准全量系统镜像包</td>
  <td>OTA（空中升级）专用压缩包</td>
</tr>
<tr>
  <td>格式 / 结构</td>
  <td>瑞芯微定制的镜像格式（含分区表、烧录引导信息、所有分区镜像）</td>
  <td>标准 tar 压缩包（仅含升级必需的镜像 + 脚本）</td>
</tr>
<tr>
  <td>生成逻辑</td>
  <td>由 <code>build_updateimg</code> 生成，整合 <code>uboot.img</code>/<code>boot.img</code>/ <code>rootfs.img</code>/<code>recovery.img</code>/ <code>oem.img</code>/<code>userdata.img</code> 等<strong>所有分区镜像</strong>，是系统的 “完整备份”</td>
  <td>由 <code>build_ota</code> 生成，仅打包升级必需的镜像（默认 <code>uboot.img</code>/<code>boot.img</code>/ <code>rootfs.img</code>，或自定义 <code>RK_OTA_RESOURCE</code>）+ <code>RK_OTA_update.sh</code> 升级脚本，是 “最小升级集”</td>
</tr>
<tr>
  <td>依赖条件</td>
  <td>无需依赖设备现有系统（裸机 / 砖机均可烧录）</td>
  <td>依赖设备已启用 <code>Recovery</code> 模式（需 <code>recovery.img</code> 正常运行）</td>
</tr>
<tr>
  <td>体积</td>
  <td>大（包含全部分区，通常数百 MB~ 数 GB）</td>
  <td>小（仅含核心升级镜像，可按需精简）</td>
</tr>
</tbody>
</table>
<p><a href="https://lo01.g77k.com/aeb/docs/cn/Linux/Recovery/Rockchip_Developer_Guide_Linux_Recovery_CN.pdf"  target="_blank">Rockchip_Developer_Guide_Linux_Recovery_CN.pdf</a></p>
<p>这个脚本是<strong>瑞芯微（RK）嵌入式平台下 Recovery 镜像（recovery.img）的完整构建流程</strong>，Recovery 是嵌入式系统的 “恢复模式”（用于系统升级、分区修复、出厂恢复等），脚本的核心目标是编译 Recovery 依赖组件、生成配套的操作脚本、打包根文件系统，并最终生成可烧录的 recovery.img</p>
<p>用于进行OTA升级, 需要在配置文件里面加入RK_ENABLE_RECOVERY(未使用)</p>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202512081001646.png" alt="image-20251208100103532" /></p>
<blockquote>
<p>官方的编译示例</p>
<p>rootfs 需要打开update 的支持，configs 文件配置 BR2_PACKAGE_UPDATE=y</p>

<pre class="language-bash"><code class="language-bash">source envsetup.sh
 #choose a combo number to build rootfs according to platform chip
make menuconfig

Target packages  ---&gt;
     [*] Rockchip BSP packages  ---&gt;
         [*]  Rockchip OTA update for linux
</code></pre>
<p>buildroot/configs/rockchip/recovery.config 中已经将不同平台的recovery配置抽取出来 了。 只需系统根目录下执行</p>

<pre class="language-bash"><code class="language-bash"> ./build.sh recovery
</code></pre>
<p>成功后，会生成文件  buildroot/output/rockchip_rkxxxx_recovery/images/recovery.img</p>

<pre class="language-bash"><code class="language-bash"> ./mkfirmware.sh
</code></pre>
<p>会将生成的固件拷贝至 rockdev/目录下</p>
<ul>
<li>升级固件</li>
</ul>
<p>修改  tools/linux/Linux_Pack_Firmware/rockdev/package-file ，根据需要升级的分区配置，修改 该文件, 可以指定实际需要升级的分区而不是所有的分区</p>

<pre class="language-bash"><code class="language-bash">./build.sh updateimg
</code></pre>
<p>命令执行成功后，会将package-file指定的分区镜像打包生成update.img 升级固件，放在 rockdev/目录下。 使用该update.img 升级</p>
<ul>
<li>实际的升级</li>
</ul>
<p>将升级固件 update.img 放在 SD 卡或 U 盘根目录或者设备的/userdata 目录下</p>
<p>Normal 系统下执行升级程序  update ota /xxx/update.img，设备将会进入 recovery 模式，并进 行升级。</p>
<blockquote>
<p>U 盘的挂载路径： /udisk sdcard 的挂载路径： /mnt/sdcard/ 或/sdcard flash 的挂载路径： /userdata/</p>
<p>放在/userdata分区的升级的时候, 这个分区不要打包在update.img文件里面</p>
</blockquote>
<p>查看脚本有RkLunch-recovery.sh脚本可以用于使用使用update_ota.tar升级, 但未找到相关资料</p>
<ul>
<li>恢复出厂设置</li>
</ul>
<p>我们把可以读写的配置文件保存在 userdata 分区，出厂固件会默认一些配置参数，用户使用一 段时间后 会生成或修改配置文件，有时用户需要清除这些数据，我们就需要恢复到出厂配置。直接运行 update 后面不加任何参数或者加  factory/reset 参数均可进入 recovery 后恢复出厂配置</p>
</blockquote>
<p>Recovery 依赖精简版内核和 Busybox（嵌入式基础命令集，如 <code>dd</code>/<code>sh</code>/<code>flash_eraseall</code> 等）, 所以需要编译出来</p>

<pre class="language-bash"><code class="language-bash"># 创建必要目录
mkdir -p $RK_PROJECT_PATH_RAMDISK_TINY_ROOTFS $RK_PROJECT_PATH_RAMDISK
# 清理旧的Busybox编译产物 → 编译Busybox+内核 → 再次清理临时产物
make busybox_clean -C ${SDK_SYSDRV_DIR}
make -C ${SDK_SYSDRV_DIR} \
    OUTPUT_SYSDRV_RAMDISK_TINY_ROOTFS_DIR=$RK_PROJECT_PATH_RAMDISK_TINY_ROOTFS \
    OUTPUT_SYSDRV_RAMDISK_DIR=$RK_PROJECT_PATH_RAMDISK \
    busybox kernel
make busybox_clean -C ${SDK_SYSDRV_DIR}
</code></pre>
<p>初始化一系列的变量</p>

<pre class="language-bash"><code class="language-bash"># 内核镜像路径（按架构区分zImage/Image）
local kernel_image          
# 设备树文件（.dts编译后生成.dtb）
local kernel_dtb_file=&quot;$RK_PROJECT_PATH_RAMDISK/${RK_KERNEL_DTS/%.dts/.dtb}&quot;  
# OTA升级脚本路径
local ota_script=&quot;$OTA_SCRIPT_PATH/RK_OTA_update.sh&quot;  
# 擦除misc分区脚本
local erase_misc_script=&quot;$RK_PROJECT_PATH_RAMDISK_TINY_ROOTFS/usr/bin/RK_OTA_erase_misc.sh&quot;  
# 根文件系统默认打包格式（cpio）
local ramdisk_file=&quot;rootfs.cpio&quot;  
</code></pre>
<p>Recovery 依赖精简版内核和 Busybox, 需要编译出来</p>

<pre class="language-bash"><code class="language-bash"># 创建必要目录
mkdir -p $RK_PROJECT_PATH_RAMDISK_TINY_ROOTFS $RK_PROJECT_PATH_RAMDISK
# 清理旧的Busybox编译产物 → 编译Busybox+内核 → 再次清理临时产物
make busybox_clean -C ${SDK_SYSDRV_DIR}
make -C ${SDK_SYSDRV_DIR} \
OUTPUT_SYSDRV_RAMDISK_TINY_ROOTFS_DIR=$RK_PROJECT_PATH_RAMDISK_TINY_ROOTFS \
    OUTPUT_SYSDRV_RAMDISK_DIR=$RK_PROJECT_PATH_RAMDISK \
    busybox kernel
make busybox_clean -C ${SDK_SYSDRV_DIR}
</code></pre>
<ul>
<li><code>DK_SYSDRV_DIR</code>：平台系统驱动 / 基础组件的编译目录；</li>
<li>编译产物输出到 <code>RK_PROJECT_PATH_RAMDISK</code>（Recovery 根文件系统目录）。</li>
</ul>
<p>之后就是在生成的根文件系统里面生成使用的脚本</p>
<h3 id="build_sysdrv">build_sysdrv</h3>
<blockquote>
<p><code>build_all</code> 没有直接调用 <code>build_kernel</code>，而是通过调用 <code>build_sysdrv</code>，由 <code>build_sysdrv</code> 执行 <code>${SDK_SYSDRV_DIR}</code> 目录下的 <code>Makefile</code>，间接触发内核编译</p>
<p>实际的编译文件是sysdrv/Makefile</p>
</blockquote>
<p>这段脚本是<strong>Luckfox（瑞芯微）SDK 中「系统驱动 / 基础组件（sysdrv）」的构建核心流程</strong>，核心目标是完成 sysdrv 组件编译，并将编译生成的根文件系统（rootfs）压缩包解压到指定输出目录，同时给出自定义文件的添加指引，最终完成整个 sysdrv 构建阶段</p>

<pre class="language-bash"><code class="language-bash">mkdir -p ${RK_PROJECT_OUTPUT_IMAGE}
# 实际的编译命令sysdrv, 在这个文件夹里面执行make命令
make -C ${SDK_SYSDRV_DIR}
# output/out/sysdrv_out/rootfs_uclibc_rv1106.tar
rootfs_tarball=&quot;$RK_PROJECT_PATH_SYSDRV/rootfs_${RK_LIBC_TPYE}_${RK_CHIP}.tar&quot;
# output/out/rootfs_uclibc_rv1106
rootfs_out_dir=&quot;$RK_PROJECT_OUTPUT/rootfs_${RK_LIBC_TPYE}_${RK_CHIP}&quot;
# 创建文件夹
if ! [ -d $RK_PROJECT_OUTPUT ]; then
    mkdir -p $RK_PROJECT_OUTPUT
fi
# 解压文件
if [ -f $rootfs_tarball ]; then
    if [ -d $rootfs_out_dir ]; then
        rm -rf $rootfs_out_dir
    fi
    tar xf $rootfs_tarball -C $RK_PROJECT_OUTPUT
else
    msg_error &quot;Not found rootfs tarball: $rootfs_tarball&quot;
    exit 1
fi

msg_info &quot;If you need to add custom files, please upload them to &lt;Luckfox Sdk&gt;/output/out/rootfs_${RK_LIBC_TPYE}_${RK_CHIP}.&quot;
# 打印一行提示返回
finish_build
</code></pre>
<p>编译 sysdrv 下的所有组件（包括内核驱动、精简版根文件系统 rootfs、Busybox 等基础工具），编译完成后会自动生成 rootfs 的 tar 压缩包（后续要解压的文件）</p>
<h3 id="build_media">build_media</h3>
<p>在media文件夹下面执行make命令</p>
<h3 id="build_app">build_app</h3>
<p><strong>Luckfox / 瑞芯微（RK）嵌入式平台应用层（App）构建流程的核心片段</strong>，主要包含两大核心逻辑：<strong>WiFi 自动连接配置生成（可选）</strong> 和 <strong>应用层代码编译</strong>，整体服务于 “定制化配置 + 应用编译” 的完整流程，适配嵌入式设备的应用开发场景</p>

<pre class="language-bash"><code class="language-bash"># 配置使用WIFI
if [ &quot;$RK_ENABLE_WIFI&quot; = &quot;y&quot; ]; then
    echo &quot;Set Wifi SSID and PASSWD&quot;
    # 检查 LF_WIFI_PSK（WiFi密码）、
    # LF_WIFI_SSID（WiFi名称）配置项是否定义，未定义则退出
    check_config LF_WIFI_PSK LF_WIFI_SSID || return 0
    touch $WIFI_NEW_CONF
    # 写入wpa_supplicant格式的WiFi配置
    # （嵌入式WiFi连接核心配置）
    cat &gt;$WIFI_NEW_CONF &lt;&lt;EOF
ctrl_interface=/var/run/wpa_supplicant
ap_scan=1
update_config=1

network={
    ssid=&quot;$LF_WIFI_SSID&quot;
    psk=&quot;$LF_WIFI_PSK&quot;
    key_mgmt=WPA-PSK
}
EOF
    # 将临时配置文件移动到正式的WiFi配置路径（覆盖/替换原有配置）
    # /wifi_app/wpa_supplicant.conf
    mv $WIFI_NEW_CONF $WIFI_CONF
fi
# 查看应用的类型, 设置设置的是RKIPC_RV1106
check_config RK_APP_TYPE || return 0

echo &quot;============Start building app============&quot;
echo &quot;TARGET_APP_CONFIG=$RK_APP_DEFCONFIG $RK_APP_DEFCONFIG_FRAGMENT $RK_APP_TYPE&quot;
echo &quot;=========================================&quot;
# 导出meta层头文件（供应用编译依赖，比如硬件抽象层、系统接口的头文件）
build_meta --export # export meta header files
#build_meta --export --media_dir $RK_PROJECT_PATH_MEDIA # for rtl8723bs
# 检查应用代码目录是否存在，存在则进入目录执行make编译
test -d ${SDK_APP_DIR} &amp;&amp; make -C ${SDK_APP_DIR}
</code></pre>
<p>在 Luckfox/RK 嵌入式平台中，“meta” 是设备的「核心元数据组件」，常见用途包括：</p>
<ol>
<li>存储设备硬件信息（芯片型号、内存大小、外设配置）；</li>
<li>定义系统分区表（比如 boot/rootfs/recovery/meta 分区的大小、偏移）；</li>
<li>保存系统版本号、出厂配置、加密密钥等；</li>
<li>为应用层 / 驱动层提供统一的配置接口（比如之前应用编译时 <code>build_meta --export</code> 就是导出 meta 的头文件，让应用能读取这些配置）。</li>
</ol>

<pre class="language-bash"><code class="language-bash">function build_meta() {
    msg_info &quot;============Start building meta============&quot;
    if [ -n &quot;$RK_META_SIZE&quot; ]; then
    	# 查看这个文件是不是存在(判断失败返回)
    	if [ -d &quot;${RK_PROJECT_TOP_DIR}/make_meta&quot; ]; then
    		${RK_PROJECT_TOP_DIR}/make_meta/build_meta.sh $@
    	fi
    fi
    finish_build
}
</code></pre>
<blockquote>
<p>实际这个文件不存在</p>
</blockquote>
<h3 id="build_firmware">build_firmware</h3>

<pre class="language-bash"><code class="language-bash"># 查看分区表配置是不是有效
#&quot;256K(env),256K@256K(idblock),512K(uboot),4M(boot),30M(oem),10M(userdata),210M(rootfs)&quot;
check_config RK_PARTITION_CMD_IN_ENV || return 0
# 构建环境变量镜像（env.img，存储uboot/env参数、系统启动配置）
build_env
# 没有使用
build_meta

mkdir -p ${RK_PROJECT_OUTPUT_IMAGE}
# 启用Rercovery升级的话
if [ &quot;$RK_ENABLE_RECOVERY&quot; = &quot;y&quot; -a -f $PROJECT_TOP_DIR/scripts/${RK_MISC:=recovery-misc.img} ]; then
    cp -fv $PROJECT_TOP_DIR/scripts/$RK_MISC ${RK_PROJECT_OUTPUT_IMAGE}/misc.img
fi
# 打包根文件系统（rootfs）：将解压后的rootfs目录打包为镜像/压缩包
# 在这个函数里面写入一些配置文件
__PACKAGE_ROOTFS
# 打包OEM分区：OEM分区用于存储厂商自定义配置、应用、资源文件
__PACKAGE_OEM
# 生成“核心转储（coredump）启用脚本”：方便调试程序崩溃问题
__BUILD_ENABLE_COREDUMP_SCRIPT
# 执行OEM打包前的自定义脚本：支持厂商在OEM打包前插入定制逻辑（如修改配置、添加文件）
__RUN_PRE_BUILD_OEM_SCRIPT
# 是否将应用打包到独立 OEM 分区
if [ &quot;$RK_BUILD_APP_TO_OEM_PARTITION&quot; = &quot;y&quot; ]; then
    # 将应用单独打包到OEM镜像（OEM分区独立）
    rm -rf $RK_PROJECT_PACKAGE_ROOTFS_DIR/oem/*
    mkdir -p $RK_PROJECT_PACKAGE_ROOTFS_DIR/oem
    build_mkimg $GLOBAL_OEM_NAME $RK_PROJECT_PACKAGE_OEM_DIR
else
    # 将OEM文件合并到rootfs的oem目录（无独立OEM分区）
    mkdir -p $RK_PROJECT_PACKAGE_ROOTFS_DIR/oem
    __COPY_FILES $RK_PROJECT_PACKAGE_OEM_DIR $RK_PROJECT_PACKAGE_ROOTFS_DIR/oem
    rm -rf $RK_PROJECT_PACKAGE_OEM_DIR
fi
# 执行打包后的自定义脚本：如修改镜像权限、添加校验、清理临时文件
__RUN_POST_BUILD_SCRIPT
#  叠加自定义配置/文件：将SDK中“overlay目录”的自定义文件覆盖到镜像中（无需修改原始rootfs）
post_overlay
# 启用INITRAMFS启动（内存根文件系统）→ 打包boot.img
if [ -n &quot;$GLOBAL_INITRAMFS_BOOT_NAME&quot; ]; then
    build_mkimg boot $RK_PROJECT_PACKAGE_ROOTFS_DIR
fi
# 根据Fastboot配置选择打包目标
if [ &quot;$RK_ENABLE_FASTBOOT&quot; = &quot;y&quot; ]; then
    # Fastboot模式打包boot.img
    build_mkimg boot $RK_PROJECT_PACKAGE_ROOTFS_DIR
else
    # 普通模式打包rootfs.img
    build_mkimg $GLOBAL_ROOT_FILESYSTEM_NAME $RK_PROJECT_PACKAGE_ROOTFS_DIR
fi

# package a empty userdata parition image
# 打包空的 userdata 分区镜像
mkdir -p $RK_PROJECT_PACKAGE_USERDATA_DIR
build_mkimg userdata $RK_PROJECT_PACKAGE_USERDATA_DIR
# 构建TFTP/SD卡升级包：支持通过TFTP（网络）或SD卡刷机
build_tftp_sd_update
# 启用Recovery/OTA时，构建OTA升级包
[ &quot;$RK_ENABLE_RECOVERY&quot; = &quot;y&quot; -o &quot;$RK_ENABLE_OTA&quot; = &quot;y&quot; ] &amp;&amp; build_ota
# 构建统一更新镜像（update.img）：瑞芯微标准刷机镜像，支持RKDevTool工具烧录
build_updateimg

# Spi_nand mklink
# SPI NAND 是嵌入式常用的闪存介质，其镜像格式 / 路径有特殊要求
if [ &quot;${RK_BOOT_MEDIUM}&quot; == &quot;spi_nand&quot; ]; then
    msg_info &quot;MEDIUM SPI_NAND relink Image&quot;
    files=(&quot;${RK_PROJECT_OUTPUT_IMAGE}/oem.img&quot;
        &quot;${RK_PROJECT_OUTPUT_IMAGE}/rootfs.img&quot;
        &quot;${RK_PROJECT_OUTPUT_IMAGE}/userdata.img&quot;)
    for file in &quot;${files[@]}&quot;; do
        if [ -e &quot;$file&quot; ]; then
        	# 获取镜像的实际路径（可能是软链接）
            filename=$(basename &quot;$file&quot;)
            target=$(readlink -f &quot;$file&quot;)
             # 删除原软链接
            rm &quot;$file&quot;
            # 将实际文件移到输出目录
            mv &quot;$target&quot; &quot;$RK_PROJECT_OUTPUT_IMAGE/$filename&quot;
        fi
    done
    # 删除所有.ubi格式文件（SPI NAND不使用UBI镜像，清理冗余）
    find &quot;${RK_PROJECT_OUTPUT_IMAGE}&quot; -type f -name &quot;*.ubi&quot; -exec rm {} +
fi
finish_build
</code></pre>
<h3 id="build_ota">build_ota</h3>
<p>这段脚本是 <strong>Luckfox / 瑞芯微（RK）嵌入式平台中「OTA 升级包（update_ota.tar）的构建逻辑」</strong>，核心作用是：仅当启用 Recovery 或 OTA 功能时，将系统升级所需的核心镜像（如 uboot/boot/rootfs.img）和 Recovery 模式下的 OTA 升级脚本打包成 <code>update_ota.tar</code> 压缩包 —— 该包是设备 OTA 升级的核心载体，Recovery 模式下解压此包并执行脚本即可完成系统升级。</p>

<pre class="language-bash"><code class="language-bash">check_config RK_ENABLE_RECOVERY || check_config RK_ENABLE_OTA || return 0
# update_img：存储要打包到 OTA 包中的镜像列表（如 uboot.img、boot.img）；
# update_script：存储要打包的 OTA 升级脚本（RK_OTA_update.sh）；
# tar_cmd：存储最终执行的 tar 打包命令。
local update_img update_script tar_cmd

if [ -z &quot;$RK_OTA_RESOURCE&quot; ]; then
    # 使用默认镜像（uboot.img/boot.img/rootfs.img）
    for img in uboot.img boot.img rootfs.img; do
        if [ -f &quot;$RK_PROJECT_OUTPUT_IMAGE/$img&quot; ]; then
            update_img=&quot;$update_img $img&quot;
        else
            msg_warn &quot;Not found $img, check again!!!&quot;
        fi
    done
else
    # 自定义了OTA镜像列表（RK_OTA_RESOURCE）→ 使用自定义列表
    update_img=&quot;$RK_OTA_RESOURCE&quot;
fi

[[ &quot;$RK_ENABLE_RECOVERY&quot; = &quot;y&quot; ]] &amp;&amp; update_script=&quot;-C $OTA_SCRIPT_PATH RK_OTA_update.sh&quot;

tar_cmd=&quot;tar -cvhf  $RK_PROJECT_OUTPUT_IMAGE/update_ota.tar \
             -C $RK_PROJECT_OUTPUT_IMAGE $update_img \
             $update_script&quot;
eval $tar_cmd

finish_build
</code></pre>
<p>tar命令参数说明：</p>
<ul>
<li><p><code>-c</code>：创建新的 tar 包；</p>
</li>
<li><p><code>-v</code>：可视化输出打包过程（打印包含的文件）；</p>
</li>
<li><p><code>-h</code>：跟随软链接（打包软链接指向的实际文件，避免打包空链接）；</p>
</li>
<li><p><code>-f</code>：指定输出的 tar 包文件名（update_ota.tar）；</p>
</li>
<li><p><code>-C $RK_PROJECT_OUTPUT_IMAGE</code>：先进入镜像输出目录，再打包 <code>$update_img</code>（确保 tar 包内镜像无绝对路径）。</p>
</li>
<li><p><code>eval $tar_cmd</code>：执行构造的 tar 命令，最终在 <code>${RK_PROJECT_OUTPUT_IMAGE}</code> 目录生成 <code>update_ota.tar</code>。</p>
</li>
</ul>
<h2 id="%E7%BC%96%E8%AF%91%E8%84%9A%E6%9C%AC">编译脚本</h2>
<p>所有文件的编译文件是sysdrv/Makefile</p>
<p>核心目标是自动化编译、打包嵌入式系统所需的 UBoot、Linux 内核、根文件系统（rootfs）、UBoot 环境配置等核心组件，同时提供灵活的配置适配和清理 / 调试辅助功能。</p>
<ol>
<li><strong>环境与参数初始化</strong><ul>
<li>定义基础路径（<code>SYSDRV_DIR</code>为当前目录）、编译环境（强制 C 语言环境、指定 bash shell）、构建版本（RELEASE/DEBUG）、交叉编译工具链（支持外部传入<code>RK_TOOLCHAIN_CROSS</code>覆盖）、C 库类型（默认 glibc）。</li>
<li>支持<strong>外部参数覆盖默认配置</strong>（如<code>RK_BOOT_MEDIUM</code>指定启动介质、<code>RK_KERNEL_DTS</code>指定内核设备树、<code>RK_ROOTFS_FS_TYPE</code>指定根文件系统格式），适配不同硬件 / 构建需求。</li>
<li>配置启动介质（默认 emmc，支持 spi_nor/spi_nand/sd_card 等）、分区信息（通过脚本<code>get_part_info.sh</code>获取 rootfs/env 分区的大小 / 编号）。</li>
</ul>
</li>
<li><strong>输出目录与工具配置</strong><ul>
<li>划分清晰的输出目录结构：<code>out/</code>下分镜像（image）、板端工具（board）、PC 端工具（pc）、根文件系统（rootfs）子目录，区分 PC / 板端产物。</li>
<li>关联镜像制作工具（如<code>mkfs_ext4.sh</code>/<code>mkfs_ubi.sh</code>）、分区解析脚本，适配 ext4/ubi/jffs2/squashfs/erofs 等根文件系统格式。</li>
</ul>
</li>
</ol>
<p>编译的目标</p>

<pre class="language-makefile"><code class="language-makefile">all: uboot kernel rootfs env
</code></pre>
<p>在使用buildroot的时候rootfs依赖于</p>

<pre class="language-makefile"><code class="language-makefile">ROOTFS_BUILD_ENV := rootfs_prepare pctools buildroot boardtools drv
</code></pre>
<h3 id="%E7%BC%96%E8%AF%91uboot">编译uboot</h3>
<blockquote>
<p>可以使用./build.sh info查看使用的参数</p>
</blockquote>

<pre class="language-makefile"><code class="language-makefile">uboot: prepare
    @echo -e &quot;$(C_GREEN) ==sysdrv== build uboot  $(C_NORMAL)&quot;
    # 根据配置文件生成配置文件
    # make -C $(UBOOT_DIR)echo_rv1106_uboot_defconfig rk-sfc.config
    @$(MAKE) -C $(UBOOT_DIR) $(UBOOT_CFG) $(UBOOT_CFG_FRAGMENT)
    # 切换目录, 同时把目录名压栈, 之后执行实际的编译命令
    # 执行结束返回
    pushd $(UBOOT_DIR);$(UBOOT_COMPILE_MAKE) $(UBOOT_COMPILE_MAKE_OPTS) CROSS_COMPILE=$(CROSS_COMPILE);popd
    # 编译成功的时候输出uboot.img到输出目录里面
    $(AT)test ! -f $(UBOOT_DIR)/uboot.img || cp -fv $(UBOOT_DIR)/uboot.img $(SYSDRV_DIR_OUT_IMAGE)
    # 复制BOOT 目录下的原始 IDBLOCK 文件为idblock.img
    $(AT)cp -fv $(UBOOT_DIR)/$(IDBLOCK_SRC_BIN) $(SYSDRV_DIR_OUT_IMAGE)/$(IDBLOCK_IMG)
    # download.bin
    $(AT)cp -fv $(UBOOT_DIR)/$(DOWNLOAD_SRC_BIN) $(SYSDRV_DIR_OUT_IMAGE)/$(DOWNLOAD_BIN)
    # 批量拷贝
    $(call MAROC_COPY_PKG_TO_SYSDRV_OUTPUT, $(OUTPUT_IMAGE_PATH), \
    	$(SYSDRV_DIR_OUT_IMAGE)/$(IDBLOCK_IMG) \
    	$(SYSDRV_DIR_OUT_IMAGE)/uboot.img \
    	$(SYSDRV_DIR_OUT_IMAGE)/$(DOWNLOAD_BIN))

</code></pre>

<pre class="language-bash"><code class="language-bash">cd /home/jiao/rv/echo-mate/Echo-Mate/SDK/rv1106-sdk/sysdrv/source/uboot/u-boot
make echo_rv1106_uboot_defconfig rk-sfc.config
./make.sh --spl-new CROSS_COMPILE=arm-rockchip830-linux-uclibcgnueabihf- 
cp -fv ./*_idblock_v*.img idblock.img 
cp -fv ./*_download_v*.bin download.bin
</code></pre>
<h3 id="%E7%BC%96%E8%AF%91kernel">编译kernel</h3>

<pre class="language-makefile"><code class="language-makefile">kernel: prepare
    @echo -e &quot;$(C_GREEN) ==sysdrv== build kernel  $(C_NORMAL)&quot;
ifeq ($(RK_ENABLE_FASTBOOT), y)
    # fastboot 模式下需确保驱动模块完整
    $(call MACRO_CHK_DRIVER_MODULE, $(SYSDRV_DIR)/drv_ko/rockit/, rockit-ko)
    $(call MACRO_CHK_DRIVER_MODULE, $(SYSDRV_DIR)/drv_ko/kmpp/, kmpp)
endif
    # 删除旧的 DTB 文件（设备树）
    @rm -rf $(KERNEL_DTB)
    # 生成.config文件
    $(MAKE) -C $(KERNEL_DIR) ARCH=$(ARCH) CROSS_COMPILE=$(CROSS_COMPILE) $(KERNEL_CFG) $(KERNEL_CFG_FRAGMENT)
    # 编译内核, 设备树(img后缀), 指定 U-Boot 的镜像描述文件（ITS）
    # 用于打包内核镜像为 U-Boot 可识别的格式
    $(MAKE) -C $(KERNEL_DIR) ARCH=$(ARCH) CROSS_COMPILE=$(CROSS_COMPILE) $(KERNEL_DTS:dts=img) BOOT_ITS=boot.its -j$(SYSDRV_JOBS)
ifeq ($(RK_ENABLE_FASTBOOT), y)
    $(call MACRO_CLEAN_DRIVER_MODULE, rockit-ko)
    $(call MACRO_CLEAN_DRIVER_MODULE, kmpp)
endif
    # 复制vmlinux镜像
    cp -fv $(KERNEL_DIR)/vmlinux $(SYSDRV_DIR_OUT_BOARD)
    # RK 平台自定义脚本，修改 DTB 文件中的内核启动参数
    update_dtb_bootargs.sh --cmdline '$(KERNEL_CMDLINE_FRAGMENT)' --dtb $(KERNEL_DTB) --output $(KERNEL_DTB)
ifneq ($(RK_ENABLE_FASTBOOT), y)
    # 将修改后的 DTB重新整合到resource.img/boot.img中
    # 手动修改 DTB 后，DTB 的时间戳更新，但 Makefile 无法关联 “DTB 更新→需要重新打包 img”
    $(MAKE) -C $(KERNEL_DIR) ARCH=$(ARCH) CROSS_COMPILE=$(CROSS_COMPILE) $(KERNEL_DTS:dts=img) BOOT_ITS=boot.its -j$(SYSDRV_JOBS)
endif
ifneq ($(KERNEL_DTB),)
    # 有dtb的时候, 复制dtb
    cp -fv $(KERNEL_DTB) $(SYSDRV_DIR_OUT_BOARD)
endif
    # Start install kernel drivers
    # 分场景拷贝内核产物
ifeq ($(SYSDRV_BUILD_RAMDISK_FLAG),YES)
    $(call MAROC_COPY_PKG_TO_SYSDRV_OUTPUT, $(OUTPUT_SYSDRV_RAMDISK_DIR), \
    	$(KERNEL_DIR)/arch/$(ARCH)/boot/Image* \
    	$(KERNEL_DTB) \
    	$(KERNEL_DIR)/arch/$(ARCH)/boot/zImage \
    	$(KERNEL_DIR)/resource.img)
else
ifneq ($(RK_ENABLE_FASTBOOT), y)
    cp -fv $(KERNEL_DIR)/boot.img $(SYSDRV_DIR_OUT_IMAGE)/boot.img
endif
ifneq ($(OUTPUT_FASTBOOT_IMAGE_PATH),)
    $(call MAROC_COPY_PKG_TO_SYSDRV_OUTPUT, $(OUTPUT_FASTBOOT_IMAGE_PATH), $(KERNEL_DIR)/arch/$(ARCH)/boot/Image)
    $(call MAROC_COPY_PKG_TO_SYSDRV_OUTPUT, $(OUTPUT_FASTBOOT_IMAGE_PATH), $(KERNEL_DIR)/resource.img)
    $(call MAROC_COPY_PKG_TO_SYSDRV_OUTPUT, $(OUTPUT_FASTBOOT_IMAGE_PATH), $(KERNEL_DTB))
endif
    $(call MAROC_COPY_PKG_TO_SYSDRV_OUTPUT, $(OUTPUT_IMAGE_PATH), $(SYSDRV_DIR_OUT_IMAGE)/boot.img)
    $(call MAROC_COPY_PKG_TO_SYSDRV_OUTPUT, $(OUTPUT_BOARD_BIN_PATH), \
    	$(SYSDRV_DIR_OUT_BOARD)/$(KERNEL_DTS:dts=dtb) $(SYSDRV_DIR_OUT_BOARD)/vmlinux)
endif
</code></pre>

<pre class="language-bash"><code class="language-bash">cd /home/jiao/rv/echo-mate/Echo-Mate/SDK/rv1106-sdk/sysdrv/source/kernel
make ARCH=arm CROSS_COMPILE=arm-rockchip830-linux-uclibcgnueabihf- echo_rv1106_linux_defconfig 
make ARCH=arm CROSS_COMPILE=arm-rockchip830-linux-uclibcgnueabihf- BOOT_ITS=boot.its rv1106g-echo-mate.img -j15
</code></pre>
<h3 id="rootfs">rootfs</h3>

<pre class="language-bash"><code class="language-bash">rootfs: $(ROOTFS_BUILD_ENV)
    @echo -e &quot;$(C_GREEN) ==sysdrv== build rootfs  $(C_NORMAL)&quot;
    # make strip裁剪二进制文件(可执行程序、.so 库)的符号表,调试信息
    make -C $(SYSDRV_DIR) strip
    # 切换到 sysdrv/out 目录
    # 将 rootfs 目录打包为单个 tar 包, 返回
    pushd $(SYSDRV_DIR)/out;tar cf $(OUT_ROOTFS).tar $(OUT_ROOTFS);popd
    @# RK_PARTITION_FS_TYPE_CFG is defined outside of sysdrv,
    @# so if defined RK_PARTITION_FS_TYPE_CFG, we ignore SYSDRV_ROOTFS_BUILD_TARGET
    @test &quot;$(ROOTFS_PART_SIZE)&quot; = &quot;FAIL&quot; || \
    	test &quot;$(RK_PARTITION_FS_TYPE_CFG)x&quot; != &quot;x&quot; || \
    	make -C $(SYSDRV_DIR) $(SYSDRV_ROOTFS_BUILD_TARGET)
    $(call MAROC_COPY_PKG_TO_SYSDRV_OUTPUT, $(OUTPUT_ROOTFS_SOURCE_DIR), $(SYSDRV_DIR)/out/$(OUT_ROOTFS).tar )
    $(call MAROC_COPY_PKG_TO_SYSDRV_OUTPUT, $(OUTPUT_ROOTFS_TOOLS_DIR), $(SYSDRV_DIR)/out/bin )
    @echo -e &quot;$(C_GREEN) ==sysdrv== finish sysdrv build  $(C_NORMAL)&quot;
</code></pre>
<h4 id="prepare">prepare</h4>

<pre class="language-makefile"><code class="language-makefile">rootfs_prepare: prepare
    @echo -e &quot;$(C_GREEN) ==sysdrv== prepare rootfs   $(C_NORMAL)&quot;
    rm -rf $(SYSDRV_DIR_OUT_ROOTFS)
    mkdir -p $(SYSDRV_DIR_OUT_ROOTFS)
    # 解压 rootfs 基础脚本 / 配置, 解压到指定的 rootfs 目录
    # sysdrv/out/rootfs_uclibc_rv1106, 里面是一个基础的rootfs框架
    tar xf $(SYSDRV_DIR)/tools/board/rootfs_script.tar -C $(SYSDRV_DIR_OUT_ROOTFS)
    # 解压交叉编译器运行时库
    tar xjf $(TOOLCHAIN_DIR)/$(TOOLCHAIN_RUNTIME_LIB)/$(TOOLCHAIN_RUNTIME_LIB_C) -C $(SYSDRV_DIR_OUT_ROOTFS)
    # 这些调试库体积大且量产时无用，迁移到SYSDRV_DIR_OUT_BOARD(板级调试目录)
    pushd $(SYSDRV_DIR_OUT_ROOTFS)/lib/ ; mv -fv \
    	libasan_preinit.o \
    	libasan.so* \
    	libtsan.so* \
    	libubsan.so* \
    	libSegFault.so \
    	libmemusage.so* \
    	libpcprofile.so* \
    	libthread_db*.so* \
    	libBrokenLocale* \
    	libinproctrace.so \
    	$(SYSDRV_DIR_OUT_BOARD); \
    popd
</code></pre>
<p>实际的rootfs_script.tar里面的结构如下</p>

<pre class="language-bash"><code class="language-bash">.
├── bin
├── data -&gt; userdata
├── dev
├── etc
│   ├── fstab
│   ├── group
│   ├── hostname
│   ├── hosts
│   ├── init.d
│   │   ├── rcK
│   │   ├── rcS
│   │   └── S20urandom
│   ├── inittab
│   ├── mtab -&gt; ../proc/self/mounts
│   ├── network
│   │   ├── if-down.d
│   │   ├── if-post-down.d
│   │   ├── if-pre-up.d
│   │   │   └── wait_iface
│   │   ├── if-up.d
│   │   └── interfaces
│   ├── nsswitch.conf
│   ├── os-release -&gt; ../usr/lib/os-release
│   ├── passwd
│   ├── profile
│   ├── profile.d
│   │   ├── RkEnv.sh
│   │   └── umask.sh
│   ├── protocols
│   ├── resolv.conf -&gt; ../tmp/resolv.conf
│   ├── services
│   └── shadow
├── lib
├── lib32 -&gt; lib
├── lib64 -&gt; lib
├── media
├── mnt
│   └── sdcard
├── oem
├── opt
├── proc
├── root
├── run
├── sbin
├── sys
├── tmp
├── userdata
├── usr
│   ├── bin
│   ├── lib
│   ├── lib32 -&gt; lib
│   ├── lib64 -&gt; lib
│   ├── sbin
│   └── share
│       └── udhcpc
│           ├── default.script
│           └── default.script.d
└── var
    ├── cache -&gt; ../tmp
    ├── lib
    │   └── misc -&gt; ../../tmp
    ├── lock -&gt; ../tmp
    ├── log -&gt; ../tmp
    ├── run -&gt; ../run
    ├── spool -&gt; ../tmp
    ├── tmp -&gt; ../tmp
    └── www
</code></pre>
<table>
<thead>
<tr>
  <th>库名</th>
  <th>作用（为什么迁移）</th>
</tr>
</thead>
<tbody>
<tr>
  <td>libasan/tsan/ubsan</td>
  <td>内存 / 线程 / 未定义行为检测的调试库（ASAN/TSAN/UBSAN），仅调试用，量产无需</td>
</tr>
<tr>
  <td>libSegFault.so</td>
  <td>段错误调试库（打印段错误堆栈），量产不需要</td>
</tr>
<tr>
  <td>libmemusage.so</td>
  <td>内存使用分析库，调试性能用</td>
</tr>
<tr>
  <td>libpcprofile.so</td>
  <td>性能分析库，调试用</td>
</tr>
<tr>
  <td>libthread_db*.so</td>
  <td>线程调试库（gdb 调试线程用），量产无需</td>
</tr>
<tr>
  <td>libBrokenLocale</td>
  <td>兼容旧字符集的库，嵌入式系统通常不用</td>
</tr>
<tr>
  <td>libinproctrace.so</td>
  <td>进程跟踪调试库，调试用</td>
</tr>
</tbody>
</table>
<h4 id="pctools">pctools</h4>
<p>实际是给out/bin/pc下面的文件执行权限</p>
<h4 id="buildroot">buildroot</h4>
<p>条件化初始化 Buildroot 环境（解压源码 + 定制配置 / 补丁）→ 配置 Buildroot（适配开发板）→ 优化镜像源（加速下载）→ 下载依赖源码 → 多核编译 Buildroot</p>

<pre class="language-makefile"><code class="language-makefile">buildroot: prepare
    @echo -e &quot;$(C_GREEN) ==sysdrv== build buildroot   $(C_NORMAL)&quot;
    # 目录不存在才执行
    test -d $(BUILDROOT_DIR)/$(BUILDROOT_VER) || (\
    	# 创建对应的buildroot目录
    	mkdir -p $(BUILDROOT_DIR) ;\ 
    	# 解压指定版本的 Buildroot 源码包到 Buildroot 根目录
    	tar xzf $(SYSDRV_DIR)/tools/board/buildroot/$(BUILDROOT_VER).tar.gz -C $(BUILDROOT_DIR) ;\
    	# 拷贝 Luckfox Pico/W 开发板的定制配置到 Buildroot 的 configs 目录
    	cp $(SYSDRV_DIR)/tools/board/buildroot/luckfox_pico_defconfig $(BUILDROOT_DIR)/$(BUILDROOT_VER)/configs/ ;\
    	cp $(SYSDRV_DIR)/tools/board/buildroot/luckfox_pico_w_defconfig $(BUILDROOT_DIR)/$(BUILDROOT_VER)/configs/ ;\
    	# 替换 Buildroot 默认的 Busybox 配置，定制嵌入式工具集
    	cp $(SYSDRV_DIR)/tools/board/buildroot/busybox.config $(BUILDROOT_DIR)/$(BUILDROOT_VER)/package/busybox/ ;\
    	# 拷贝蓝牙工具（bluez5_utils）的编译修复补丁
    	# 解决原版 Buildroot 中 bluez5 编译报错的问题
    	cp ${HCITOOL_TOOL_PATH}/0001-Fixed-header-file-errors.patch $(BUILDROOT_DIR)/$(BUILDROOT_VER)/package/bluez5_utils/ ;\
    	cp ${HCITOOL_TOOL_PATH}/0002-Fix-build-errors.patch $(BUILDROOT_DIR)/$(BUILDROOT_VER)/package/bluez5_utils/ ;\
    	cp ${HCITOOL_TOOL_PATH}/0003-fix-compat-wordexp.patch $(BUILDROOT_DIR)/$(BUILDROOT_VER)/package/bluez5_utils/ ;\
    	# 拷贝 MPV 播放器的编译补丁（调整编译线程数为 1，避免多核编译冲突）
    	cp ${MPV_PATCH_PATH}/0002-change-j1.patch $(BUILDROOT_DIR)/$(BUILDROOT_VER)/package/mpv/ ;\
    );
    # 加载编译的配置文件
    $(MAKE) ARCH=$(ARCH) CROSS_COMPILE=$(CROSS_COMPILE) $(BUILDROOT_DEFCONFIG) -C $(BUILDROOT_DIR)/$(BUILDROOT_VER) 
    # 核心功能是修改.config文件中的下载源
    # (如将http://ftp.gnu.org替换为国内镜像站, 如清华/阿里源)
    $(SYSDRV_DIR)/tools/board/mirror_select/buildroot_mirror_select.sh $(BUILDROOT_DIR)/$(BUILDROOT_VER)/.config
    # 下载所有依赖包的源码
    $(MAKE) ARCH=$(ARCH) CROSS_COMPILE=$(CROSS_COMPILE) source -C $(BUILDROOT_DIR)/$(BUILDROOT_VER) 
    # 多核编译 Buildroot
    $(MAKE) ARCH=$(ARCH) CROSS_COMPILE=$(CROSS_COMPILE) -j$(SYSDRV_JOBS) -C $(BUILDROOT_DIR)/$(BUILDROOT_VER) 

</code></pre>
<h4 id="boardtools">boardtools</h4>

<pre class="language-bash"><code class="language-bash">boardtools: tools_board-builds
    @echo -e &quot;$(C_GREEN) ==sysdrv== build tools which run on board   $(C_NORMAL)&quot;
</code></pre>

<pre class="language-makefile"><code class="language-makefile">tools_board-builds: \
    	board-build-toolkits \
    	board-build-gdb \
    	board-build-eudev \
    	board-build-rndis \
    	board-build-adbd \
    	board-build-rk_ota \
    	board-build-rockchip_test \
    	board-build-e2fsprogs \
    	board-build-sysstat \
    	board-build-mtd_utils
    @echo &quot;build tools board done&quot;
    
board-build-toolkits:
    $(MAKE) -C $(SYSDRV_DIR)/tools/board/toolkits

board-build-gdb:
ifeq ($(ENABLE_GDB),y)
    $(MAKE) -C $(SYSDRV_DIR)/tools/board/gdb;
endif
</code></pre>
<p>编译使用的工作, 在文件sysdrv/tools/board/Makefile.tools.board.mk里面</p>
<h4 id="drv">drv</h4>
<p><strong>嵌入式系统中「内核驱动（.ko 模块）」构建与部署的 Makefile 核心脚本</strong>（目标<code>drv</code>），核心逻辑是：清理旧驱动文件 → 编译并安装内核原生驱动（裁剪符号表精简体积）→ 收集所有<code>.ko</code>文件到统一目录 → 编译自定义驱动 → 最终将驱动模块分发到根文件系统源码目录</p>

<pre class="language-makefile"><code class="language-makefile">drv: prepare
    @echo -e &quot;$(C_GREEN) ==sysdrv== build drv $(C_NORMAL)&quot;
    # 清除之前的编译
    @-rm -rf $(SYSDRV_KERNEL_MOD_PATH) $(KERNEL_DIR_DRV_KO)
    # 创建输出目录
    @-mkdir -p $(SYSDRV_KERNEL_MOD_PATH)
    # modules_install：内核 Makefile 的专属目标
    # 作用是编译所有已配置的内核驱动(CONFIG_XXX=m的模块)，并安装到指定目录
    # INSTALL_MOD_STRIP=1：核心优化—— 裁剪.ko文件的符号表 / 调试信息
    # 指定驱动安装的临时目录
    $(MAKE) -C $(KERNEL_DIR) ARCH=$(ARCH) CROSS_COMPILE=$(CROSS_COMPILE) -j$(SYSDRV_JOBS) \
    	modules_install INSTALL_MOD_STRIP=1 \
    	INSTALL_MOD_PATH=$(KERNEL_DIR_DRV_KO)
    # 递归查找临时安装目录下所有.ko（内核驱动模块）文件
    # 将分散在临时目录中的驱动模块（按内核子系统分类存放，如
    # drivers/net/drivers/usb）集中到SYSDRV_KERNEL_MOD_PATH
    $(AT)find $(KERNEL_DIR_DRV_KO)/lib/modules/*/kernel \
    	-name &quot;*.ko&quot; -type f -exec cp -fav {} $(SYSDRV_KERNEL_MOD_PATH) \;
    # 如果drv_ko目录存在，则执行括号内的编译操作
    @test ! -d drv_ko || ($(MAKE) -C $(SYSDRV_DIR)/drv_ko KERNEL_DRV_KO_INSTALL_PATH=$(SYSDRV_KERNEL_MOD_PATH))
    $(call MAROC_COPY_PKG_TO_SYSDRV_OUTPUT, $(OUTPUT_ROOTFS_SOURCE_DIR), $(SYSDRV_KERNEL_MOD_PATH), SELF)
</code></pre>
<h2 id="%E8%BE%93%E5%87%BA%E6%96%87%E4%BB%B6">输出文件</h2>

<pre class="language-none"><code class="language-none">out
├── bin
│   ├── board_xxx ---------------- 运行在单板端的文件
│   └── pc ----------------------- 运行在PC服务器端的工具
├── image_xxx -------------------- 生成的烧录固件
│   ├── download.bin ------------- 烧录工具升级通讯的设备端程序，只会下载到板子内存
│   ├── env.img ------------------ 包含分区表和启动参数
│   ├── idblock.img -------------- loader镜像
│   ├── uboot.img ---------------- uboot镜像
│   ├── boot.img ----------------- kernel镜像
│   └── rootfs_base.img ---------- rootfs镜像
│
├── rootfs_xxx ------------------- 生成的根文件系统目录
└── rootfs_xxx.tar --------------- 生成的根文件系统目录的tar文件包
</code></pre>
<table>
<thead>
<tr>
  <th>env.img</th>
  <th>UBOOT 配置文件</th>
  <th>BIOS 设置（启动项、串口）</th>
  <th>256KB</th>
</tr>
</thead>
<tbody>
<tr>
  <td>idblock.img</td>
  <td>RK 芯片启动钥匙</td>
  <td>主板 BIOS 固件（底层初始化）</td>
  <td>181KB</td>
</tr>
<tr>
  <td>uboot.img</td>
  <td>第一阶段引导程序</td>
  <td>BIOS/UEFI（硬件初始化）</td>
  <td>256KB</td>
</tr>
<tr>
  <td>boot.img</td>
  <td>内核 + 设备树</td>
  <td>Windows 内核（ntoskrnl.exe）</td>
  <td>3.08MB</td>
</tr>
<tr>
  <td>oem.img</td>
  <td>厂商定制内容</td>
  <td>品牌机预装软件 / 驱动</td>
  <td>20MB</td>
</tr>
<tr>
  <td>userdata.img</td>
  <td>用户数据区</td>
  <td>我的文档 / 桌面</td>
  <td>1.875MB</td>
</tr>
<tr>
  <td>rootfs.img</td>
  <td>根文件系统（用户空间）</td>
  <td>Windows C 盘（系统文件）</td>
  <td>78MB</td>
</tr>
</tbody>
</table>
<ul>
<li>env.img</li>
</ul>
<p>存储 UBOOT 的「环境变量配置」，是 UBOOT 的 “配置文件”, UBOOT 启动时会先读取该分区，按配置执行后续流程（如加载 uboot.img、boot.img）</p>
<ul>
<li>idblock.img</li>
</ul>
<p>瑞芯微平台专属的「底层启动块」，是芯片启动的 “钥匙”, 芯片底层初始化代码（SPI NAND 控制器、DDR、时钟等硬件的最基础配置）, 签名 / 校验信息（RK 芯片启动时验证，防止非法镜像）</p>
<ul>
<li>uboot.img</li>
</ul>
<p>嵌入式系统的「第一阶段引导程序」，是连接硬件和内核的桥梁, 初始化核心硬件（DDR、串口、网口、SPI NAND 等）</p>
<ul>
<li>boot.img：内核 + 设备树镜像</li>
</ul>
<p>包含 Linux 内核(Image/zImage)+ 设备树(DTB), 部分场景含 ramdisk(内存根文件系统)</p>
<ul>
<li>oem.img：OEM 定制分区镜像</li>
</ul>
<p>存储「厂商定制化内容」，非系统核心但影响设备功能, 设备型号配置、出厂校准数据(如屏幕、摄像头参数), OEM专属驱动、应用(如厂商自研的控制程序)</p>
<ul>
<li>userdata.img：用户数据分区镜像</li>
</ul>
<p>存储「用户动态数据」，是系统运行的 “可写分区”，包含</p>
<ul>
<li>rootfs.img：根文件系统镜像</li>
</ul>

                        
                    </div>
                </div>
                <div id="previous_next">
                    <div id="previous">
                        
                        <a href="/note/Linux/瑞芯微Linux/2025-12-5-02-EchoAI代码.html">
                            <span class="icon"></span>
                            <span class="label">2025-12-5-02-EchoAI代码</span>
                        </a>
                        
                    </div>
                    <div id="next">
                        
                        <a href="/note/Linux/瑞芯微Linux/2025-12-8-04-内核.html">
                            <span class="label">2025-12-8-04-内核</span>
                            <span class="icon"></span>
                        </a>
                        
                    </div>
                </div>
                <div id="comments-container"></div>
            </div>
            <div id="toc_wrapper">
                <div id="toc">
                    <div id="toc_content">
                            
                    </div>
                </div>
            </div>
        </div>
    </div>
    <a id="to_top" href="#"></a>
    <div id="doc_footer">
        <div id="footer">
            <div id="footer_top">
                <ul>
<li><a>链接</a><ul><li><a target="_blank" href="https://teedoc.neucrack.com">网站使用 teedoc 生成</a></li>
<li><a target="_blank" href="https://neucrack.com">Copyright © 2021 Neucrack</a></li>
<li><a  href="/note/sitemap.xml">网站地图</a></li>
</ul>
</li>
<li><a>源码</a><ul><li><a target="_blank" href="https://github.com/XuSenfeng/note/">github</a></li>
<li><a target="_blank" href="https://github.com/teedoc/teedoc">本网站源文件</a></li>
</ul>
</li>
</ul>

            </div>
            <div id="footer_bottom">
                <ul>
<li><a target="_blank" href="https://beian.miit.gov.cn">渝ICP备19015320号</a></li>
<li><a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44030602004109">粤公网安备44030602004109号</a></li>
</ul>

            </div>
        </div>
    </div>
    
        <script src="/note/teedoc-plugin-markdown-parser/mermaid.min.js"></script>
    
        <script>mermaid.initialize({startOnLoad:true});</script>
    
        <script type="text/javascript">
                var transLoaded = false;
                var loading = false;
                var domain = "translate.google.com";
                var domainDefault = domain;
                var storeDomain = localStorage.getItem("googleTransDomain");
                if(storeDomain){
                    domain = storeDomain;
                    console.log("load google translate domain from local storage:" + domain);
                }
                function getUrl(domain){
                    if(domain == "/")
                        return "/static/js/google_translate/element.js?cb=googleTranslateElementInit";
                    else
                        return "https://" + domain + "/translate_a/element.js?cb=googleTranslateElementInit";
                }
                var url = getUrl(domain);
                console.log("google translate domain:" + domain + ", url: " + url);
                function googleTranslateElementInit() {
                    new google.translate.TranslateElement({pageLanguage: "auto", layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
                }
                function loadJS( url, callback ){
                    var script = document.createElement('script');
                    fn = callback || function(){ };
                    script.type = 'text/javascript';
                    if(script.readyState){
                        script.onreadystatechange = function(){
                            if( script.readyState == 'loaded' || script.readyState == 'complete' ){
                                script.onreadystatechange = null;
                                fn();
                            }
                        };
                    }else{
                        script.onload = function(){
                            fn();
                        };
                    }
                    script.src = url;
                    document.getElementsByTagName('head')[0].appendChild(script);
                }
                function removeHint(){
                    var hint = document.getElementById("loadingTranslate");
                    if(hint){
                        hint.remove();
                    }
                }
                var btn = document.getElementById("google_translate_element");
                btn.onclick = function(){
                    if(transLoaded) return;
                    if(loading){
                        var flag = confirm("loading from " + domain + ", please wait, or change domain?");
                        if(flag){
                            newDomain = prompt("domain, default: " + domainDefault + ", now: " + domain);
                            if(newDomain){
                                domain = newDomain;
                                console.log(domain);
                                url = getUrl(domain);
                                loadJS(url, function(){
                                    localStorage.setItem("googleTransDomain", domain);
                                    removeHint()
                                    transLoaded = true;
                                });
                            }
                        }
                        return;
                    }
                    btn.innerHTML = '<span id="loadingTranslate"><img class="icon" src="/note/static/image/google_translate/translate.svg"/>Loading ...</span>';
                    loading = true;
                    loadJS(url, function(){
                        localStorage.setItem("googleTransDomain", domain);
                        removeHint()
                        transLoaded = true;
                    });
                }
                </script>
            
    
        <script src="/note/static/js/theme_default/tocbot.min.js"></script>
    
        <script src="/note/static/js/theme_default/main.js"></script>
    
        <script src="/note/static/js/theme_default/viewer.min.js"></script>
    
        <script src="/note/static/css/theme_default/prism.min.js"></script>
    
        <script src="/note/static/js/search/search_main.js"></script>
    
        <script src="/note/static/js/plugin_blog/main.js"></script>
    
        <link rel="stylesheet" href="/note/static/js/add_hint/style.css" type="text/css"/>
    
        <script src="/note/static/js/add_hint/main.js"></script>
    
        <script src="/note/static/js/gitalk/gitalk.min.js"></script>
    
        <script src="/note/static/js/gitalk/main.js"></script>
    
        <script src="/note/static/js/custom.js"></script>
    
</body>

</html>