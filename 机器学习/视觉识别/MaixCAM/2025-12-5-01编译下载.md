# 编译下载

## Linux内核

下载代码

```bash
git clone https://github.com/sipeed/LicheeRV-Nano-Build --depth=1
cd LicheeRV-Nano-Build
git clone https://github.com/sophgo/host-tools --depth=1
```

编译的时候需要检查git里面的信息, 所以需要使用git, 下面是实际的导出容器使用的命令

```c
cd host/ubuntu
docker build -t licheervnano-build-ubuntu .
docker run --name licheervnano-build-ubuntu licheervnano-build-ubuntu
docker export licheervnano-build-ubuntu > licheervnano-build-ubuntu.tar
mksquashfs licheervnano-build-ubuntu.tar licheervnano-build-ubuntu.sqfs -tar
mkdir -p tmp_squashfs
# 解压 tar 包到临时目录（-C 指定解压路径）
tar -xf licheervnano-build-ubuntu.tar -C tmp_squashfs
mksquashfs tmp_squashfs licheervnano-build-ubuntu.sqfs -comp gzip
rm -rf tmp_squashfs
```

Ubuntu默认下载的singularity是不对的需要自己编译下载

```bash
# 卸载错误的singularity游戏包
sudo apt remove -y singularity
# 1. 安装依赖
sudo apt update && sudo apt install -y     build-essential libssl-dev uuid-dev libgpgme11-dev squashfs-tools libseccomp-dev wget     pkg-config git cryptsetup-bin
wget https://go.dev/dl/go1.21.9.linux-amd64.tar.gz
sudo rm -rf /usr/local/go
sudo tar -C /usr/local -xzf go1.21.9.linux-amd64.tar.gz
echo 'export PATH=$PATH:/usr/local/go/bin' >> ~/.bashrc
source ~/.bashrc
git clone https://github.com/sylabs/singularity.git
cd singularity && git checkout v3.11.4
./mconfig && cd builddir
git submodule update --init
cd singularity && git checkout v3.11.4
git checkout v3.11.4
./mconfig && cd builddir
make && sudo make install
singularity --version
cd ../../
singularity shell -e licheervnano-build-ubuntu.sqfs
```

现在进入对应的环境里面了

```bash
```



编译以后得结果

```bash
--------------->8------------------
# please use win32diskimager or dd command write it into sdcard


/home/jiao/MiaxCAM/linuxSDK/LicheeRV-Nano-Build/install/soc_sg2002_licheervnano_sd/images/2025-12-05-16-30-27b96a.img


--------------->8------------------
~/MiaxCAM/linuxSDK/LicheeRV-Nano-Build
```



