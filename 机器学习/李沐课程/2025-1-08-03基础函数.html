<!DOCTYPE html>

<html lang="zh-CN"  class="">


<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="keywords" content="">
    
    
    <meta name="description" content="">
    
    <meta name="generator" content="teedoc">
    <meta name="theme" content="teedoc-plugin-theme-default">
    
        
        <meta name="markdown-generator" content="teedoc-plugin-markdown-parser">
        
        <script>
MathJax = {"loader": {"load": ["output/svg"]}, "tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]]}, "svg": {"fontCache": "global"}};
</script>
        
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        
        <meta name="html-generator" content="teedoc-plugin-jupyter-notebook-parser">
        
        <script src="/note/static/js/theme_default/pre_main.js"></script>
        
        <link rel="stylesheet" href="/note/static/css/theme_default/prism.min.css" type="text/css"/>
        
        <link rel="stylesheet" href="/note/static/css/theme_default/viewer.min.css" type="text/css"/>
        
        <link rel="stylesheet" href="/note/static/css/theme_default/dark.css" type="text/css"/>
        
        <link rel="stylesheet" href="/note/static/css/theme_default/light.css" type="text/css"/>
        
        <script src="/note/static/js/theme_default/jquery.min.js"></script>
        
        <script src="/note/static/js/theme_default/split.js"></script>
        
        <link rel="stylesheet" href="/note/static/css/search/style.css" type="text/css"/>
        
        <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?4d52982572d5512e9762879ebf063c86";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
        
        <meta name="blog-generator" content="teedoc-plugin-blog">
        
        <link rel="stylesheet" href="/note/static/css/gitalk/gitalk.css" type="text/css"/>
        
        <link rel="stylesheet" href="/note/static/css/gitalk/custom_gitalk.css" type="text/css"/>
        
        <link rel="stylesheet" href="/note/static/css/custom.css" type="text/css"/>
        
    
    
    <title>XvSenfeng's Note</title>
    
    <script type="text/javascript">js_vars = {"teedoc-plugin-ad-hint": {"type": "hint", "label": "â˜†", "content": "è¿™æ˜¯ä¸€ä¸ªæ”¯æŒå›½é™…åŒ–çš„æ¶ˆæ¯ç¤ºä¾‹</br>å–œæ¬¢é¡¹ç›®è¯·<a target=\"_blank\" href=\"https://github.com/teedoc/teedoc\">ç‚¹ä¸‹ â˜† star </a>å“¦~ğŸ¦€ğŸ¦€", "show_times": 2, "show_after_s": 432000, "date": "2021-11-16 14:40", "color": "#a0421d", "link_color": "#e53935", "link_bg_color": "#e6ae5c", "bg_color": "#ffcf89", "color_hover": "white", "bg_color_hover": "#f57c00", "close_color": "#eab971"}}</script>
    <script type="text/javascript">metadata = {"tags": [], "date": null, "update": [], "ts": 0, "author": "", "brief": "", "cover": ""}</script>
</head>


<body class="type_doc">
    
    <div id="navbar">
        <div id="navbar_menu">
            <a class="site_title" href="/note/">
                
                    <img class="site_logo" src="/note/static/image/logo.png" alt="XvSenfeng logo">
                
                
                    <h2>XvSenfeng</h2>
                
        </a>
            <a id="navbar_menu_btn"></a>
        </div>
        <div id="navbar_items">
            <div>
                <ul id="nav_left">
<li class=""><a  href="/note/blog/">åšå®¢</a></li>
<li class=""><a  href="/note/Linux/">Linux</a></li>
<li class=""><a  href="/note/ä»£ç åˆ†æ/">ä»£ç åˆ†æ</a></li>
<li class=""><a  href="/note/ä½¿ç”¨è½¯ä»¶/">ä½¿ç”¨è½¯ä»¶</a></li>
<li class=""><a  href="/note/åµŒå…¥å¼/">åµŒå…¥å¼</a></li>
<li class=""><a  href="/note/æ‰‹æœºå®‰å“/">æ‰‹æœºå®‰å“</a></li>
<li class="active"><a  href="/note/æœºå™¨å­¦ä¹ /">æœºå™¨å­¦ä¹ </a></li>
<li class=""><a  href="/note/ç¼–ç¨‹åŸºç¡€/">ç¼–ç¨‹åŸºç¡€</a></li>
<li class=""><a  href="/note/ç½‘ç»œ/">ç½‘ç»œ</a></li>
</ul>

            </div>
            <div>
                <ul id="nav_right">
<li class=""><a target="_blank" href="https://github.com/XuSenfeng/note/">github</a></li>
</ul>

                <ul class="nav_plugins"><li><a id="google_translate_element"><img class="icon" src="/note/static/image/google_translate/translate.svg"/>Translate</a></li></ul><ul class="nav_plugins"><li><a id="themes" class="light"></a></li></ul><ul class="nav_plugins"><li><a id="search"><span class="icon"></span><span class="placeholder">æœç´¢</span>
                            <div id="search_hints">
                                <span id="search_input_hint">è¾“å…¥å…³é”®è¯ï¼Œå¤šå…³é”®è¯ç©ºæ ¼éš”å¼€</span>
                                <span id="search_loading_hint">æ­£åœ¨åŠ è½½ï¼Œè¯·ç¨å€™ã€‚ã€‚ã€‚</span>
                                <span id="search_download_err_hint">ä¸‹è½½æ–‡ä»¶å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•æˆ–æ£€æŸ¥ç½‘ç»œ</span>
                                <span id="search_other_docs_result_hint">æ¥è‡ªå…¶å®ƒæ–‡æ¡£çš„ç»“æœ</span>
                                <span id="search_curr_doc_result_hint">å½“å‰æ–‡æ¡£æœç´¢ç»“æœ</span>
                            </div></a></li></ul>
            </div>
        </div>
    </div>
    
    <div id="wrapper">
        <div id="sidebar_wrapper">
            <div id="sidebar">
                <div id="sidebar_title">
                    
                </div>
                <ul class="show">
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /2024-10-5-Transformers.html"><span class="label">2024-10-5-Transformers</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /2024-10-6-Juoyter.html"><span class="label">2024-10-6-Juoyter</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /2024-10-7-Pandasåº“.html"><span class="label">2024-10-7-Pandasåº“</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /2024-10-9-transformså®æˆ˜.html"><span class="label">2024-10-9-transformså®æˆ˜</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /2024-9-21-LLM.html"><span class="label">2024-9-21-LLM</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /2024-9-22-vLLM.html"><span class="label">2024-9-22-vLLM</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /2024-9-22-æ·±åº¦å­¦ä¹ ç¯å¢ƒ.html"><span class="label">2024-9-22-æ·±åº¦å­¦ä¹ ç¯å¢ƒ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /2024-9-23-01pytorch.html"><span class="label">2024-9-23-01pytorch</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /2024-9-8-æœºå™¨å­¦ä¹ .html"><span class="label">2024-9-8-æœºå™¨å­¦ä¹ </span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /index.html"><span class="label">README</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">rvæ¨¡å‹éƒ¨ç½²</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /rvæ¨¡å‹éƒ¨ç½²/2025-11-28-00-é©±åŠ¨ç§»æ¤.html"><span class="label">2025-11-28-00-é©±åŠ¨ç§»æ¤</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /rvæ¨¡å‹éƒ¨ç½²/2025-11-28-01-ç¯å¢ƒæ­å»º.html"><span class="label">2025-11-28-01-ç¯å¢ƒæ­å»º</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /rvæ¨¡å‹éƒ¨ç½²/2025-12-2-02-åŸºç¡€æ¦‚å¿µ.html"><span class="label">2025-12-2-02-åŸºç¡€æ¦‚å¿µ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /rvæ¨¡å‹éƒ¨ç½²/2025-12-3-03-RKNN_Toolkit2.html"><span class="label">2025-12-3-03-RKNN_Toolkit2</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /rvæ¨¡å‹éƒ¨ç½²/2025-12-3-04-RKLLM.html"><span class="label">2025-12-3-04-RKLLM</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /rvæ¨¡å‹éƒ¨ç½²/2026-2-2-05-RKNNå¼€å‘.html"><span class="label">2026-2-2-05-RKNNå¼€å‘</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">vllmä»£ç åˆ†æ</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /vllmä»£ç åˆ†æ/2024-12-31-00-æ•´ä½“æ¡†æ¶.html"><span class="label">2024-12-31-00-æ•´ä½“æ¡†æ¶</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /vllmä»£ç åˆ†æ/2024-12-31-01-collect_env.html"><span class="label">2024-12-31-01-collect_env</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">å…·èº«æ™ºèƒ½</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /å…·èº«æ™ºèƒ½/2026-2-2-åŸºç¡€æ¦‚å¿µ.html"><span class="label">2026-2-2-åŸºç¡€æ¦‚å¿µ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /å…·èº«æ™ºèƒ½/2026-2-3-02-ä»¿çœŸ.html"><span class="label">2026-2-3-02-ä»¿çœŸ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /å…·èº«æ™ºèƒ½/2026-2-3-03-å§¿æ€è§£ç®—.html"><span class="label">2026-2-3-03-å§¿æ€è§£ç®—</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /å…·èº«æ™ºèƒ½/2026-2-4-04-SO-ARM101.html"><span class="label">2026-2-4-04-SO-ARM101</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">å®é™…åº”ç”¨</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /å®é™…åº”ç”¨/2025-1-30-ollama.html"><span class="label">2025-1-30-ollama</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /å®é™…åº”ç”¨/2025-12-10-è¯­éŸ³è¯†åˆ«.html"><span class="label">2025-12-10-è¯­éŸ³è¯†åˆ«</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /å®é™…åº”ç”¨/2025-12-22-QLearning.html"><span class="label">2025-12-22-QLearning</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /å®é™…åº”ç”¨/2025-2-16-dify.html"><span class="label">2025-2-16-dify</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /å®é™…åº”ç”¨/2025-2-16-langChain.html"><span class="label">2025-2-16-langChain</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /å®é™…åº”ç”¨/2025-2-23-langchain2.html"><span class="label">2025-2-23-langchain2</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /å®é™…åº”ç”¨/2025-2-26-Loraå¾®è°ƒ.html"><span class="label">2025-2-26-Loraå¾®è°ƒ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /å®é™…åº”ç”¨/2025-3-20-COZE.html"><span class="label">2025-3-20-COZE</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /å®é™…åº”ç”¨/2025-4-2-MCP.html"><span class="label">2025-4-2-MCP</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">åµŒå…¥å¼ç§»æ¤</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /åµŒå…¥å¼ç§»æ¤/00ç»†èŠ.html"><span class="label">00ç»†èŠ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /åµŒå…¥å¼ç§»æ¤/2025-12-18-01-æ¨¡å‹é‡åŒ–.html"><span class="label">2025-12-18-01-æ¨¡å‹é‡åŒ–</span><span class=""></span></a></li>
</ul>
</li>
<li class="active_parent no_link"><a><span class="label">ææ²è¯¾ç¨‹</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/0000-0-0-00åŸºç¡€numpy.html"><span class="label">0000-0-0-00åŸºç¡€numpy</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/0000-0-0-00åŸºç¡€pandas.html"><span class="label">0000-0-0-00åŸºç¡€pandas</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2024-10-31-01.html"><span class="label">2024-10-31-01</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2024-11-03-02æ•°æ®ç±»å‹.html"><span class="label">2024-11-03-02æ•°æ®ç±»å‹</span><span class=""></span></a></li>
<li class="active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-08-03åŸºç¡€å‡½æ•°.html"><span class="label">2025-1-08-03åŸºç¡€å‡½æ•°</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-08-04æ•°æ®é›†.html"><span class="label">2025-1-08-04æ•°æ®é›†</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-08-05æ„ŸçŸ¥æœº.html"><span class="label">2025-1-08-05æ„ŸçŸ¥æœº</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-09æ¨¡å‹é€‰æ‹©.html"><span class="label">2025-1-09æ¨¡å‹é€‰æ‹©</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-10-10ä¸¢å¼ƒæ³•.html"><span class="label">2025-1-10-10ä¸¢å¼ƒæ³•</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-11-11æ•°å€¼ç¨³å®šæ€§.html"><span class="label">2025-1-11-11æ•°å€¼ç¨³å®šæ€§</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-12-12å±‚å’Œå—.html"><span class="label">2025-1-12-12å±‚å’Œå—</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-12-GPU.html"><span class="label">2025-1-12-GPU</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-12-å®æˆ˜æ¯”èµ›.html"><span class="label">2025-1-12-å®æˆ˜æ¯”èµ›</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-13-13å·ç§¯.html"><span class="label">2025-1-13-13å·ç§¯</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-13-14æ± åŒ–.html"><span class="label">2025-1-13-14æ± åŒ–</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-14-15LeNet.html"><span class="label">2025-1-14-15LeNet</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-14-16AlexNet.html"><span class="label">2025-1-14-16AlexNet</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-14-17VGG.html"><span class="label">2025-1-14-17VGG</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-14-18NiN.html"><span class="label">2025-1-14-18NiN</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-14-19GoogLeNet.html"><span class="label">2025-1-14-19GoogLeNet</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-15-20æ‰¹é‡å½’ä¸€åŒ–.html"><span class="label">2025-1-15-20æ‰¹é‡å½’ä¸€åŒ–</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-15-21æ®‹å·®ç½‘ç»œResNet.html"><span class="label">2025-1-15-21æ®‹å·®ç½‘ç»œResNet</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-16-èŠ¯ç‰‡.html"><span class="label">2025-1-16-èŠ¯ç‰‡</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-17-22æ•°æ®å¢å¹¿.html"><span class="label">2025-1-17-22æ•°æ®å¢å¹¿</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-17-23å¾®è°ƒ.html"><span class="label">2025-1-17-23å¾®è°ƒ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-18-24CIFARæ•°æ®é›†.html"><span class="label">2025-1-18-24CIFARæ•°æ®é›†</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-19-25ç›®æ ‡æ£€æµ‹.html"><span class="label">2025-1-19-25ç›®æ ‡æ£€æµ‹</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-23-26åŒºåŸŸå·ç§¯ç¥ç»ç½‘ç»œ.html"><span class="label">2025-1-23-26åŒºåŸŸå·ç§¯ç¥ç»ç½‘ç»œ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-1-27è¯­ä¹‰åˆ†å‰².html"><span class="label">2025-2-1-27è¯­ä¹‰åˆ†å‰²</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-10-33é•¿çŸ­æœŸè®°å¿†LSTM.html"><span class="label">2025-2-10-33é•¿çŸ­æœŸè®°å¿†LSTM</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-10-34æ·±åº¦å¾ªç¯ç½‘ç»œ.html"><span class="label">2025-2-10-34æ·±åº¦å¾ªç¯ç½‘ç»œ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-10-35-BPTT.html"><span class="label">2025-2-10-35-BPTT</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-10-36åŒå‘å¾ªç¯ç¥ç»ç½‘ç»œ.html"><span class="label">2025-2-10-36åŒå‘å¾ªç¯ç¥ç»ç½‘ç»œ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-11-37ç¼–ç å™¨è§£ç å™¨.html"><span class="label">2025-2-11-37ç¼–ç å™¨è§£ç å™¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-11-38seq2seq.html"><span class="label">2025-2-11-38seq2seq</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-11-39æŸæœç´¢.html"><span class="label">2025-2-11-39æŸæœç´¢</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-11-40æ³¨æ„åŠ›æœºåˆ¶.html"><span class="label">2025-2-11-40æ³¨æ„åŠ›æœºåˆ¶</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-13-41æ³¨æ„åŠ›seq2seq.html"><span class="label">2025-2-13-41æ³¨æ„åŠ›seq2seq</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-15-42è‡ªæ³¨æ„åŠ›.html"><span class="label">2025-2-15-42è‡ªæ³¨æ„åŠ›</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-15-43Transformer.html"><span class="label">2025-2-15-43Transformer</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-15-44BERT.html"><span class="label">2025-2-15-44BERT</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-5-28æ ·å¼è¿ç§».html"><span class="label">2025-2-5-28æ ·å¼è¿ç§»</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-5-29åºåˆ—æ¨¡å‹.html"><span class="label">2025-2-5-29åºåˆ—æ¨¡å‹</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-6-30æ–‡å­—å¤„ç†.html"><span class="label">2025-2-6-30æ–‡å­—å¤„ç†</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-7-31-å¾ªç¯ç¥ç»ç½‘ç»œRNN.html"><span class="label">2025-2-7-31-å¾ªç¯ç¥ç»ç½‘ç»œRNN</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-9-32-é—¨æ§å¾ªç¯å•å…ƒGRU.html"><span class="label">2025-2-9-32-é—¨æ§å¾ªç¯å•å…ƒGRU</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">è§†è§‰è¯†åˆ«</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/2025-12-12-04-ç»å…¸ç®—æ³•.html"><span class="label">2025-12-12-04-ç»å…¸ç®—æ³•</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/2025-12-12-05-YoloV1.html"><span class="label">2025-12-12-05-YoloV1</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">K230</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/K230/2026-1-1-01-SDKç¼–è¯‘.html"><span class="label">2026-1-1-01-SDKç¼–è¯‘</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/K230/2026-1-10-03-Linuxä»£ç å¼€å‘.html"><span class="label">2026-1-10-03-Linuxä»£ç å¼€å‘</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/K230/2026-1-3-02-åŸºç¡€åŸç†.html"><span class="label">2026-1-3-02-åŸºç¡€åŸç†</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">MaixCAM</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-11-02-æ¨¡å‹è®­ç»ƒ.html"><span class="label">2025-12-11-02-æ¨¡å‹è®­ç»ƒ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-11-03-å¸¸ç”¨çš„æ¨¡å‹.html"><span class="label">2025-12-11-03-å¸¸ç”¨çš„æ¨¡å‹</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-14-04-Yoloæ¨¡å‹è½¬æ¢.html"><span class="label">2025-12-14-04-Yoloæ¨¡å‹è½¬æ¢</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-14-05-MaixCDKåŸºç¡€ä½¿ç”¨.html"><span class="label">2025-12-14-05-MaixCDKåŸºç¡€ä½¿ç”¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-16-06-maixcdkå·¥å…·.html"><span class="label">2025-12-16-06-maixcdkå·¥å…·</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-17-07-ç»„ä»¶.html"><span class="label">2025-12-17-07-ç»„ä»¶</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-17-08-Cameraç¤ºä¾‹.html"><span class="label">2025-12-17-08-Cameraç¤ºä¾‹</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-17-09-APP.html"><span class="label">2025-12-17-09-APP</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-18-06-æ¨¡å‹ç›¸å…³å‚æ•°.html"><span class="label">2025-12-18-06-æ¨¡å‹ç›¸å…³å‚æ•°</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-19-07-AIç¼–è¯‘å™¨.html"><span class="label">2025-12-19-07-AIç¼–è¯‘å™¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-19-08-æ¨¡å‹å®ç°.html"><span class="label">2025-12-19-08-æ¨¡å‹å®ç°</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-20-09-MaixPyç¼–è¯‘.html"><span class="label">2025-12-20-09-MaixPyç¼–è¯‘</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-3-00-èµ„æ–™.html"><span class="label">2025-12-3-00-èµ„æ–™</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-5-01ç¼–è¯‘ä¸‹è½½.html"><span class="label">2025-12-5-01ç¼–è¯‘ä¸‹è½½</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">yolo</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/yolo/2025-12-12-02-åŸºç¡€ä½¿ç”¨.html"><span class="label">2025-12-12-02-åŸºç¡€ä½¿ç”¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/yolo/2025-12-12-03-æ•°æ®é›†.html"><span class="label">2025-12-12-03-æ•°æ®é›†</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/yolo/2025-12-12-04-é¢„æµ‹.html"><span class="label">2025-12-12-04-é¢„æµ‹</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/yolo/2025-12-13-05-è®­ç»ƒ.html"><span class="label">2025-12-13-05-è®­ç»ƒ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/yolo/2025-12-13-06-yolov5åŸºç¡€ä½¿ç”¨.html"><span class="label">2025-12-13-06-yolov5åŸºç¡€ä½¿ç”¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/yolo/2025-12-13-07-AutoDLæœåŠ¡å™¨è®­ç»ƒ.html"><span class="label">2025-12-13-07-AutoDLæœåŠ¡å™¨è®­ç»ƒ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/yolo/2025-12-13-08-yolov5æ¡†æ¶.html"><span class="label">2025-12-13-08-yolov5æ¡†æ¶</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/yolo/2025-12-13-09-ä¿®æ”¹ç½‘ç»œ.html"><span class="label">2025-12-13-09-ä¿®æ”¹ç½‘ç»œ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/yolo/2025-12-13-10-æ¨¡å‹éƒ¨ç½².html"><span class="label">2025-12-13-10-æ¨¡å‹éƒ¨ç½²</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/yolo/2025-12-4-01-yoloå®‰è£….html"><span class="label">2025-12-4-01-yoloå®‰è£…</span><span class=""></span></a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </div>
        </div>
        <div id="article">
            <div id="menu_wrapper">
                <div id="menu">
                </div>
            </div>
            <div id="content_wrapper">
                <div id="content_body">
                    <div id="article_head">
                        <div id="article_title">
                            
                            <h1></h1>
                            
                        </div>
                        <div id="article_tags">
                            <ul>
                            
                            </ul>
                        </div>
                        <div id="article_info">
                        <div id="article_info_left">
                            <span class="article_author">
                                
                            </span>
                            
                                <span class="article_date" title="æœ€åä¿®æ”¹æ—¥æœŸï¼š 2025-12-14">
                                    2025-12-14
                                </span>
                            
                        </div>
                        <div id="article_info_right">
                            
                            <div id="source_link">
                                <a href="https://github.com/XuSenfeng/note/tree/master/doc/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-08-03åŸºç¡€å‡½æ•°.md" target="_blank">
                                    ç¼–è¾‘æœ¬é¡µ
                                </a>
                            </div>
                            
                        </div>
                        </div>
                    </div>
                    <div id="article_tools">
                        <span></span>
                        <span id="toc_btn"></span>
                    </div>
                    <div id="update_history">
                        
                    </div>
                    <div id="article_content">
                        
                            <h2 id="%E7%BA%BF%E4%BB%A3">çº¿ä»£</h2>

<pre class="language-python"><code class="language-python">import torch
tensor = torch.tensor([[1, 2, 3], [4, 5, 6], [7, 8, 9]])
tensor
'''
tensor([[1, 2, 3],
        [4, 5, 6],
        [7, 8, 9]])
'''
tensor.T  #è½¬ç½®
'''
tensor([[1, 4, 7],
        [2, 5, 8],
        [3, 6, 9]])
'''
</code></pre>
<p>åœ¨ä½¿ç”¨sumè¿›è¡Œæ±‚å’Œçš„æ—¶å€™, å¯ä»¥ä½¿ç”¨axisæŒ‡å®šå®é™…æ±‚å’Œä½¿ç”¨çš„è½´, ç­‰äº0 çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯ç»´åº¦æœ€é«˜çš„è½´</p>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501071245846.png" alt="image-20250107124555762" /></p>
<p>åŒæ ·å¯ä»¥ä½¿ç”¨mean(average)å‡½æ•°è®¡ç®—å‡å€¼, ä½¿ç”¨axisæŒ‡å®šç»´åº¦</p>
<p>å¯ä»¥åœ¨è®¡ç®—çš„æ—¶å€™ä¸ä¸¢å¼ƒè¿™ä¸€ä¸ªç»´åº¦</p>

<pre class="language-python"><code class="language-python">tensor3 = tensor2.sum(axis=[1, 2], keepdim=True)  # ä¿æŒç»´åº¦
tensor3, tensor3.shape
'''
(tensor([[[ 45]],

         [[145]]]),
 torch.Size([2, 1, 1]))
'''
</code></pre>
<blockquote>
<p>ä½¿ç”¨è¿™ä¸€ä¸ªæ–¹æ¡ˆçš„æ—¶å€™, å¯ä»¥æ–¹ä¾¿çš„ä½¿ç”¨å¹¿æ’­æœºåˆ¶</p>

<pre class="language-python"><code class="language-python">tensor2 / tensor3
&quot;&quot;&quot;
tensor([[[0.0000, 0.0222, 0.0444, 0.0667, 0.0889],
         [0.1111, 0.1333, 0.1556, 0.1778, 0.2000]],

        [[0.0690, 0.0759, 0.0828, 0.0897, 0.0966],
         [0.1034, 0.1103, 0.1172, 0.1241, 0.1310]]])
&quot;&quot;&quot;
</code></pre>
</blockquote>

<pre class="language-python"><code class="language-python"># ç´¯åŠ æ±‚å’Œ
tensor, tensor.cumsum(axis=0)  # ç´¯åŠ 
(tensor([[1, 2, 3],
         [4, 5, 6],
         [7, 8, 9]]),
 tensor([[ 1,  2,  3],
         [ 5,  7,  9],
         [12, 15, 18]]))
</code></pre>

<pre class="language-python"><code class="language-python">x = torch.arange(4, dtype=torch.float32) #ç‚¹ä¹˜
y = torch.ones(4, dtype=torch.float32)
x, y, torch.dot(x, y)
&quot;&quot;&quot;
(tensor([0., 1., 2., 3.]), tensor([1., 1., 1., 1.]), tensor(6.))
&quot;&quot;&quot;
</code></pre>

<pre class="language-python"><code class="language-python">#å‘é‡ç§¯
x = torch.arange(20, dtype=torch.float32).reshape(5, 4)
y = torch.ones(4, dtype=torch.float32)
x, y, torch.mv(x, y)  # çŸ©é˜µå‘é‡ä¹˜æ³•
&quot;&quot;&quot;
(tensor([[ 0.,  1.,  2.,  3.],
         [ 4.,  5.,  6.,  7.],
         [ 8.,  9., 10., 11.],
         [12., 13., 14., 15.],
         [16., 17., 18., 19.]]),
 tensor([1., 1., 1., 1.]),
 tensor([ 6., 22., 38., 54., 70.]))
&quot;&quot;&quot;
</code></pre>

<pre class="language-python"><code class="language-python"># L2èŒƒæ•°/é•¿åº¦, å‘é‡å¹³æ–¹å’Œæ ¹å·
u = torch.tensor([1, 0, -1], dtype=torch.float32)
torch.norm(u)  # èŒƒæ•°
&quot;&quot;&quot;
tensor(1.4142)
&quot;&quot;&quot;
</code></pre>

<pre class="language-python"><code class="language-python">#L1å‡½æ•°èŒƒæ•°, ç´ æœ‰å…ƒç´ çš„ç»å¯¹å€¼æ±‚å’Œ
torch.abs(u).sum()  # L1èŒƒæ•°
&quot;&quot;&quot;
torch.abs(u).sum()  # L1èŒƒæ•°
&quot;&quot;&quot;
</code></pre>
<h2 id="%E5%A4%9A%E7%BB%B4%E7%9F%A9%E9%98%B5%E4%B9%98%E6%B3%95">å¤šç»´çŸ©é˜µä¹˜æ³•</h2>
<p>åœ¨çŸ©é˜µè¿ç®—çš„æ—¶å€™ï¼Œå…¶å®æœ€åéƒ½å¯ä»¥è½¬æˆæˆ‘ä»¬å¸¸è§çš„äºŒç»´çŸ©é˜µè¿ç®—ï¼Œéµå¾ªçš„åŸåˆ™æ˜¯ï¼šåœ¨å¤šç»´çŸ©é˜µç›¸ä¹˜ä¸­ï¼Œéœ€æœ€åä¸¤ç»´æ»¡è¶³shapeåŒ¹é…åŸåˆ™ï¼Œæœ€åä¸¤ç»´æ‰æ˜¯æœ‰æ•°æ®çš„çŸ©é˜µï¼Œå‰é¢çš„ç»´åº¦åªæ˜¯çŸ©é˜µçš„æ’åˆ—è€Œå·²</p>
<p><a href="https://zhuanlan.zhihu.com/p/337829793"  target="_blank">ã€å…¨é¢ç†è§£å¤šç»´çŸ©é˜µè¿ç®—ã€‘å¤šç»´ï¼ˆä¸‰ç»´å››ç»´ï¼‰çŸ©é˜µå‘é‡è¿ç®—-è¶…å¼ºå¯è§†åŒ– - çŸ¥ä¹</a></p>
<p>ç¤ºä¾‹:</p>

<pre class="language-python"><code class="language-python">a = 
[[[ 1.  2.  3.]
  [ 4.  5.  6.]]
 [[ 7.  8.  9.]
  [10. 11. 12.]]]

b = 
[[[ 1.  2.]
  [ 3.  4.]
  [ 5.  6.]]

 [[ 7.  8.]
  [ 9. 10.]
  [11. 12.]]]
</code></pre>
<p>ä¸Šé¢ä¸¤ä»½çŸ©é˜µè¿›è¡Œä¹˜æ³•, å®é™…è®¡ç®—çš„æ—¶å€™å…ˆè®¡ç®—å•ä¸ªçš„äºŒç»´å‘é‡, ä¹‹åäºŒç»´å‘é‡ç›¸åŠ </p>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501131051152.png" alt="image-20250113105145616" />+<img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501131052413.png" alt="image-20250113105205304" /></p>
<p>ç»“æœæ˜¯</p>

<pre class="language-python"><code class="language-python">[[[ 22.  28.]
  [ 49.  64.]]

 [[220. 244.]
  [301. 334.]]]
</code></pre>
<p>å®é™…çœ‹ç»´åº¦çš„æ—¶å€™åä¸¤ä¸ªæŒ‰ç…§äºŒç»´çš„å˜åŒ–, å‰é¢çš„å–æœ€å¤§å€¼</p>
<p><strong>å–å€¼</strong>: ä¸ä¸‰ç»´ä¹˜ä¸‰ç»´ç±»ä¼¼ï¼Œå¯ä¹˜æ¡ä»¶2æ”¹ä¸ºï¼šé™¤æœ€åä¸¤ç»´å¤–ï¼Œæ¯ä¸€ç»´çš„åˆ†é‡æ•°å¿…é¡»<strong>å¯¹åº”ç›¸ç­‰</strong>ï¼ˆæ¯ä¸ªåˆ†é‡å¯¹åº”ç›¸ä¹˜ï¼‰ æˆ– <strong>æœ‰ä¸€æ–¹ä¸º1</strong>ï¼ˆbroadcast-å¹¿æ’­æœºåˆ¶ï¼‰</p>
<h2 id="%E5%AF%BC%E6%95%B0">å¯¼æ•°</h2>
<p>æ™®é€šçš„å¯¼æ•°çš„è®¡ç®—å’Œæ•°å­¦çš„æ˜¯ä¸€æ ·çš„, ä½†æ˜¯åœ¨è®¡ç®—ä¸å¯å¾®çš„å‡½æ•°çš„æ—¶å€™, æ¯”å¦‚xçš„ç»å¯¹å€¼åœ¨ä½äº0çš„ä½ç½®çš„æ—¶å€™, é€‰å–ä¸¤ä¾§çš„æ•°æ®çš„ä¸­é—´çš„éšä¾¿ä¸€ä¸ªæ•°æ®</p>
<p>æ¢¯åº¦: å¯¹æ¯ä¸€ä¸ªå˜é‡è¿›è¡Œæ±‚å¯¼, å¸¦å…¥åæ ‡, è¿™ä¸€ä¸ªæ•°å­—å‘é‡æ˜¯å˜åŒ–æœ€å¿«çš„æ–¹å‘</p>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501071418555.png" alt="image-20250107141801446" /></p>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501071420786.png" alt="image-20250107142031708" /></p>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501071420916.png" alt="image-20250107142045847" /></p>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501071423273.png" alt="image-20250107142305152" /></p>
<h3 id="%E8%AE%A1%E7%AE%97%E5%9B%BE">è®¡ç®—å›¾</h3>
<p>æŠŠå®é™…çš„è®¡ç®—åˆ†ä¸ºå¾ˆå¤šå±‚, å¯¹æ¯ä¸€å±‚æ±‚å¯¼ç›¸ä¹˜, å®é™…çš„è®¡ç®—æ˜¯ä¸€ä¸ªæ— ç¯å›¾</p>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501071433716.png" alt="image-20250107143355624" /></p>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501071437231.png" alt="image-20250107143752147" /></p>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501071437667.png" alt="image-20250107143731575" /></p>
<blockquote>
<p>å®é™…è®¡ç®—çš„å¤æ‚åº¦éƒ½æ˜¯O(n), ä½†æ˜¯å†…å­˜çš„å¤æ‚åº¦ä¸åŒ, åå‘è®¡ç®—çš„å¤æ‚åº¦æ˜¯O(1)</p>
</blockquote>
<h3 id="%E8%87%AA%E5%8A%A8%E6%B1%82%E5%AF%BC">è‡ªåŠ¨æ±‚å¯¼</h3>
<p>å®é™…è®¡ç®—å®ä¾‹</p>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501071441378.png" alt="image-20250107144133289" /></p>
<p>è®¡ç®—ä¸Šé¢çš„å¼å­</p>

<pre class="language-python"><code class="language-python">x = torch.arange(4.0)
x.requires_grad_(True) # è®¾ç½®æ¢¯åº¦, å®é™…æ˜¯æœ‰ä¸€ä¸ªåœ°æ–¹å¯ä»¥è®°å½•æ¢¯åº¦
x.grad # é»˜è®¤çš„æ—¶å€™æ˜¯None
y = 2 * torch.dot(x, x)
y # æ¯”æ²¡æœ‰åŠ gradçš„æ—¶å€™å¤šäº†ä¸€ä¸ªå‡½æ•°
&quot;&quot;&quot;
tensor(28., grad_fn=&lt;MulBackward0&gt;)
&quot;&quot;&quot;
</code></pre>

<pre class="language-python"><code class="language-python">y.backward()  # è®¡ç®—æ¢¯åº¦
x.grad # æ¢¯åº¦, è¿™é‡Œçš„æ¢¯åº¦æ˜¯yå¯¹xçš„æ¢¯åº¦, y = 4 * x1 , 4 * x2 , 4 * x3 , 4 * x4
&quot;&quot;&quot;
tensor([ 0.,  4.,  8., 12.])
&quot;&quot;&quot;
</code></pre>
<blockquote>
<p>é»˜è®¤çš„æ—¶å€™è¿™ä¸€ä¸ªä¸æ¸…é›¶, è®¡ç®—ä¸‹ä¸€ä¸ªä¹‹å‰éœ€è¦æŠŠç»“æœæ¸…é›¶</p>
</blockquote>

<pre class="language-python"><code class="language-python">x.grad.zero_()  # æ¢¯åº¦æ¸…é›¶
y = x.sum()
y.backward()
x.grad
&quot;&quot;&quot;
tensor([1., 1., 1., 1.])
&quot;&quot;&quot;
</code></pre>
<blockquote>
<p>åœ¨æ·±åº¦å­¦ä¹ é‡Œé¢, ä¸æ˜¯ä¸ºäº†è®¡ç®—å¾®åˆ†çŸ©é˜µ, è€Œæ˜¯ä¸ºäº†æ‰¹é‡è®¡ç®—æ¯ä¸€ä¸ªæ ·æœ¬çš„å•ç‹¬è®¡ç®—çš„åå¯¼æ•°ä¹‹å’Œ</p>
</blockquote>

<pre class="language-python"><code class="language-python">x.grad.zero_()
y = x * x
y.sum().backward()
x.grad
&quot;&quot;&quot;
tensor([0., 2., 4., 6.])
&quot;&quot;&quot;
</code></pre>
<p>å¯ä»¥å®ç°æŠŠæŸäº›è®¡ç®—ç§»åŠ¨åˆ°è®¡ç®—å›¾å¤–é¢</p>

<pre class="language-python"><code class="language-python">x.grad.zero_()
y = x * x
u = y.detach()  # åˆ†ç¦»å‡ºæ¥, ä¸éœ€è¦æ¢¯åº¦ u = x * x
z = u * x
z.sum().backward()
x.grad, x.grad == u
&quot;&quot;&quot;
(tensor([0., 1., 4., 9.]), tensor([True, True, True, True]))
&quot;&quot;&quot;
</code></pre>
<p>å®é™…è¿™ä¸€ä¸ªå›¾çš„æ„å»ºå¯ä»¥ç»è¿‡å‡½æ•°ä»¥åŠå¾ªç¯</p>

<pre class="language-python"><code class="language-python">def f(a):
    b = a * 2
    while b.norm() &lt; 1000: # èŒƒæ•°
        b = b * 2
    if b.sum() &gt; 0:
        c = b
    else:
        c = 100 * b
    return c

a = torch.randn(size=(), requires_grad=True)
d = f(a)
d.backward()
a.grad == d / a
&quot;&quot;&quot;
tensor(True)
&quot;&quot;&quot;

</code></pre>
<h2 id="%E7%BA%BF%E6%80%A7%E6%A8%A1%E5%9E%8B">çº¿æ€§æ¨¡å‹</h2>
<p>ç»™å®šä¸€ä¸ªnç»´çš„è¾“å…¥, x = [x1, x2, x3, ...]<sup>T</sup></p>
<p>è¿™ä¸€ä¸ªæ¨¡å‹æœ‰ä¸€ä¸ªnç»´åº¦æƒé‡ä»¥åŠä¸€ä¸ªæ ‡å‡†çš„åå·®, è¾“å‡ºæ˜¯ä¸€ä¸ªåŠ æƒçš„æ±‚å’Œå‡½æ•°</p>
<p>çº¿æ€§æ¨¡å¼å¯ä»¥æ˜¯å•å±‚çš„ç¥ç»ç½‘ç»œæ¨¡å‹</p>
<blockquote>
<p>é¢„ä¼°çš„æ•°æ®éœ€è¦é¢„æµ‹ä¸€ä¸‹æ•°æ®çš„è´¨é‡, å¯ä»¥ä½¿ç”¨å¹³æ–¹æŸå¤±</p>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501071549901.png" alt="image-20250107154914804" /></p>
</blockquote>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501071552868.png" alt="image-20250107155230777" /></p>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501071553834.png" alt="image-20250107155301749" /></p>
<blockquote>
<p>é€šè¿‡è°ƒæ•´å‚æ•°ä½¿å¾—æ‹Ÿåˆçš„ç¨‹åº¦æœ€é«˜</p>
<p><strong>æ³¨: </strong>è¿™é‡Œçš„wåœ¨åˆå§‹åŒ–çš„æ—¶å€™ä¸è¦è®¾ç½®ä¸ºä¸€æ ·çš„, å¦åˆ™æ¢¯åº¦ç›¸åŒä¼šå¯¼è‡´å®é™…ä¸ªæ›´æ–°ä¹Ÿæ˜¯ç›¸åŒçš„</p>
</blockquote>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501071555375.png" alt="image-20250107155507277" /></p>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501071555747.png" alt="image-20250107155518653" /></p>
<h3 id="%E4%BC%98%E5%8C%96%E6%96%B9%E6%B3%95">ä¼˜åŒ–æ–¹æ³•</h3>
<h4 id="%E6%A2%AF%E5%BA%A6%E4%B8%8B%E9%99%8D">æ¢¯åº¦ä¸‹é™</h4>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501071559294.png" alt="image-20250107155925193" /></p>
<p>è¿™ä¸€ä¸ªä½¿ç”¨çš„æ—¶å€™ä¸€èˆ¬æ˜¯ä¸€ä¸ªå°æ‰¹é‡çš„, åœ¨æ•´ä¸ªæ•°æ®é›†å¤„ç†å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿç”šè‡³å‡ ä¸ªå°æ—¶, æˆ‘ä»¬å¯ä»¥é€‰å–å…¶ä¸­ä¸€ä¸ªæ ·æœ¬æ¥è¿›è¡Œè®¡ç®—, æ ·æœ¬çš„å¤§å°æ˜¯å¾ˆé‡è¦çš„å‚æ•°(æ‰¹é‡å¤§å°)</p>
<h3 id="%E5%AE%9E%E9%99%85%E5%AE%9E%E7%8E%B0">å®é™…å®ç°</h3>
<p>ä½¿ç”¨w = [2, -3, 4]å’Œb = 4.2ä»¥åŠå™ªå£°æ„å»ºä¸€ä¸ªæ•°æ®é›†</p>
<ul>
<li>å¯¼å…¥å„ç§åŒ…</li>
</ul>

<pre class="language-python"><code class="language-python">%matplotlib inline
import torch
import random
from d2l import torch as d2l
</code></pre>
<ul>
<li>å»ºç«‹æ•°æ®é›†, xæ˜¯ä¸€ä¸ªæ ‡å‡†çš„æ­£æ€åˆ†å¸ƒ, yæ˜¯æ¯ä¸€ä¸ªxå®é™…çš„yåšçš„ä¸€ä¸ªæ ‡å‡†å·®ä¸º0.01çš„æ­£æ€åˆ†å¸ƒ</li>
</ul>

<pre class="language-python"><code class="language-python"># ä½¿ç”¨æƒé‡ä»¥åŠåç½®å»ºç«‹ä¸€ä¸ªæ•°æ®é›†
def synthetic_data(w, b, num_examples):
    &quot;&quot;&quot;Generate y = Xw + b + noise.&quot;&quot;&quot;
    # å‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º1çš„éšæœºæ•°, ç”Ÿæˆnum_examplesè¡Œï¼Œlen(w)åˆ—çš„çŸ©é˜µ
    X = torch.normal(0, 1, (num_examples, len(w))) 
    y = torch.matmul(X, w) + b  # çŸ©é˜µä¹˜æ³•, è·å–æ­£ç¡®çš„ç»“æœ
    y += torch.normal(0, 0.01, y.shape) # åŠ ä¸Šå™ªå£°
    return X, y.reshape((-1, 1))   # yå˜æˆåˆ—å‘é‡

true_w = torch.tensor([2, -3.4])  # è®°å½•ä¸€ä¸‹å®é™…çš„ç»“æœ
true_b = 4.2					# å¦ä¸€ä¸ªç»“æœ
features, labels = synthetic_data(true_w, true_b, 1000) #è·å–å®é™…çš„æ•°æ®
</code></pre>
<ul>
<li>ä½¿ç”¨å›¾å½¢åŒ–ç•Œé¢çœ‹ä¸€ä¸‹ç»“æœ</li>
</ul>

<pre class="language-python"><code class="language-python">d2l.set_figsize()   # è®¾ç½®å›¾çš„å°ºå¯¸, 3.5*2.5
d2l.plt.scatter(features[:, 1].detach().numpy(), labels.detach().numpy(), 1) # ç”»æ•£ç‚¹å›¾
</code></pre>
<blockquote>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501081234205.png" alt="image-20250108123403113" /></p>
</blockquote>
<ul>
<li>ç”±äºæ•°æ®çš„æ•°é‡æ¯”è¾ƒå¤§, æ‰€ä»¥æ¯ä¸€æ¬¡åªéšæœºå–å‡ºæ¥ä¸€éƒ¨åˆ†</li>
</ul>

<pre class="language-python"><code class="language-python"># è¯»å–æ•°æ®, bach_size: æ‰¹é‡å¤§å°, features: ç‰¹å¾, labels: æ ‡ç­¾
# é¦–å…ˆå»ºç«‹ä»¥åŠéšæœºçš„ç´¢å¼•åˆ—è¡¨, ç„¶åæ¯æ¬¡å–å‡ºbatch_sizeä¸ªæ ·æœ¬
def data_iter(batch_size, features, labels):
    num_examples = len(features) # æ ·æœ¬æ•°
    indices = list(range(num_examples)) # ç”Ÿæˆä¸€ä¸ªæ ·æœ¬æ•°çš„åˆ—è¡¨, rangeç”¨äºç”Ÿæˆä¸€ä¸ªæ•°åˆ—
    random.shuffle(indices)  # éšæœºæ‰“ä¹±
    for i in range(0, num_examples, batch_size): # æ¯æ¬¡å–batch_sizeä¸ªæ ·æœ¬
        batch_indices = torch.tensor(indices[i:min(i + batch_size, num_examples)])
        yield features[batch_indices], labels[batch_indices]

bach_size = 10
for X, y in data_iter(bach_size, features, labels):
    print(X, '\n', y)
    break
</code></pre>
<ul>
<li>å»ºç«‹åˆå§‹çš„æ•°æ®</li>
</ul>

<pre class="language-python"><code class="language-python"># éšæœºåˆå§‹åŒ–w, requires_grad=Trueè¡¨ç¤ºéœ€è¦æ±‚æ¢¯åº¦
w = torch.normal(0, 0.01, size=(2, 1), requires_grad=True)
# åˆå§‹åŒ–bä¸º0, requires_grad=Trueè¡¨ç¤ºéœ€è¦æ±‚æ¢¯åº¦
b = torch.zeros(1, requires_grad=True)
</code></pre>
<ul>
<li>å»ºç«‹è®¡ç®—çš„å‡½æ•°, ä½¿ç”¨ç°åœ¨çš„æ•°æ®è®¡ç®—å‡ºä¸€ä¸ªç»“æœ</li>
</ul>

<pre class="language-python"><code class="language-python">def linreg(X, w, b):  # çº¿æ€§å›å½’æ¨¡å‹
    return torch.matmul(X, w) + b
</code></pre>
<ul>
<li>ä½¿ç”¨è·å–çš„ç»“æœç®—ä¸€ä¸‹å®é™…çš„åå·®, ä¹‹åéœ€è¦ä½¿ç”¨è®¡ç®—çš„æ–¹æ³•ä½¿è¿™ä¸€ä¸ªå€¼ä¸‹é™</li>
</ul>

<pre class="language-python"><code class="language-python">def squared_loss(y_hat, y):  # æŸå¤±å‡½æ•°, è¿”å›çš„æ˜¯å‘é‡
    return (y_hat - y.reshape(y_hat.shape)) ** 2 / 2
</code></pre>
<ul>
<li>ä½¿ç”¨è·å–çš„æ¢¯åº¦è¿›è¡Œä¸€æ¬¡æ•°æ®çš„ä¼˜åŒ–è¿­ä»£, è¿™é‡Œçš„æ¢¯åº¦é™¤ä»¥nå¯ä»¥ä½¿å¾—æ­¥é•¿ä¸ä¼šå—æ•°æ®å¤§å°çš„å½±å“</li>
</ul>

<pre class="language-python"><code class="language-python"># ä¼˜åŒ–ç®—æ³•, params: å‚æ•°, lr: å­¦ä¹ ç‡, batch_size: æ‰¹é‡å¤§å°
def sgd(params, lr, batch_size):  
    with torch.no_grad(): # ä¸éœ€è¦è®¡ç®—æ¢¯åº¦
        for param in params:
            # æ›´æ–°å‚æ•°, æ¯ä¸€ä¸ªå‚æ•°éƒ½éœ€è¦å‡å»æ¢¯åº¦çš„å¹³å‡å€¼
            param -= lr * param.grad / batch_size
            param.grad.zero_()      # æ¢¯åº¦æ¸…é›¶
</code></pre>
<ul>
<li>å®é™…çš„è®­ç»ƒ</li>
</ul>

<pre class="language-python"><code class="language-python">lr = 0.01
num_epochs = 10 # è¿­ä»£æ¬¡æ•°
net = linreg # ç½‘ç»œ
loss = squared_loss # æŸå¤±å‡½æ•°

for epoch in range(num_epochs):
    for X, y in data_iter(bach_size, features, labels):
        l = loss(net(X, w, b), y)  # è®¡ç®—æŸå¤±
        l.sum().backward()  # æ±‚æ¢¯åº¦, ä½¿å¾—lå˜æˆæ ‡é‡
        sgd([w, b], lr, bach_size)  # æ›´æ–°å‚æ•°
    with torch.no_grad():
        train_l = loss(net(features, w, b), labels)
        print(f'epoch {epoch + 1}, loss {float(train_l.mean()):f}')
</code></pre>
<ul>
<li>çœ‹ä¸€ä¸‹è¯¯å·®</li>
</ul>

<pre class="language-python"><code class="language-python">print(f'wçš„ä¼°è®¡è¯¯å·®: {true_w - w.reshape(true_w.shape)}')
print(f'bçš„ä¼°è®¡è¯¯å·®: {true_b - b}')
</code></pre>
<h3 id="%E5%AE%9E%E9%99%85%E5%AE%9E%E7%8E%B0">å®é™…å®ç°</h3>
<ul>
<li>å¯¼å…¥å„ç§æ•°æ®åŒ…</li>
</ul>

<pre class="language-python"><code class="language-python">import numpy as np
import torch
from torch.utils import data
from d2l import torch as d2l
</code></pre>
<ul>
<li>è·å–ä¸€ä¸ªæ•°æ®é›†</li>
</ul>

<pre class="language-python"><code class="language-python">true_w = torch.tensor([2, -3.4])
true_b = 4.2
features, labels = d2l.synthetic_data(true_w, true_b, 1000)
</code></pre>
<ul>
<li>ä½¿ç”¨æ•°æ®å»ºç«‹ä¸€ä¸ªæ•°æ®è¿­ä»£å™¨</li>
</ul>

<pre class="language-python"><code class="language-python">def load_array(data_arrays, batch_size, is_train=True):
    dataset = data.TensorDataset(*data_arrays) # è·å–æ•°æ®é›†
     # è¿”å›æ•°æ®è¿­ä»£å™¨, shuffle=Trueè¡¨ç¤ºæ‰“ä¹±æ•°æ®
    return data.DataLoader(dataset, batch_size, shuffle=is_train)

batch_size = 10
data_iter = load_array((features, labels), batch_size)

next(iter(data_iter))
</code></pre>
<ul>
<li>å»ºç«‹ä¸€ä¸ªçº¿æ€§å±‚</li>
</ul>

<pre class="language-python"><code class="language-python">from torch import nn
# 2ä¸ªè¾“å…¥ï¼Œ1ä¸ªè¾“å‡º, çº¿æ€§å›å½’æ¨¡å‹, sequentialæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå¯ä»¥å°†å¤šä¸ªå±‚ä¸²è”èµ·æ¥
net = nn.Sequential(nn.Linear(2, 1)) 
</code></pre>
<ul>
<li>è®¾ç½®ä¸€ä¸‹åˆå§‹å‚æ•°</li>
</ul>

<pre class="language-python"><code class="language-python">net[0].weight.data.normal_(0, 0.01) # åˆå§‹åŒ–æƒé‡
net[0].bias.data.fill_(0) # åˆå§‹åŒ–åç½®
</code></pre>
<ul>
<li>æŸå¤±å‡½æ•°å’Œä¼˜åŒ–å™¨</li>
</ul>

<pre class="language-python"><code class="language-python">loss = nn.MSELoss() # å‡æ–¹è¯¯å·®æŸå¤±å‡½æ•°
# éšæœºæ¢¯åº¦ä¸‹é™ä¼˜åŒ–å™¨
trainer = torch.optim.SGD(net.parameters(), lr=0.03) 
</code></pre>
<blockquote>
<p>è¿˜æœ‰å‚æ•°momentumæ˜¯åœ¨ä¼˜åŒ–ç®—æ³•ä¸­çš„ä¸€ç§åŠ é€Ÿå› å­ï¼Œç”¨äºåŠ é€Ÿæ¢¯åº¦ä¸‹é™çš„æ”¶æ•›è¿‡ç¨‹ã€‚å…·ä½“æ¥è¯´ï¼Œå½“æ¢¯åº¦æ–¹å‘ä¿æŒä¸å˜çš„æ—¶å€™ï¼Œåˆ©ç”¨momentumå¯ä»¥åŠ é€Ÿå‚æ•°çš„æ›´æ–°ï¼›å½“æ¢¯åº¦æ–¹å‘å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œåˆ©ç”¨momentumå¯ä»¥å‡å°æ›´æ–°çš„å¹…åº¦ï¼Œé¿å…å‚æ•°åœ¨å±€éƒ¨æå°å€¼ç‚¹é™„è¿‘éœ‡è¡ã€‚</p>
<p>åœ¨SGDä¼˜åŒ–ç®—æ³•ä¸­ï¼Œmomentumå‚æ•°é€šå¸¸è®¾ç½®ä¸ºä¸€ä¸ªä»‹äº0åˆ°1ä¹‹é—´çš„å€¼ï¼Œä¾‹å¦‚0.9ã€‚è¿™æ„å‘³ç€æ¯æ¬¡å‚æ•°æ›´æ–°æ—¶ï¼Œä¸Šä¸€æ¬¡æ›´æ–°çš„æ–¹å‘å’Œå¤§å°å°†ä»¥0.9çš„æ¯”ä¾‹è¢«ä¿ç•™ï¼Œå¹¶ä¸å½“å‰çš„æ¢¯åº¦ä¸€èµ·è®¡ç®—æ–°çš„æ›´æ–°æ–¹å‘å’Œå¤§å°ã€‚è¿™æ ·å¯ä»¥åœ¨æœ€ç»ˆæ”¶æ•›æ—¶æŠ‘åˆ¶éœ‡è¡ï¼ŒåŠ é€Ÿæ”¶æ•›é€Ÿåº¦ã€‚</p>
</blockquote>
<ul>
<li>å®é™…è®­ç»ƒ</li>
</ul>

<pre class="language-python"><code class="language-python">num_epochs = 3
for epoch in range(num_epochs):
    for X, y in data_iter: # è·å–å°æ‰¹é‡æ•°æ®
        l = loss(net(X), y)
        trainer.zero_grad() # æ¢¯åº¦æ¸…é›¶
        l.backward() # è®¡ç®—æ¢¯åº¦
        trainer.step() # æ›´æ–°å‚æ•°
    l = loss(net(features), labels)
    print(f'epoch {epoch + 1}, loss {l:f}')
</code></pre>
<h2 id="%E5%88%86%E7%B1%BB%E5%92%8C%E5%9B%9E%E5%BD%92">åˆ†ç±»å’Œå›å½’</h2>
<p>å›å½’æ˜¯ä¸€ä¸ªè¿ç»­å€¼, åˆ†ç±»æ˜¯ä¸€ä¸ªç¦»æ•£çš„ç±»åˆ«, å¯ä»¥å®ç°æ–‡å­—è¯„è®º, æ‰‹å†™æ•°å­—</p>
<p>å›å½’: æ˜¯ä¸€ä¸ªå•è¿ç»­çš„æ•°å€¼è¾“å‡º, åœ¨è‡ªç„¶åŒºé—´R, å’ŒçœŸå®çš„æ•°å­—ä¹‹é—´çš„åŒºåˆ«ä½œä¸ºæŸå¤±</p>
<p>åˆ†ç±»: é€šå¸¸æœ‰å¤šä¸ªè¾“å‡º, è¾“å‡ºçš„ç¬¬iä¸ªæ˜¯ç¬¬iç±»çš„å¯ä¿¡åº¦, å®é™…çš„ç»“æœæ˜¯y<sub>i</sub> = 1 æˆ– = 0, é¢„æµ‹ç»“æœæ˜¯è¾“å‡ºçš„æœ€å¤§å€¼, åŒæ—¶è¿™ä¸€ä¸ªæ•°å€¼æœ€å¥½å¯ä»¥å¤§äºå…¶ä»–çš„è¾“å‡ºä¸€ä¸ªé˜ˆå€¼</p>
<h3 id="Softmax%E5%9B%9E%E5%BD%92%E4%BB%A5%E5%8F%8A%E4%BA%A4%E5%8F%89%E7%86%B5">Softmaxå›å½’ä»¥åŠäº¤å‰ç†µ</h3>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501081359202.png" alt="image-20250108135945070" /></p>
<p>ä½¿ç”¨æŒ‡æ•°å¯ä»¥ä½¿å¾—æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯ä¸€ä¸ªéè´Ÿçš„å€¼, åŒæ—¶æ‰€æœ‰çš„æ•°å­—çš„å’Œä¸º1, å¯ä»¥ä½œä¸ºæ¦‚ç‡</p>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501081402079.png" alt="image-20250108140258973" /></p>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501081403791.png" alt="image-20250108140321684" /></p>
<blockquote>
<p>æŸå¤±è®¡ç®—çš„æ—¶å€™, ç”±äºçœŸå®åªæœ‰ä¸€ä¸ªæ•°æ®çš„è¾“å‡º, æ¦‚ç‡ä¸º1, æ‰€ä»¥å®é™…è®¡ç®—çš„æ—¶å€™åªæœ‰ä¸€é¡¹, å¦‚æœå®Œå…¨é¢„æµ‹åˆ°ç»“æœ, log1=0</p>
</blockquote>
<h3 id="%E5%AE%9E%E9%99%85%E5%AE%9E%E7%8E%B0">å®é™…å®ç°</h3>

<pre class="language-python"><code class="language-python">import torch
from IPython import display
from d2l import torch as d2l

batch_size = 256
# è¿™ä¸€ä¸ªå‡½æ•°åœ¨æ•°æ®é›†æ–‡ä»¶é‡Œé¢å®ç°è¿‡äº†
train_iter, test_iter = d2l.load_data_fashion_mnist(batch_size) 
</code></pre>

<pre class="language-python"><code class="language-python">num_input = 784 # 28 * 28çš„å›¾åƒ
num_output = 10 # 10ä¸ªç±»åˆ«
# åˆå§‹åŒ–å‚æ•°
W = torch.normal(0, 0.01, size=(num_input, num_output), requires_grad=True)
b = torch.zeros(num_output, requires_grad=True)
</code></pre>
<ul>
<li>è®¡ç®—ä¸€ä¸‹softmaxçš„é¢‘ç‡</li>
</ul>

<pre class="language-python"><code class="language-python">def softmax(X):
    X_exp = torch.exp(X) # è¿™é‡Œæ˜¯å¯¹æ¯ä¸€ä¸ªå…ƒç´ æ±‚æŒ‡æ•° e^x
    # è¿™é‡Œæ˜¯å¯¹æ¯ä¸€è¡Œæ±‚å’Œ, è·å–åˆ†æ¯
    partition = X_exp.sum(1, keepdim=True) 
    return X_exp / partition # è¿™é‡Œåº”ç”¨äº†å¹¿æ’­æœºåˆ¶
</code></pre>
<ul>
<li>è®¡ç®—ä¸€è½®çš„ç»“æœ</li>
</ul>

<pre class="language-python"><code class="language-python">def net(X):
    # è¿™é‡Œçš„reshapeæ˜¯ä¸ºäº†å°†å›¾åƒå±•å¹³, ä¹‹åå†è¿›è¡ŒçŸ©é˜µä¹˜æ³•, 
    # ä¹‹åå†åŠ ä¸Šåç½®, æœ€åå†è¿›è¡Œsoftmax
    return softmax(torch.matmul(X.reshape((-1, W.shape[0])), W) + b) 
</code></pre>
<ul>
<li>å»ºç«‹ä¸€ä¸ªç±»ç´¯åŠ å™¨, ä¼šå¯¹ä¹ˆä¸€æ¬¡ä¼ è¿›æ¥çš„æ•°æ®è¿›è¡Œè®°å½•</li>
</ul>

<pre class="language-python"><code class="language-python">class Accumulator:  #@save
    &quot;&quot;&quot;For accumulating sums over `n` variables.&quot;&quot;&quot;
    def __init__(self, n):
        self.data = [0.0] * n

    def add(self, *args):
        self.data = [a + float(b) for a, b in zip(self.data, args)]# è¿™é‡Œæ˜¯å°†ä¸¤ä¸ªlistå¯¹åº”å…ƒç´ ç›¸åŠ 

    def reset(self):
        self.data = [0.0] * len(self.data)

    def __getitem__(self, idx):# è¿™ä¸ªå‡½æ•°æ˜¯ä¸ºäº†èƒ½å¤Ÿé€šè¿‡ä¸‹æ ‡è®¿é—®æ•°æ®
        return self.data[idx]
</code></pre>
<ul>
<li>è®¡ç®—äº¤å‰ç†µ</li>
</ul>

<pre class="language-python"><code class="language-python"># è¿™ä¸ªå‡½æ•°æ˜¯ç”¨æ¥è¯„ä¼°æ¨¡å‹çš„æŸå¤±
def cross_entropy(y_hat, y):
    # è¿™é‡Œçš„range(len(y_hat))æ˜¯ä¸ºäº†å–å‡ºæ¯ä¸€è¡Œçš„å¯¹åº”çš„å€¼, 
    # æ˜¯å®é™…çš„æ•°æ®å¯¹åº”çš„æ¦‚ç‡
    return -torch.log(y_hat[range(len(y_hat)), y]) 
</code></pre>
<ul>
<li>ä½¿ç”¨é¢„æµ‹çš„ç»“æœä»¥åŠå®é™…çš„ç»“æœè®¡ç®—ä¸€ä¸‹æ­£ç¡®çš„ä¸ªæ•°</li>
</ul>

<pre class="language-python"><code class="language-python"># è¿™ä¸ªå‡½æ•°æ˜¯ç”¨æ¥è¯„ä¼°æ¨¡å‹çš„æŸå¤±, è¿”å›çš„æ˜¯æˆåŠŸçš„ä¸ªæ•°
# y_hatæ˜¯é¢„æµ‹çš„æ¦‚ç‡, yæ˜¯å®é™…çš„æ•°æ®
def accuracy(y_hat, y):
    # è¿™é‡Œçš„argmax(1)æ˜¯å–å‡ºæ¯ä¸€è¡Œæœ€å¤§çš„å€¼çš„ç´¢å¼•, è¿™ä¸ªç´¢å¼•å°±æ˜¯é¢„æµ‹çš„ç±»åˆ«
    if len(y_hat.shape) &gt; 1 and y_hat.shape[1] &gt; 1:
        y_hat = y_hat.argmax(axis=1)
    cmp = y_hat.type(y.dtype) == y # è·å–ä¸€ä¸ªboolç±»å‹çš„tensor
    # å°†boolç±»å‹çš„tensorè½¬æ¢ä¸ºfloatç±»å‹çš„tensor
    # ç„¶åæ±‚å’Œ, è·å–æ­£ç¡®çš„æ•°é‡
    return float(cmp.type(y.dtype).sum()) 
</code></pre>
<ul>
<li>è®¡ç®—ä¸€ä¸‹æ­£ç¡®ç‡</li>
</ul>

<pre class="language-python"><code class="language-python"># è¿™ä¸ªå‡½æ•°æ˜¯ç”¨æ¥è¯„ä¼°æ¨¡å‹çš„å‡†ç¡®ç‡
# netæ˜¯æ¨¡å‹, data_iteræ˜¯æ•°æ®é›†
def evaluate_accuracy(net, data_iter):
    if isinstance(net, torch.nn.Module):
        net.eval()
    metric = Accumulator(2) # è¿™é‡Œçš„2æ˜¯å› ä¸ºæ­£ç¡®çš„æ•°é‡å’Œæ€»çš„æ•°é‡
    for X, y in data_iter:
        # y.numel()æ˜¯è·å–yçš„å…ƒç´ æ•°é‡
        metric.add(accuracy(net(X), y), y.numel())   
    return metric[0] / metric[1] # è¿”å›æ­£ç¡®çš„æ•°é‡é™¤ä»¥æ€»çš„æ•°é‡
</code></pre>
<ul>
<li>å»ºç«‹å®é™…çš„è®­ç»ƒä¸€æ¬¡çš„å‡½æ•°ï¼Œ å¯ä»¥å…¼å®¹ä½¿ç”¨torchçš„æ¨¡å¼</li>
</ul>

<pre class="language-python"><code class="language-python"># è¿™é‡Œæ˜¯è®­ç»ƒå‡½æ•°, è¿™é‡Œçš„updateræ˜¯ä¸€ä¸ªå‡½æ•°, è¿™ä¸ªå‡½æ•°æ˜¯ç”¨æ¥æ›´æ–°å‚æ•°çš„
def train_epoch_ch3(net, train_iter, loss, updater):  #@save
    if isinstance(net, torch.nn.Module): # è¿™é‡Œæ˜¯ä¸ºäº†åˆ¤æ–­netæ˜¯ä¸æ˜¯torch.nn.Moduleçš„å­ç±»
        net.train()
    metric = Accumulator(3)  # è®­ç»ƒæŸå¤±æ€»å’Œ, è®­ç»ƒå‡†ç¡®åº¦æ€»å’Œ, æ ·æœ¬æ•°
    for X, y in train_iter:
        y_hat = net(X)
        l = loss(y_hat, y) # è®¡ç®—æŸå¤±, è¿™é‡Œä½¿ç”¨äº¤å‰ç†µæŸå¤±
        if isinstance(updater, torch.optim.Optimizer):
            updater.zero_grad()
            l.backward()
            updater.step()
            metric.add(float(l) * len(y), accuracy(y_hat, y), y.numel())
        else:
            l.sum().backward() # è¿™é‡Œæ˜¯æ±‚å’Œ
            updater(X.shape[0]) # ä½¿ç”¨çš„æ˜¯ä¹‹å‰å†™çš„æ¢¯åº¦ä¸‹é™
            metric.add(float(l.sum()), accuracy(y_hat, y), y.numel())
    # è¿”å›æŸå¤±å’Œå‡†ç¡®åº¦
    return metric[0] / metric[2], metric[1] / metric[2] 
</code></pre>
<ul>
<li>å»ºç«‹ä¸€ä¸ªæ˜¾ç¤ºå›¾åƒçš„ç±»</li>
</ul>

<pre class="language-python"><code class="language-python">class Animator:  #@save
    &quot;&quot;&quot;For plotting data in animation.&quot;&quot;&quot;
    def __init__(self, xlabel=None, ylabel=None, legend=None, xlim=None,
                 ylim=None, xscale='linear', yscale='linear',
                 fmts=('-', 'm--', 'g-.', 'r:'), nrows=1, ncols=1,
                 figsize=(3.5, 2.5)):
        # Incrementally plot multiple lines
        if legend is None:
            legend = []
        d2l.use_svg_display()
        self.fig, self.axes = d2l.plt.subplots(nrows, ncols, figsize=figsize)
        if nrows * ncols == 1:
            self.axes = [self.axes,]
        # Use a lambda function to capture arguments
        self.config_axes = lambda: d2l.set_axes(self.axes[
            0], xlabel, ylabel, xlim, ylim, xscale, yscale, legend)
        self.X, self.Y, self.fmts = None, None, fmts

    def add(self, x, y):
        # Add multiple data points into the figure
        if not hasattr(y, &quot;__len__&quot;):
            y = [y]
        n = len(y)
        if not hasattr(x, &quot;__len__&quot;):
            x = [x] * n
        if not self.X:
            self.X = [[] for _ in range(n)]
        if not self.Y:
            self.Y = [[] for _ in range(n)]
        for i, (a, b) in enumerate(zip(x, y)):
            if a is not None and b is not None:
                self.X[i].append(a)
                self.Y[i].append(b)
        self.axes[0].cla()
        for x, y, fmt in zip(self.X, self.Y, self.fmts):
            self.axes[0].plot(x, y, fmt)
        self.config_axes()
        display.display(self.fig)
        display.clear_output(wait=True)
</code></pre>
<ul>
<li>å»ºç«‹è®­ç»ƒå‡½æ•°</li>
</ul>

<pre class="language-python"><code class="language-python"># è¿™ä¸ªå‡½æ•°æ˜¯ä¸ºäº†è®­ç»ƒæ¨¡å‹
# netæ˜¯æ¨¡å‹, train_iteræ˜¯è®­ç»ƒæ•°æ®, test_iteræ˜¯æµ‹è¯•æ•°æ®, lossæ˜¯æŸå¤±å‡½æ•°
# num_epochsæ˜¯è®­ç»ƒçš„è½®æ•°, updateræ˜¯æ›´æ–°å‚æ•°çš„å‡½æ•°
def train_ch3(net, train_iter, test_iter, loss, num_epochs, updater):  #@save
    animator = Animator(xlabel='epoch', xlim=[1, num_epochs], ylim=[0.3, 0.9],
                        legend=['train loss', 'train acc', 'test acc'])
    for epoch in range(num_epochs):
        train_metrics = train_epoch_ch3(net, train_iter, loss, updater) # è®­ç»ƒä¸€ä¸ªepoch
        test_acc = evaluate_accuracy(net, test_iter) # æµ‹è¯•æ¨¡å‹
        animator.add(epoch + 1, train_metrics + (test_acc,)) # æ·»åŠ æ•°æ®åˆ°åŠ¨ç”»
    train_loss, train_acc = train_metrics # è·å–è®­ç»ƒçš„æŸå¤±å’Œå‡†ç¡®åº¦
    assert train_loss &lt; 0.5, train_loss # æŸå¤±æ¯”è¾ƒå°
    # å‡†ç¡®ç‡æ¯”è¾ƒé«˜
    assert train_acc &lt;= 1 and train_acc &gt; 0.7, train_acc 
    assert test_acc &lt;= 1 and test_acc &gt; 0.7, test_acc
</code></pre>
<ul>
<li>å¼€å§‹è®­ç»ƒ</li>
</ul>

<pre class="language-python"><code class="language-python">num_epochs = 10
# è®­ç»ƒæ¨¡å‹
train_ch3(net, train_iter, test_iter, cross_entropy, num_epochs, updater) 
</code></pre>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501081938604.png" alt="image-20250108193835446" /></p>
<ul>
<li>é¢„æµ‹</li>
</ul>

<pre class="language-python"><code class="language-python">def predict_ch3(net, test_iter, n=6):  #@save
    for X, y in test_iter:
        break
    trues = d2l.get_fashion_mnist_labels(y)
    preds = d2l.get_fashion_mnist_labels(net(X).argmax(axis=1))
    titles = [true + '\n' + pred for true, pred in zip(trues, preds)]
    d2l.show_images(X[0:n].reshape((n, 28, 28)), 1, n, titles=titles[0:n])

predict_ch3(net, test_iter) # é¢„æµ‹æ¨¡å‹
</code></pre>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501081938854.png" alt="image-20250108193848764" /></p>
<h3 id="%E5%AE%9E%E9%99%85%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95">å®é™…å®ç°ç®€å•</h3>

<pre class="language-python"><code class="language-python">import torch
from torch import nn
from d2l import torch as d2l

batch_size = 256
train_iter, test_iter = d2l.load_data_fashion_mnist(batch_size)
</code></pre>
<ul>
<li>å»ºç«‹æ¨¡å‹</li>
</ul>

<pre class="language-python"><code class="language-python"># åˆå§‹åŒ–ä¸€ä¸ªçº¿æ€§æ¨¡å‹, 784ä¸ªè¾“å…¥ç‰¹å¾ï¼Œ10ä¸ªè¾“å‡ºç‰¹å¾, åŒæ—¶å¯¹è¾“å…¥ç‰¹å¾è¿›è¡Œå±•å¹³
net = nn.Sequential(nn.Flatten(), nn.Linear(784, 10))

def init_weights(m):
    if type(m) == nn.Linear:
        nn.init.normal_(m.weight, std=0.01)

# å¯¹æ¨¡å‹è¿›è¡Œåˆå§‹åŒ–, å®é™…æ˜¯å¯¹æ¨¡å‹ä¸­çš„æ¯ä¸ªçº¿æ€§å±‚è¿›è¡Œåˆå§‹åŒ–
net.apply(init_weights)
</code></pre>
<ul>
<li>è·å–æ›´æ–°ä»¥åŠæŸå¤±å‡½æ•°</li>
</ul>

<pre class="language-python"><code class="language-python">loss = nn.CrossEntropyLoss() # è·å–äº¤å‰ç†µæŸå¤±å‡½æ•°
trainer = torch.optim.SGD(net.parameters(), lr=0.1) # ä½¿ç”¨éšæœºæ¢¯åº¦ä¸‹é™ä¼˜åŒ–å™¨
</code></pre>
<ul>
<li>å®é™…çš„è®­ç»ƒ, ä½¿ç”¨ä¹‹å‰å®ç°çš„è®­ç»ƒå‡½æ•°</li>
</ul>

<pre class="language-python"><code class="language-python">num_epochs = 10
d2l.train_ch3(net, train_iter, test_iter, loss, num_epochs, trainer)
</code></pre>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501081954335.png" alt="image-20250108195441237" /></p>
<h2 id="%E6%8D%9F%E5%A4%B1%E5%87%BD%E6%95%B0">æŸå¤±å‡½æ•°</h2>
<p>ç”¨äºè®¡ç®—å®é™…çš„å€¼å’Œé¢„æµ‹å€¼ä¹‹é—´çš„åŒºåˆ«</p>
<h3 id="L2-Loss">L2 Loss</h3>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501081417328.png" alt="image-20250108141723229" /></p>
<p>é™¤ä»¥2æ˜¯ä¸ºäº†æ±‚å¯¼çš„æ—¶å€™å¯ä»¥æŠµæ¶ˆ, å®é™…ä½¿ç”¨çš„æ—¶å€™å¦‚æœè¿™ä¸€ä¸ªæ•°å­—ç¦»åŸç‚¹æ¯”è¾ƒè¿œçš„æ—¶å€™å¯èƒ½å¯¼è‡´æ­¥é•¿å¤ªå¤§</p>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501081420679.png" alt="image-20250108142015545" /></p>
<p>è“è‰²çš„æ˜¯å‡½æ•°, é»„è‰²çš„æ˜¯å¯¼æ•°, ç»¿è‰²ä¼¼ç„¶å‡½æ•°, å®é™…ä½¿ç”¨çš„æ˜¯å¯¼æ•°è¿›è¡Œæ›´æ–°</p>
<h3 id="L1-Loss">L1 Loss</h3>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501081421153.png" alt="image-20250108142139059" /></p>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501081421023.png" alt="image-20250108142156891" /></p>
<p>æ‰€æœ‰çš„ä½ç½®çš„æ¢¯åº¦éƒ½æ˜¯å®šå€¼, ä½†æ˜¯é›¶ç‚¹çš„æ—¶å€™ä¸å¯å¯¼, ä¼šå‘ç”Ÿå‰§çƒˆå˜åŒ–, ä¼˜åŒ–çš„æœ«æœŸä¸å¤ªç¨³å®š</p>
<h3 id="Huber%27s-Robust-Loss">Huber's Robust Loss</h3>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/image/202501081423309.png" alt="image-20250108142357172" /></p>
<p>ä½¿ç”¨ä»¥ä¸Šçš„ä¸¤ä¸ªå‡½æ•°åšæˆåˆ†å¸ƒå‡½æ•°</p>
<h2 id="%E5%AD%A6%E4%B9%A0%E7%8E%87%E4%B8%8B%E9%99%8D">å­¦ä¹ ç‡ä¸‹é™</h2>

<pre class="language-python"><code class="language-python"># å»ºç«‹ä¸€ä¸ªæ—¶é—´è°ƒåº¦å™¨, æ¯lr_periodé™ä½çš„æ¯”ä¾‹ä¸ºlr_decay
scheduler = torch.optim.lr_scheduler.StepLR(trainer, lr_period, lr_decay) 

# è®­ç»ƒçš„æ—¶å€™æ¯ä¸€è½®ä½¿ç”¨ä¸€æ¬¡
scheduler.step() # æ›´æ–°å­¦ä¹ ç‡

</code></pre>

                        
                    </div>
                </div>
                <div id="previous_next">
                    <div id="previous">
                        
                        <a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2024-11-03-02æ•°æ®ç±»å‹.html">
                            <span class="icon"></span>
                            <span class="label">2024-11-03-02æ•°æ®ç±»å‹</span>
                        </a>
                        
                    </div>
                    <div id="next">
                        
                        <a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-08-04æ•°æ®é›†.html">
                            <span class="label">2025-1-08-04æ•°æ®é›†</span>
                            <span class="icon"></span>
                        </a>
                        
                    </div>
                </div>
                <div id="comments-container"></div>
            </div>
            <div id="toc_wrapper">
                <div id="toc">
                    <div id="toc_content">
                            
                    </div>
                </div>
            </div>
        </div>
    </div>
    <a id="to_top" href="#"></a>
    <div id="doc_footer">
        <div id="footer">
            <div id="footer_top">
                <ul>
<li><a>é“¾æ¥</a><ul><li><a target="_blank" href="https://teedoc.neucrack.com">ç½‘ç«™ä½¿ç”¨ teedoc ç”Ÿæˆ</a></li>
<li><a target="_blank" href="https://neucrack.com">Copyright Â© 2021 Neucrack</a></li>
<li><a  href="/note/sitemap.xml">ç½‘ç«™åœ°å›¾</a></li>
</ul>
</li>
<li><a>æºç </a><ul><li><a target="_blank" href="https://github.com/XuSenfeng/note/">github</a></li>
<li><a target="_blank" href="https://github.com/teedoc/teedoc">æœ¬ç½‘ç«™æºæ–‡ä»¶</a></li>
</ul>
</li>
</ul>

            </div>
            <div id="footer_bottom">
                <ul>
<li><a target="_blank" href="https://beian.miit.gov.cn">æ¸ICPå¤‡19015320å·</a></li>
<li><a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44030602004109">ç²¤å…¬ç½‘å®‰å¤‡44030602004109å·</a></li>
</ul>

            </div>
        </div>
    </div>
    
        <script src="/note/teedoc-plugin-markdown-parser/mermaid.min.js"></script>
    
        <script>mermaid.initialize({startOnLoad:true});</script>
    
        <script type="text/javascript">
                var transLoaded = false;
                var loading = false;
                var domain = "translate.google.com";
                var domainDefault = domain;
                var storeDomain = localStorage.getItem("googleTransDomain");
                if(storeDomain){
                    domain = storeDomain;
                    console.log("load google translate domain from local storage:" + domain);
                }
                function getUrl(domain){
                    if(domain == "/")
                        return "/static/js/google_translate/element.js?cb=googleTranslateElementInit";
                    else
                        return "https://" + domain + "/translate_a/element.js?cb=googleTranslateElementInit";
                }
                var url = getUrl(domain);
                console.log("google translate domain:" + domain + ", url: " + url);
                function googleTranslateElementInit() {
                    new google.translate.TranslateElement({pageLanguage: "auto", layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
                }
                function loadJS( url, callback ){
                    var script = document.createElement('script');
                    fn = callback || function(){ };
                    script.type = 'text/javascript';
                    if(script.readyState){
                        script.onreadystatechange = function(){
                            if( script.readyState == 'loaded' || script.readyState == 'complete' ){
                                script.onreadystatechange = null;
                                fn();
                            }
                        };
                    }else{
                        script.onload = function(){
                            fn();
                        };
                    }
                    script.src = url;
                    document.getElementsByTagName('head')[0].appendChild(script);
                }
                function removeHint(){
                    var hint = document.getElementById("loadingTranslate");
                    if(hint){
                        hint.remove();
                    }
                }
                var btn = document.getElementById("google_translate_element");
                btn.onclick = function(){
                    if(transLoaded) return;
                    if(loading){
                        var flag = confirm("loading from " + domain + ", please wait, or change domain?");
                        if(flag){
                            newDomain = prompt("domain, default: " + domainDefault + ", now: " + domain);
                            if(newDomain){
                                domain = newDomain;
                                console.log(domain);
                                url = getUrl(domain);
                                loadJS(url, function(){
                                    localStorage.setItem("googleTransDomain", domain);
                                    removeHint()
                                    transLoaded = true;
                                });
                            }
                        }
                        return;
                    }
                    btn.innerHTML = '<span id="loadingTranslate"><img class="icon" src="/note/static/image/google_translate/translate.svg"/>Loading ...</span>';
                    loading = true;
                    loadJS(url, function(){
                        localStorage.setItem("googleTransDomain", domain);
                        removeHint()
                        transLoaded = true;
                    });
                }
                </script>
            
    
        <script src="/note/static/js/theme_default/tocbot.min.js"></script>
    
        <script src="/note/static/js/theme_default/main.js"></script>
    
        <script src="/note/static/js/theme_default/viewer.min.js"></script>
    
        <script src="/note/static/css/theme_default/prism.min.js"></script>
    
        <script src="/note/static/js/search/search_main.js"></script>
    
        <script src="/note/static/js/plugin_blog/main.js"></script>
    
        <link rel="stylesheet" href="/note/static/js/add_hint/style.css" type="text/css"/>
    
        <script src="/note/static/js/add_hint/main.js"></script>
    
        <script src="/note/static/js/gitalk/gitalk.min.js"></script>
    
        <script src="/note/static/js/gitalk/main.js"></script>
    
        <script src="/note/static/js/custom.js"></script>
    
</body>

</html>