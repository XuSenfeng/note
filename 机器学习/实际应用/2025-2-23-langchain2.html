<!DOCTYPE html>

<html lang="zh-CN"  class="">


<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="keywords" content="">
    
    
    <meta name="description" content="">
    
    <meta name="generator" content="teedoc">
    <meta name="theme" content="teedoc-plugin-theme-default">
    
        
        <meta name="markdown-generator" content="teedoc-plugin-markdown-parser">
        
        <script>
MathJax = {"loader": {"load": ["output/svg"]}, "tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]]}, "svg": {"fontCache": "global"}};
</script>
        
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        
        <meta name="html-generator" content="teedoc-plugin-jupyter-notebook-parser">
        
        <script src="/note/static/js/theme_default/pre_main.js"></script>
        
        <link rel="stylesheet" href="/note/static/css/theme_default/prism.min.css" type="text/css"/>
        
        <link rel="stylesheet" href="/note/static/css/theme_default/viewer.min.css" type="text/css"/>
        
        <link rel="stylesheet" href="/note/static/css/theme_default/dark.css" type="text/css"/>
        
        <link rel="stylesheet" href="/note/static/css/theme_default/light.css" type="text/css"/>
        
        <script src="/note/static/js/theme_default/jquery.min.js"></script>
        
        <script src="/note/static/js/theme_default/split.js"></script>
        
        <link rel="stylesheet" href="/note/static/css/search/style.css" type="text/css"/>
        
        <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?4d52982572d5512e9762879ebf063c86";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
        
        <meta name="blog-generator" content="teedoc-plugin-blog">
        
        <link rel="stylesheet" href="/note/static/css/gitalk/gitalk.css" type="text/css"/>
        
        <link rel="stylesheet" href="/note/static/css/gitalk/custom_gitalk.css" type="text/css"/>
        
        <link rel="stylesheet" href="/note/static/css/custom.css" type="text/css"/>
        
    
    
    <title>XvSenfeng's Note</title>
    
    <script type="text/javascript">js_vars = {"teedoc-plugin-ad-hint": {"type": "hint", "label": "â˜†", "content": "è¿™æ˜¯ä¸€ä¸ªæ”¯æŒå›½é™…åŒ–çš„æ¶ˆæ¯ç¤ºä¾‹</br>å–œæ¬¢é¡¹ç›®è¯·<a target=\"_blank\" href=\"https://github.com/teedoc/teedoc\">ç‚¹ä¸‹ â˜† star </a>å“¦~ğŸ¦€ğŸ¦€", "show_times": 2, "show_after_s": 432000, "date": "2021-11-16 14:40", "color": "#a0421d", "link_color": "#e53935", "link_bg_color": "#e6ae5c", "bg_color": "#ffcf89", "color_hover": "white", "bg_color_hover": "#f57c00", "close_color": "#eab971"}}</script>
    <script type="text/javascript">metadata = {"tags": [], "date": null, "update": [], "ts": 0, "author": "", "brief": "", "cover": ""}</script>
</head>


<body class="type_doc">
    
    <div id="navbar">
        <div id="navbar_menu">
            <a class="site_title" href="/note/">
                
                    <img class="site_logo" src="/note/static/image/logo.png" alt="XvSenfeng logo">
                
                
                    <h2>XvSenfeng</h2>
                
        </a>
            <a id="navbar_menu_btn"></a>
        </div>
        <div id="navbar_items">
            <div>
                <ul id="nav_left">
<li class=""><a  href="/note/blog/">åšå®¢</a></li>
<li class=""><a  href="/note/Linux/">Linux</a></li>
<li class=""><a  href="/note/ä»£ç åˆ†æ/">ä»£ç åˆ†æ</a></li>
<li class=""><a  href="/note/ä½¿ç”¨è½¯ä»¶/">ä½¿ç”¨è½¯ä»¶</a></li>
<li class=""><a  href="/note/åµŒå…¥å¼/">åµŒå…¥å¼</a></li>
<li class=""><a  href="/note/æ‰‹æœºå®‰å“/">æ‰‹æœºå®‰å“</a></li>
<li class="active"><a  href="/note/æœºå™¨å­¦ä¹ /">æœºå™¨å­¦ä¹ </a></li>
<li class=""><a  href="/note/ç¼–ç¨‹åŸºç¡€/">ç¼–ç¨‹åŸºç¡€</a></li>
<li class=""><a  href="/note/ç½‘ç»œ/">ç½‘ç»œ</a></li>
</ul>

            </div>
            <div>
                <ul id="nav_right">
<li class=""><a target="_blank" href="https://github.com/XuSenfeng/note/">github</a></li>
</ul>

                <ul class="nav_plugins"><li><a id="google_translate_element"><img class="icon" src="/note/static/image/google_translate/translate.svg"/>Translate</a></li></ul><ul class="nav_plugins"><li><a id="themes" class="light"></a></li></ul><ul class="nav_plugins"><li><a id="search"><span class="icon"></span><span class="placeholder">æœç´¢</span>
                            <div id="search_hints">
                                <span id="search_input_hint">è¾“å…¥å…³é”®è¯ï¼Œå¤šå…³é”®è¯ç©ºæ ¼éš”å¼€</span>
                                <span id="search_loading_hint">æ­£åœ¨åŠ è½½ï¼Œè¯·ç¨å€™ã€‚ã€‚ã€‚</span>
                                <span id="search_download_err_hint">ä¸‹è½½æ–‡ä»¶å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•æˆ–æ£€æŸ¥ç½‘ç»œ</span>
                                <span id="search_other_docs_result_hint">æ¥è‡ªå…¶å®ƒæ–‡æ¡£çš„ç»“æœ</span>
                                <span id="search_curr_doc_result_hint">å½“å‰æ–‡æ¡£æœç´¢ç»“æœ</span>
                            </div></a></li></ul>
            </div>
        </div>
    </div>
    
    <div id="wrapper">
        <div id="sidebar_wrapper">
            <div id="sidebar">
                <div id="sidebar_title">
                    
                </div>
                <ul class="show">
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /2024-10-5-Transformers.html"><span class="label">2024-10-5-Transformers</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /2024-10-6-Juoyter.html"><span class="label">2024-10-6-Juoyter</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /2024-10-7-Pandasåº“.html"><span class="label">2024-10-7-Pandasåº“</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /2024-10-9-transformså®æˆ˜.html"><span class="label">2024-10-9-transformså®æˆ˜</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /2024-9-21-LLM.html"><span class="label">2024-9-21-LLM</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /2024-9-22-vLLM.html"><span class="label">2024-9-22-vLLM</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /2024-9-22-æ·±åº¦å­¦ä¹ ç¯å¢ƒ.html"><span class="label">2024-9-22-æ·±åº¦å­¦ä¹ ç¯å¢ƒ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /2024-9-23-01pytorch.html"><span class="label">2024-9-23-01pytorch</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /2024-9-8-æœºå™¨å­¦ä¹ .html"><span class="label">2024-9-8-æœºå™¨å­¦ä¹ </span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /index.html"><span class="label">README</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">rvæ¨¡å‹éƒ¨ç½²</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /rvæ¨¡å‹éƒ¨ç½²/2025-11-28-00-é©±åŠ¨ç§»æ¤.html"><span class="label">2025-11-28-00-é©±åŠ¨ç§»æ¤</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /rvæ¨¡å‹éƒ¨ç½²/2025-11-28-01-ç¯å¢ƒæ­å»º.html"><span class="label">2025-11-28-01-ç¯å¢ƒæ­å»º</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /rvæ¨¡å‹éƒ¨ç½²/2025-12-2-02-åŸºç¡€æ¦‚å¿µ.html"><span class="label">2025-12-2-02-åŸºç¡€æ¦‚å¿µ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /rvæ¨¡å‹éƒ¨ç½²/2025-12-3-03-RKNN_Toolkit2.html"><span class="label">2025-12-3-03-RKNN_Toolkit2</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /rvæ¨¡å‹éƒ¨ç½²/2025-12-3-04-RKLLM.html"><span class="label">2025-12-3-04-RKLLM</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /rvæ¨¡å‹éƒ¨ç½²/2026-2-2-05-RKNNå¼€å‘.html"><span class="label">2026-2-2-05-RKNNå¼€å‘</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">vllmä»£ç åˆ†æ</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /vllmä»£ç åˆ†æ/2024-12-31-00-æ•´ä½“æ¡†æ¶.html"><span class="label">2024-12-31-00-æ•´ä½“æ¡†æ¶</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /vllmä»£ç åˆ†æ/2024-12-31-01-collect_env.html"><span class="label">2024-12-31-01-collect_env</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">å…·èº«æ™ºèƒ½</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /å…·èº«æ™ºèƒ½/2026-2-2-åŸºç¡€æ¦‚å¿µ.html"><span class="label">2026-2-2-åŸºç¡€æ¦‚å¿µ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /å…·èº«æ™ºèƒ½/2026-2-3-02-ä»¿çœŸ.html"><span class="label">2026-2-3-02-ä»¿çœŸ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /å…·èº«æ™ºèƒ½/2026-2-3-03-å§¿æ€è§£ç®—.html"><span class="label">2026-2-3-03-å§¿æ€è§£ç®—</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /å…·èº«æ™ºèƒ½/2026-2-4-04-SO-ARM101.html"><span class="label">2026-2-4-04-SO-ARM101</span><span class=""></span></a></li>
</ul>
</li>
<li class="active_parent no_link"><a><span class="label">å®é™…åº”ç”¨</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /å®é™…åº”ç”¨/2025-1-30-ollama.html"><span class="label">2025-1-30-ollama</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /å®é™…åº”ç”¨/2025-12-10-è¯­éŸ³è¯†åˆ«.html"><span class="label">2025-12-10-è¯­éŸ³è¯†åˆ«</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /å®é™…åº”ç”¨/2025-12-22-QLearning.html"><span class="label">2025-12-22-QLearning</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /å®é™…åº”ç”¨/2025-2-16-dify.html"><span class="label">2025-2-16-dify</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /å®é™…åº”ç”¨/2025-2-16-langChain.html"><span class="label">2025-2-16-langChain</span><span class=""></span></a></li>
<li class="active with_link"><a href="/note/æœºå™¨å­¦ä¹ /å®é™…åº”ç”¨/2025-2-23-langchain2.html"><span class="label">2025-2-23-langchain2</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /å®é™…åº”ç”¨/2025-2-26-Loraå¾®è°ƒ.html"><span class="label">2025-2-26-Loraå¾®è°ƒ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /å®é™…åº”ç”¨/2025-3-20-COZE.html"><span class="label">2025-3-20-COZE</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /å®é™…åº”ç”¨/2025-4-2-MCP.html"><span class="label">2025-4-2-MCP</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">åµŒå…¥å¼ç§»æ¤</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /åµŒå…¥å¼ç§»æ¤/00ç»†èŠ.html"><span class="label">00ç»†èŠ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /åµŒå…¥å¼ç§»æ¤/2025-12-18-01-æ¨¡å‹é‡åŒ–.html"><span class="label">2025-12-18-01-æ¨¡å‹é‡åŒ–</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">ææ²è¯¾ç¨‹</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/0000-0-0-00åŸºç¡€numpy.html"><span class="label">0000-0-0-00åŸºç¡€numpy</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/0000-0-0-00åŸºç¡€pandas.html"><span class="label">0000-0-0-00åŸºç¡€pandas</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2024-10-31-01.html"><span class="label">2024-10-31-01</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2024-11-03-02æ•°æ®ç±»å‹.html"><span class="label">2024-11-03-02æ•°æ®ç±»å‹</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-08-03åŸºç¡€å‡½æ•°.html"><span class="label">2025-1-08-03åŸºç¡€å‡½æ•°</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-08-04æ•°æ®é›†.html"><span class="label">2025-1-08-04æ•°æ®é›†</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-08-05æ„ŸçŸ¥æœº.html"><span class="label">2025-1-08-05æ„ŸçŸ¥æœº</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-09æ¨¡å‹é€‰æ‹©.html"><span class="label">2025-1-09æ¨¡å‹é€‰æ‹©</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-10-10ä¸¢å¼ƒæ³•.html"><span class="label">2025-1-10-10ä¸¢å¼ƒæ³•</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-11-11æ•°å€¼ç¨³å®šæ€§.html"><span class="label">2025-1-11-11æ•°å€¼ç¨³å®šæ€§</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-12-12å±‚å’Œå—.html"><span class="label">2025-1-12-12å±‚å’Œå—</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-12-GPU.html"><span class="label">2025-1-12-GPU</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-12-å®æˆ˜æ¯”èµ›.html"><span class="label">2025-1-12-å®æˆ˜æ¯”èµ›</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-13-13å·ç§¯.html"><span class="label">2025-1-13-13å·ç§¯</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-13-14æ± åŒ–.html"><span class="label">2025-1-13-14æ± åŒ–</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-14-15LeNet.html"><span class="label">2025-1-14-15LeNet</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-14-16AlexNet.html"><span class="label">2025-1-14-16AlexNet</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-14-17VGG.html"><span class="label">2025-1-14-17VGG</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-14-18NiN.html"><span class="label">2025-1-14-18NiN</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-14-19GoogLeNet.html"><span class="label">2025-1-14-19GoogLeNet</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-15-20æ‰¹é‡å½’ä¸€åŒ–.html"><span class="label">2025-1-15-20æ‰¹é‡å½’ä¸€åŒ–</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-15-21æ®‹å·®ç½‘ç»œResNet.html"><span class="label">2025-1-15-21æ®‹å·®ç½‘ç»œResNet</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-16-èŠ¯ç‰‡.html"><span class="label">2025-1-16-èŠ¯ç‰‡</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-17-22æ•°æ®å¢å¹¿.html"><span class="label">2025-1-17-22æ•°æ®å¢å¹¿</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-17-23å¾®è°ƒ.html"><span class="label">2025-1-17-23å¾®è°ƒ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-18-24CIFARæ•°æ®é›†.html"><span class="label">2025-1-18-24CIFARæ•°æ®é›†</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-19-25ç›®æ ‡æ£€æµ‹.html"><span class="label">2025-1-19-25ç›®æ ‡æ£€æµ‹</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-1-23-26åŒºåŸŸå·ç§¯ç¥ç»ç½‘ç»œ.html"><span class="label">2025-1-23-26åŒºåŸŸå·ç§¯ç¥ç»ç½‘ç»œ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-1-27è¯­ä¹‰åˆ†å‰².html"><span class="label">2025-2-1-27è¯­ä¹‰åˆ†å‰²</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-10-33é•¿çŸ­æœŸè®°å¿†LSTM.html"><span class="label">2025-2-10-33é•¿çŸ­æœŸè®°å¿†LSTM</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-10-34æ·±åº¦å¾ªç¯ç½‘ç»œ.html"><span class="label">2025-2-10-34æ·±åº¦å¾ªç¯ç½‘ç»œ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-10-35-BPTT.html"><span class="label">2025-2-10-35-BPTT</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-10-36åŒå‘å¾ªç¯ç¥ç»ç½‘ç»œ.html"><span class="label">2025-2-10-36åŒå‘å¾ªç¯ç¥ç»ç½‘ç»œ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-11-37ç¼–ç å™¨è§£ç å™¨.html"><span class="label">2025-2-11-37ç¼–ç å™¨è§£ç å™¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-11-38seq2seq.html"><span class="label">2025-2-11-38seq2seq</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-11-39æŸæœç´¢.html"><span class="label">2025-2-11-39æŸæœç´¢</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-11-40æ³¨æ„åŠ›æœºåˆ¶.html"><span class="label">2025-2-11-40æ³¨æ„åŠ›æœºåˆ¶</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-13-41æ³¨æ„åŠ›seq2seq.html"><span class="label">2025-2-13-41æ³¨æ„åŠ›seq2seq</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-15-42è‡ªæ³¨æ„åŠ›.html"><span class="label">2025-2-15-42è‡ªæ³¨æ„åŠ›</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-15-43Transformer.html"><span class="label">2025-2-15-43Transformer</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-15-44BERT.html"><span class="label">2025-2-15-44BERT</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-5-28æ ·å¼è¿ç§».html"><span class="label">2025-2-5-28æ ·å¼è¿ç§»</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-5-29åºåˆ—æ¨¡å‹.html"><span class="label">2025-2-5-29åºåˆ—æ¨¡å‹</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-6-30æ–‡å­—å¤„ç†.html"><span class="label">2025-2-6-30æ–‡å­—å¤„ç†</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-7-31-å¾ªç¯ç¥ç»ç½‘ç»œRNN.html"><span class="label">2025-2-7-31-å¾ªç¯ç¥ç»ç½‘ç»œRNN</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /ææ²è¯¾ç¨‹/2025-2-9-32-é—¨æ§å¾ªç¯å•å…ƒGRU.html"><span class="label">2025-2-9-32-é—¨æ§å¾ªç¯å•å…ƒGRU</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">è§†è§‰è¯†åˆ«</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/2025-12-12-04-ç»å…¸ç®—æ³•.html"><span class="label">2025-12-12-04-ç»å…¸ç®—æ³•</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/2025-12-12-05-YoloV1.html"><span class="label">2025-12-12-05-YoloV1</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">K230</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/K230/2026-1-1-01-SDKç¼–è¯‘.html"><span class="label">2026-1-1-01-SDKç¼–è¯‘</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/K230/2026-1-10-03-Linuxä»£ç å¼€å‘.html"><span class="label">2026-1-10-03-Linuxä»£ç å¼€å‘</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/K230/2026-1-3-02-åŸºç¡€åŸç†.html"><span class="label">2026-1-3-02-åŸºç¡€åŸç†</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">MaixCAM</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-11-02-æ¨¡å‹è®­ç»ƒ.html"><span class="label">2025-12-11-02-æ¨¡å‹è®­ç»ƒ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-11-03-å¸¸ç”¨çš„æ¨¡å‹.html"><span class="label">2025-12-11-03-å¸¸ç”¨çš„æ¨¡å‹</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-14-04-Yoloæ¨¡å‹è½¬æ¢.html"><span class="label">2025-12-14-04-Yoloæ¨¡å‹è½¬æ¢</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-14-05-MaixCDKåŸºç¡€ä½¿ç”¨.html"><span class="label">2025-12-14-05-MaixCDKåŸºç¡€ä½¿ç”¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-16-06-maixcdkå·¥å…·.html"><span class="label">2025-12-16-06-maixcdkå·¥å…·</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-17-07-ç»„ä»¶.html"><span class="label">2025-12-17-07-ç»„ä»¶</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-17-08-Cameraç¤ºä¾‹.html"><span class="label">2025-12-17-08-Cameraç¤ºä¾‹</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-17-09-APP.html"><span class="label">2025-12-17-09-APP</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-18-06-æ¨¡å‹ç›¸å…³å‚æ•°.html"><span class="label">2025-12-18-06-æ¨¡å‹ç›¸å…³å‚æ•°</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-19-07-AIç¼–è¯‘å™¨.html"><span class="label">2025-12-19-07-AIç¼–è¯‘å™¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-19-08-æ¨¡å‹å®ç°.html"><span class="label">2025-12-19-08-æ¨¡å‹å®ç°</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-20-09-MaixPyç¼–è¯‘.html"><span class="label">2025-12-20-09-MaixPyç¼–è¯‘</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-3-00-èµ„æ–™.html"><span class="label">2025-12-3-00-èµ„æ–™</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/MaixCAM/2025-12-5-01ç¼–è¯‘ä¸‹è½½.html"><span class="label">2025-12-5-01ç¼–è¯‘ä¸‹è½½</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">yolo</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/yolo/2025-12-12-02-åŸºç¡€ä½¿ç”¨.html"><span class="label">2025-12-12-02-åŸºç¡€ä½¿ç”¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/yolo/2025-12-12-03-æ•°æ®é›†.html"><span class="label">2025-12-12-03-æ•°æ®é›†</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/yolo/2025-12-12-04-é¢„æµ‹.html"><span class="label">2025-12-12-04-é¢„æµ‹</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/yolo/2025-12-13-05-è®­ç»ƒ.html"><span class="label">2025-12-13-05-è®­ç»ƒ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/yolo/2025-12-13-06-yolov5åŸºç¡€ä½¿ç”¨.html"><span class="label">2025-12-13-06-yolov5åŸºç¡€ä½¿ç”¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/yolo/2025-12-13-07-AutoDLæœåŠ¡å™¨è®­ç»ƒ.html"><span class="label">2025-12-13-07-AutoDLæœåŠ¡å™¨è®­ç»ƒ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/yolo/2025-12-13-08-yolov5æ¡†æ¶.html"><span class="label">2025-12-13-08-yolov5æ¡†æ¶</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/yolo/2025-12-13-09-ä¿®æ”¹ç½‘ç»œ.html"><span class="label">2025-12-13-09-ä¿®æ”¹ç½‘ç»œ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/yolo/2025-12-13-10-æ¨¡å‹éƒ¨ç½².html"><span class="label">2025-12-13-10-æ¨¡å‹éƒ¨ç½²</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/æœºå™¨å­¦ä¹ /è§†è§‰è¯†åˆ«/yolo/2025-12-4-01-yoloå®‰è£….html"><span class="label">2025-12-4-01-yoloå®‰è£…</span><span class=""></span></a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </div>
        </div>
        <div id="article">
            <div id="menu_wrapper">
                <div id="menu">
                </div>
            </div>
            <div id="content_wrapper">
                <div id="content_body">
                    <div id="article_head">
                        <div id="article_title">
                            
                            <h1></h1>
                            
                        </div>
                        <div id="article_tags">
                            <ul>
                            
                            </ul>
                        </div>
                        <div id="article_info">
                        <div id="article_info_left">
                            <span class="article_author">
                                
                            </span>
                            
                                <span class="article_date" title="æœ€åä¿®æ”¹æ—¥æœŸï¼š 2025-12-14">
                                    2025-12-14
                                </span>
                            
                        </div>
                        <div id="article_info_right">
                            
                            <div id="source_link">
                                <a href="https://github.com/XuSenfeng/note/tree/master/doc/æœºå™¨å­¦ä¹ /å®é™…åº”ç”¨/2025-2-23-langchain2.md" target="_blank">
                                    ç¼–è¾‘æœ¬é¡µ
                                </a>
                            </div>
                            
                        </div>
                        </div>
                    </div>
                    <div id="article_tools">
                        <span></span>
                        <span id="toc_btn"></span>
                    </div>
                    <div id="update_history">
                        
                    </div>
                    <div id="article_content">
                        
                            <p>RunnablePassthroughå…è®¸ä¼ é€’è¾“å…¥æ•°æ®ï¼Œå¯ä»¥ä¿æŒä¸å˜æˆ–æ·»åŠ é¢å¤–çš„é”®ã€‚é€šå¸¸ä¸RunnableParallelä¸€èµ·ä½¿ç”¨ï¼Œå°†æ•°æ®åˆ†é…ç»™æ˜ å°„ä¸­çš„æ–°é”®ã€‚</p>
<p>å®é™…æ˜¯å¯¹ä¸Šä¸€å±‚çš„è¾“å‡ºåšå¤„ç†, ä½œä¸ºå‚æ•°ä¼ å…¥RunnablePassthrough, å¯ä»¥ä½¿ç”¨assignæ¥ç»™å‚æ•°é‡Œé¢æ·»åŠ æ–°çš„é”®å€¼å¯¹</p>

<pre class="language-python"><code class="language-python">from langchain_core.runnables import RunnableParallel, RunnablePassthrough

runnable = RunnableParallel(
    passed=RunnablePassthrough(),
    extra=RunnablePassthrough.assign(mult=lambda x: x[&quot;num&quot;] * 3),
    modified=lambda x: x[&quot;num&quot;] + 1,
)

runnable.invoke({&quot;num&quot;: 1})
</code></pre>
<blockquote>
<p><code>passed</code> é”®ä½¿ç”¨ <code>RunnablePassthrough()</code> è°ƒç”¨ï¼Œå› æ­¤å®ƒåªæ˜¯ä¼ é€’äº† <code>{'num': 1}</code>ã€‚</p>
<p>åœ¨ç¬¬äºŒè¡Œä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å¸¦æœ‰å°†æ•°å€¼ä¹˜ä»¥3çš„lambdaçš„ <code>RunnablePastshrough.assign</code>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>extra</code> è¢«è®¾ç½®ä¸º <code>{'num': 1, 'mult': 3}</code>ï¼Œå³åŸå§‹å€¼åŠ ä¸Š <code>mult</code> é”®ã€‚</p>
<p>æœ€åï¼Œæˆ‘ä»¬è¿˜ä½¿ç”¨lambdaåœ¨æ˜ å°„ä¸­è®¾ç½®äº†ç¬¬ä¸‰ä¸ªé”® <code>modified</code>ï¼Œå°†numåŠ 1ï¼Œç»“æœä¸º <code>modified</code> é”®çš„å€¼ä¸º <code>2</code>ã€‚</p>
</blockquote>

<pre class="language-python"><code class="language-python">retrieval_chain = (
    {&quot;context&quot;: retriever, &quot;question&quot;: RunnablePassthrough()}
    | prompt
    | model
    | StrOutputParser()
)

retrieval_chain.invoke(&quot;where did harrison work?&quot;)
</code></pre>
<blockquote>
<p>åœ¨è¾“å…¥å‚æ•°é‡Œé¢åŠ å…¥ä¸€ä¸ªcontexté”®</p>
</blockquote>
<h3 id="%E8%AE%B0%E5%BF%86%E6%80%BB%E7%BB%93">è®°å¿†æ€»ç»“</h3>
<p>å®é™…æ˜¯æŠŠå¯¹è¯äº¤ç»™AI, è®©ä»–è¿›è¡Œæ€»ç»“å¤„ç†</p>

<pre class="language-python"><code class="language-python">def summarize_messages(chain_input):
    stored_messages = history.messages
    if len(stored_messages) == 0:
        return False
    summarization_prompt = ChatPromptTemplate.from_messages([
        MessagesPlaceholder(variable_name=&quot;history&quot;),
        (&quot;user&quot;, &quot;æŠŠä¸Šé¢çš„æ¶ˆæ¯æµ“ç¼©ä¸€ä¸‹, å°½å¯èƒ½çš„åŒ…å«å¤šä¸ªç»†èŠ‚, å°¤å…¶æ˜¯ç”¨æˆ·çš„ç‰¹å¾&quot;)
    ])

    summarization_chain = summarization_prompt | ChatOpenAI(model=&quot;gpt-3.5-turbo-1106&quot;)
    result = summarization_chain.invoke(input={&quot;history&quot;: stored_messages})
    history.clear()
    history.add_message(result)
    return True


chain_with_summarization = (
    RunnablePassthrough.assign(messages_summarized=summarize_messages)
    | with_message_history
)

</code></pre>
<h2 id="%E5%A4%9A%E6%A8%A1%E6%80%81%E8%BE%93%E5%85%A5">å¤šæ¨¡æ€è¾“å…¥</h2>
<p>æŠŠè¾“å…¥æŒ‰ç…§ä¸€å®šçš„æ ¼å¼è¿›è¡Œè½¬æ¢</p>
<h3 id="%E5%9B%BE%E7%89%87%E8%BE%93%E5%85%A5">å›¾ç‰‡è¾“å…¥</h3>
<p>ç›´æ¥ä¼ é€’å›¾ç‰‡åœ°å€, è¿™ä¸ªæ–¹å¼å¯èƒ½ç”±äºAIæ— æ³•è·å–å›¾ç‰‡å¤±è´¥</p>

<pre class="language-python"><code class="language-python">import base64 # è¿™æ˜¯ä¸€ä¸ªç¼–ç åº“, ç”¨äºç¼–ç å’Œè§£ç äºŒè¿›åˆ¶æ•°æ®
import httpx # è¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥ HTTP å®¢æˆ·ç«¯åº“
from langchain_core.messages import HumanMessage
from langchain_openai import ChatOpenAI
from Siliconflow import CustomLLM_Siliconflow


image_url = &quot;https://th.bing.com/th/id/R.6b5df1bfe0e4778a44dba0753cd169c8?rik=QRQIMqvjWRCO5Q&amp;riu=http%3a%2f%2fpic39.nipic.com%2f20140321%2f8857347_232251363165_2.jpg&amp;ehk=7oAaMo6LCHJc%2bqpQ0IPvcH7v69jGRQhb2vDz%2fOd5720%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0&quot;

# æ–¹å¼1: ç›´æ¥ä¼ å…¥ç½‘å€
model = ChatOpenAI(model=&quot;gpt-4o&quot;)
message = HumanMessage(
    content=[
        {
            &quot;type&quot;: &quot;text&quot;, &quot;text&quot;: &quot;æè¿°è¿™ä¸ªå›¾ç‰‡é‡Œé¢çš„å†…å®¹&quot;
        },
        {
            &quot;type&quot;: &quot;image_url&quot;, &quot;image_url&quot;: {&quot;url&quot;: image_url}
        }
    ]
)
</code></pre>
<p>ä¹Ÿå¯ä»¥æŠŠå›¾ç‰‡çš„æ•°æ®ç›´æ¥ä¼ è¿‡å»</p>

<pre class="language-python"><code class="language-python">import base64 # è¿™æ˜¯ä¸€ä¸ªç¼–ç åº“, ç”¨äºç¼–ç å’Œè§£ç äºŒè¿›åˆ¶æ•°æ®
import httpx # è¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥ HTTP å®¢æˆ·ç«¯åº“
from langchain_core.messages import HumanMessage
from langchain_openai import ChatOpenAI
from Siliconflow import CustomLLM_Siliconflow


image_url = &quot;https://th.bing.com/th/id/R.6b5df1bfe0e4778a44dba0753cd169c8?rik=QRQIMqvjWRCO5Q&amp;riu=http%3a%2f%2fpic39.nipic.com%2f20140321%2f8857347_232251363165_2.jpg&amp;ehk=7oAaMo6LCHJc%2bqpQ0IPvcH7v69jGRQhb2vDz%2fOd5720%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0&quot;
image_data = base64.b64encode(httpx.get(image_url).content).decode(&quot;utf-8&quot;) # å°†å›¾ç‰‡è½¬æ¢ä¸º base64 ç¼–ç çš„å­—ç¬¦ä¸²

message_img = HumanMessage(
    content=[
        {
            &quot;type&quot;: &quot;text&quot;, &quot;text&quot;: &quot;æè¿°è¿™ä¸ªå›¾ç‰‡é‡Œé¢çš„å†…å®¹&quot;
        },
        {
            &quot;type&quot;: &quot;image_url&quot;,
            &quot;image_url&quot;: {&quot;url&quot;: f&quot;data:image/jpeg;base64,{image_data}&quot;}
        }
    ]
)
</code></pre>

<pre class="language-python"><code class="language-python">result = model.invoke([message_img])
print(result)
</code></pre>
<h2 id="%E4%BD%BF%E7%94%A8%E5%B7%A5%E5%85%B7">ä½¿ç”¨å·¥å…·</h2>
<p>toolæœ‰æœºéƒ¨åˆ†ç»„æˆ</p>
<ul>
<li>name: åå­—, å¿…é¡»å”¯ä¸€çš„æè¿°</li>
<li>description: å·¥å…·çš„æè¿°, LLMä¹‹åä¼šä½¿ç”¨è¿™ä¸ªä½œä¸ºä¸Šä¸‹æ–‡</li>
<li>args_schema: å¯é€‰, ä½†æ˜¯å»ºè®®æä¾›æ›´å¤šçš„ä¿¡æ¯, Pydantic BaseModelçš„ç±»å‹</li>
<li>return_direct: booleanç±»å‹, ä»£ç†ç›¸å…³çš„, Trueçš„æ—¶å€™ä»£ç†åœæ­¢, ç›´æ¥å°†ç»“æœè¿”å›ç»™ç”¨æˆ·</li>
</ul>
<p>æœ‰å‡ ç§æ–¹å¼å¯ä»¥å®šä¹‰</p>
<h3 id="%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B7%A5%E5%85%B7">è‡ªå®šä¹‰å·¥å…·</h3>
<p><a href="https://python.langchain.com.cn/docs/modules/agents/tools/how_to/custom_tools"  target="_blank">å®šä¹‰è‡ªå®šä¹‰å·¥å…· | ğŸ¦œï¸ğŸ”— Langchain</a></p>
<h4 id="%40tool%E8%A3%85%E9%A5%B0%E5%99%A8">@toolè£…é¥°å™¨</h4>

<pre class="language-python"><code class="language-python">from langchain_core.tools import tool
@tool
def weather_tool(weather: Literal[&quot;æ™´æœ—çš„&quot;, &quot;å¤šäº‘çš„&quot;, &quot;å¤šé›¨çš„&quot;, &quot;ä¸‹é›ªçš„&quot;]) -&gt; None:
    &quot;&quot;&quot;Discribe the weather&quot;&quot;&quot;
    # è¿™ä¸ªå·¥å…·æ¥å—ä¸€ä¸ªå¤©æ°”å‚æ•°, å¹¶è¿”å›ä¸€ä¸ªæè¿°å¤©æ°”çš„å­—ç¬¦ä¸²
    pass

&quot;&quot;&quot;
name='weather_tool' description='Discribe the weather' args_schema=&lt;class 'langchain_core.utils.pydantic.weather_tool'&gt; func=&lt;function weather_tool at 0x7f57151d23e0&gt;
&quot;&quot;&quot;
</code></pre>
<p>å»ºç«‹ä¸€ä¸ªå·¥å…·, å·¥å…·çš„æè¿°æ˜¯ä»–çš„æ³¨é‡Š, LangChain ä¸­çš„å·¥å…·æŠ½è±¡å°† Python å‡½æ•°ä¸å®šä¹‰å‡½æ•°<strong>åç§°</strong>ã€<strong>æè¿°</strong>å’Œ<strong>é¢„æœŸå‚æ•°</strong>çš„<strong>æ¶æ„</strong>ç›¸å…³è”ã€‚</p>
<blockquote>

<pre class="language-python"><code class="language-python">print(weather_tool.name)
print(weather_tool.description)
print(weather_tool.args)
&quot;&quot;&quot;
weather_tool
Discribe the weather
{'weather': {'enum': ['æ™´æœ—çš„', 'å¤šäº‘çš„', 'å¤šé›¨çš„', 'ä¸‹é›ªçš„'], 'title': 'Weather', 'type': 'string'}}
&quot;&quot;&quot;
</code></pre>
</blockquote>
<ul>
<li>ä½¿ç”¨</li>
</ul>

<pre class="language-python"><code class="language-python">from typing import Literal
from langchain_core.messages import HumanMessage
from langchain_openai import ChatOpenAI
from Siliconflow import CustomLLM_Siliconflow
from langchain_core.tools import tool

@tool
def weather_tool(weather: Literal[&quot;æ™´æœ—çš„&quot;, &quot;å¤šäº‘çš„&quot;, &quot;å¤šé›¨çš„&quot;, &quot;ä¸‹é›ªçš„&quot;]) -&gt; None:
    &quot;&quot;&quot;Discribe the weather&quot;&quot;&quot;
    # è¿™ä¸ªå·¥å…·æ¥å—ä¸€ä¸ªå¤©æ°”å‚æ•°, å¹¶è¿”å›ä¸€ä¸ªæè¿°å¤©æ°”çš„å­—ç¬¦ä¸²
    pass

model = ChatOpenAI(model=&quot;gpt-4o&quot;)
model_with_tool = model.bind_tools([weather_tool]) # ç»‘å®šå·¥å…·

image_url = &quot;https://th.bing.com/th/id/R.6b5df1bfe0e4778a44dba0753cd169c8?rik=QRQIMqvjWRCO5Q&amp;riu=http%3a%2f%2fpic39.nipic.com%2f20140321%2f8857347_232251363165_2.jpg&amp;ehk=7oAaMo6LCHJc%2bqpQ0IPvcH7v69jGRQhb2vDz%2fOd5720%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0&quot;
# æ–¹å¼1: ç›´æ¥ä¼ å…¥ç½‘å€
message = HumanMessage(
    content=[
        {
            &quot;type&quot;: &quot;text&quot;, &quot;text&quot;: &quot;æè¿°è¿™ä¸ªå›¾ç‰‡é‡Œé¢çš„å†…å®¹&quot;
        },
        {
            &quot;type&quot;: &quot;image_url&quot;, &quot;image_url&quot;: {&quot;url&quot;: image_url}
        }
    ]
)
# å¦‚æœæ¨¡å‹æƒ³ä½¿ç”¨å·¥å…·, ä»–åªå¯ä»¥è¾“å‡ºå·¥å…·æ”¯æŒçš„è¾“å…¥, æ‰€ä»¥å¯ä»¥é™å®šæ¨¡å‹çš„è¾“å‡º
result = model.invoke([message])
print(result)
</code></pre>
<blockquote>
<ul>
<li>Create tools using the<code>@tool</code>decorator, which simplifies the process of tool creation, supporting the following:<br />
  ä½¿ç”¨ <a href="https://python.langchain.com/api_reference/core/tools/langchain_core.tools.convert.tool.html"  target="_blank">@tool</a> ä¿®é¥°å™¨åˆ›å»ºå·¥å…·ï¼Œè¿™ç®€åŒ–äº†å·¥å…·åˆ›å»ºè¿‡ç¨‹ï¼Œå¹¶æ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š</li>
<li><ul>
<li>Automatically infer the tool's <strong>name</strong>, <strong>description</strong> and <strong>expected arguments</strong>, while also supporting customization.<br />
    è‡ªåŠ¨æ¨æ–­å·¥å…·<strong>çš„åç§°</strong>ã€<strong>æè¿°</strong>å’Œ<strong>é¢„æœŸå‚æ•°</strong>ï¼ŒåŒæ—¶è¿˜æ”¯æŒè‡ªå®šä¹‰ã€‚<ul>
<li>Defining tools that return <strong>artifacts</strong> (e.g. images, dataframes, etc.)<br />
  å®šä¹‰è¿”å›<strong>å·¥ä»¶</strong>çš„å·¥å…·ï¼ˆä¾‹å¦‚å›¾åƒã€æ•°æ®å¸§ç­‰ï¼‰</li>
<li>Hiding input arguments from the schema (and hence from the model) using <strong>injected tool arguments</strong>.<br />
  ä½¿ç”¨<strong>æ³¨å…¥çš„å·¥å…·å‚æ•°</strong>ä» Schema ï¼ˆä»¥åŠæ¨¡å‹ä¸­ï¼‰ éšè—è¾“å…¥å‚æ•°ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<ul>
<li>å¼‚æ­¥</li>
</ul>
<p>é»˜è®¤çš„ä½¿ç”¨æ˜¯åŒæ­¥çš„, ä¹Ÿå¯ä»¥ä½¿ç”¨å¼‚æ­¥çš„, ä¹‹åçš„è°ƒç”¨éœ€è¦ä½¿ç”¨å¼‚æ­¥çš„æ–¹å¼</p>

<pre class="language-python"><code class="language-python">@tool
async def weather_tool(weather: Literal[&quot;æ™´æœ—çš„&quot;, &quot;å¤šäº‘çš„&quot;, &quot;å¤šé›¨çš„&quot;, &quot;ä¸‹é›ªçš„&quot;]) -&gt; None:
    &quot;&quot;&quot;Discribe the weather&quot;&quot;&quot;
    # è¿™ä¸ªå·¥å…·æ¥å—ä¸€ä¸ªå¤©æ°”å‚æ•°, å¹¶è¿”å›ä¸€ä¸ªæè¿°å¤©æ°”çš„å­—ç¬¦ä¸²
    pass
</code></pre>
<ul>
<li>å‚æ•°</li>
</ul>
<p>ä½¿ç”¨pydanticæŒ‡å®šå‚æ•°</p>

<pre class="language-python"><code class="language-python">from langchain_core.tools import tool
from pydantic import BaseModel, Field

class CalculatorInput(BaseModel):
    a: int = Field(description=&quot;ç¬¬ä¸€ä¸ªæ•°å­—&quot;)
    b: int = Field(description=&quot;ç¬¬äºŒä¸ªæ•°å­—&quot;)

@tool(&quot;multiplication-tool&quot;, args_schema=CalculatorInput, return_direct=True)
def multiplication_tool(a: int, b: int) -&gt; int:
    &quot;&quot;&quot;Multiply two numbers&quot;&quot;&quot;
    return a * b

print(multiplication_tool.name)
print(multiplication_tool.description)
print(multiplication_tool.args)
print(multiplication_tool.invoke({&quot;a&quot;: 2, &quot;b&quot;: 3}))
&quot;&quot;&quot;
multiplication-tool
Multiply two numbers
{'a': {'description': 'ç¬¬ä¸€ä¸ªæ•°å­—', 'title': 'A', 'type': 'integer'}, 'b': {'description': 'ç¬¬äºŒä¸ªæ•°å­—', 'title': 'B', 'type': 'integer'}}
6
&quot;&quot;&quot;
</code></pre>
<h4 id="StructuredTool.from_function">StructuredTool.from_function</h4>
<p>ç±»ä¼¼äºtoolä½†æ˜¯å…è®¸æ›´å¤šé…ç½®ä»¥åŠåŒæ­¥å¼‚æ­¥çš„è§„èŒƒ</p>

<pre class="language-python"><code class="language-python">from langchain_core.tools import StructuredTool
import asyncio

def multiply(a: int, b:int)-&gt;int:
    &quot;&quot;&quot;Multiply two numbers&quot;&quot;&quot;
    return a*b

async def amultiply(a: int, b:int)-&gt;int:
    &quot;&quot;&quot;Multiply two numbers&quot;&quot;&quot;
    return a*b

async def main():
    calcuator = StructuredTool.from_function(func=multiply, coroutine=amultiply)
    print(calcuator.invoke({&quot;a&quot;: 2, &quot;b&quot;: 3}))
    print(await calcuator.ainvoke({&quot;a&quot;: 2, &quot;b&quot;: 3}))

asyncio.run(main())
&quot;&quot;&quot;
6
6
&quot;&quot;&quot;
</code></pre>
<h4 id="%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86">å¼‚å¸¸å¤„ç†</h4>
<p>å·¥å…·çš„å‡ºç°å¼‚å¸¸çš„ä½¿ç”¨çš„å¤„ç†</p>

<pre class="language-python"><code class="language-python">from langchain_core.tools import StructuredTool
from langchain_core.tools import ToolException
from langchain.tools import Tool
def get_weather(city: str) -&gt; int:
    &quot;&quot;&quot;Get the weather of a city&quot;&quot;&quot;
    return ToolException(f&quot;Can't get the weather of {city}&quot;)

get_weather_tool = Tool.from_function(
    func=get_weather,
    # handle_tool_error=True,
    name=&quot;get_weather&quot;,
    description=&quot;Get the weather of a city&quot;,
)

response = get_weather_tool.invoke(&quot;Beijing&quot;)
print(response)
</code></pre>
<blockquote>
<p>You can set <code>handle_tool_error</code> to <code>True</code>, set it a unified string value, or set it as a function. If it's set as a function, the function should take a <code>ToolException</code> as a parameter and return a <code>str</code> value.</p>
<p>ä¼šä½¿ç”¨è¿™ä¸ªå¼‚å¸¸çš„è¾“å‡ºä½œä¸ºè¿”å›å€¼, æ‰‹å†Œé‡Œé¢è¯´è¿™ä¸ªå—åˆ°handle_tool_erroræ§åˆ¶, ä½†æ˜¯è¿™é‡Œå®é™…æµ‹è¯•åå‘ç°handle_tool_errorå‚æ•°æ²¡æœ‰å½±å“</p>
<p>ä½¿ç”¨StructuredToolçš„æ—¶å€™å¯ä»¥ä¼ é€’æ›´å°‘çš„å‚æ•°</p>
</blockquote>
<h4 id="%E4%BD%BF%E7%94%A8BaseTool%E5%BB%BA%E7%AB%8B%E4%B8%80%E4%B8%AA%E5%AD%90%E7%B1%BB">ä½¿ç”¨BaseToolå»ºç«‹ä¸€ä¸ªå­ç±»</h4>
<p>BaseTool ä¼šè‡ªåŠ¨ä» _run æ–¹æ³•çš„ç­¾åæ¨æ–­æ¶æ„ã€‚</p>
<h3 id="%E5%86%85%E7%BD%AE%E5%B7%A5%E5%85%B7">å†…ç½®å·¥å…·</h3>
<p>å·¥å…·å®é™…æ˜¯ä»£ç†, é“¾æˆ–è€…èŠå¤©æ¨¡å‹å’Œä¸–ç•Œäº¤äº’çš„æ–¹å¼, ä¸€èˆ¬æœ‰ä»¥ä¸‹çš„éƒ¨åˆ†</p>
<ol>
<li>å·¥å…·çš„åå­—</li>
<li>å·¥å…·çš„åŠŸèƒ½æè¿°</li>
<li>å·¥å…·çš„è¾“å…¥çš„JSONæ ¼å¼</li>
<li>è¦è°ƒç”¨çš„å‡½æ•°</li>
<li>å·¥å…·çš„ç»“æœæ˜¯ä¸æ˜¯ç›´æ¥è¿”ç»™ç”¨æˆ·, æŠŠåç§°æè¿°ä¸Šä¸‹æ–‡å‘é€ç»™å¤§æ¨¡å‹, è®©æ¨¡å‹è¿›è¡Œå·¥å…·çš„è°ƒç”¨, ä¸€èˆ¬ç»è¿‡å¾®è°ƒçš„æ¨¡å‹æ•ˆæœæ¯”è¾ƒå¥½, æ²¡æœ‰å¾®è°ƒçš„æ¨¡å‹å¯èƒ½å¤±è´¥</li>
</ol>
<h4 id="%E7%BB%B4%E5%9F%BA%E7%99%BE%E7%A7%91%E5%B7%A5%E5%85%B7">ç»´åŸºç™¾ç§‘å·¥å…·</h4>
<p><a href="https://python.langchain.com/api_reference/community/utilities/langchain_community.utilities.wikipedia.WikipediaAPIWrapper.html"  target="_blank">WikipediaAPIWrapper â€” ğŸ¦œğŸ”— LangChain documentation</a></p>

<pre class="language-python"><code class="language-python">from langchain_community.tools import WikipediaQueryRun
from langchain_community.utilities import WikipediaAPIWrapper

api_wrapper = WikipediaAPIWrapper(top_k_results=1, doc_content_chars_max=100)
tool = WikipediaQueryRun(api_wrapper=api_wrapper)
print(tool.invoke({&quot;query&quot;: &quot;Langchain&quot;}))

print(tool.name)
print(tool.description)
print(tool.args)
&quot;&quot;&quot;
Wiki-tools
A tool to query Wikipedia
{'query': {'description': 'æŸ¥è¯¢å…³é”®è¯, é•¿åº¦ä¸è¶…è¿‡10ä¸ªå­—', 'title': 'Query', 'type': 'string'}}
&quot;&quot;&quot;
</code></pre>
<p>å¯ä»¥åšä¸€ä¸‹å‚æ•°çš„å°è£…</p>

<pre class="language-python"><code class="language-python">from langchain_community.tools import WikipediaQueryRun
from langchain_community.utilities import WikipediaAPIWrapper
from pydantic import BaseModel, Field

class WikiInputs(BaseModel):
    &quot;&quot;&quot;ç»´åŸºç™¾ç§‘å·¥å…·è¾“å…¥&quot;&quot;&quot;
    query: str = Field(description=&quot;æŸ¥è¯¢å…³é”®è¯, é•¿åº¦ä¸è¶…è¿‡10ä¸ªå­—&quot;)


api_wrapper = WikipediaAPIWrapper(top_k_results=1, doc_content_chars_max=100)
tool = WikipediaQueryRun(
    api_wrapper=api_wrapper,
    name=&quot;Wiki-tools&quot;,
    description=&quot;A tool to query Wikipedia&quot;,
    args_schema=WikiInputs,
    return_direct=True
    )

print(tool.run(&quot;Langchain&quot;))

print(tool.name)
print(tool.description)
print(tool.args)
&quot;&quot;&quot;
Wiki-tools
A tool to query Wikipedia
{'query': {'description': 'æŸ¥è¯¢å…³é”®è¯, é•¿åº¦ä¸è¶…è¿‡10ä¸ªå­—', 'title': 'Query', 'type': 'string'}}
&quot;&quot;&quot;
</code></pre>
<h4 id="SQL%E5%A4%84%E7%90%86">SQLå¤„ç†</h4>
<p><a href="https://www.langchain.com.cn/docs/integrations/tools/sql_database/"  target="_blank">LangChainä¸­æ–‡ç½‘</a></p>

<pre class="language-python"><code class="language-python">from langchain_openai import ChatOpenAI
from langchain_community.agent_toolkits.sql.base import create_sql_agent
from langchain.agents.agent_types import AgentType
from langchain_community.utilities import SQLDatabase
from langchain_community.agent_toolkits.sql.toolkit import SQLDatabaseToolkit

import sqlite3
import requests
from sqlalchemy import create_engine
from sqlalchemy.pool import StaticPool

# è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯ä»ä¸€ä¸ªè¿œç¨‹çš„SQLè„šæœ¬ä¸­åˆ›å»ºä¸€ä¸ªåœ¨å†…å­˜ä¸­çš„SQLiteæ•°æ®åº“ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ•°æ®åº“å¼•æ“å¯¹è±¡ã€‚
def get_engine_for_chinook_db():
    &quot;&quot;&quot;ä»SQLè„šæœ¬åˆ›å»ºå†…å­˜æ•°æ®åº“å¹¶è¿”å›å¼•æ“å¯¹è±¡ã€‚&quot;&quot;&quot;
    url = &quot;https://raw.githubusercontent.com/lerocha/chinook-database/master/ChinookDatabase/DataSources/Chinook_Sqlite.sql&quot;
    response = requests.get(url)
    sql_script = response.text

    connection = sqlite3.connect(&quot;:memory:&quot;, check_same_thread=False)
    connection.executescript(sql_script)
    return create_engine(
        &quot;sqlite://&quot;,
        creator=lambda: connection,
        poolclass=StaticPool,
        connect_args={&quot;check_same_thread&quot;: False},
    )

engine = get_engine_for_chinook_db()

db = SQLDatabase(engine)
# db = SQLDatabase.from_uri(&quot;sqlite:///langchain.db&quot;)

# å»ºç«‹ä¸€ä¸ªSQLå·¥å…·ç®±å¯¹è±¡, ç”¨äºæ‰§è¡ŒSQLæŸ¥è¯¢, å¯ä»¥ç»‘å®šLLMæ¨¡å‹
toolkit = SQLDatabaseToolkit(db=db, llm=ChatOpenAI(temperature=0))
# print(toolkit.get_tools())

agent_exector = create_sql_agent(
    llm=ChatOpenAI(temperature=0),
    toolkit=toolkit,
    verbose=False,
    agent_type=AgentType.OPENAI_FUNCTIONS
)

result = agent_exector.invoke(&quot;Create a full_llm_cache table&quot;)
print(result)
</code></pre>
<h2 id="%E6%8C%87%E5%AE%9A%E6%A0%BC%E5%BC%8F%E8%BE%93%E5%87%BA">æŒ‡å®šæ ¼å¼è¾“å‡º</h2>
<p>å¦‚æœè¾“å‡ºçš„æ ¼å¼æ˜¯ä¸€ä¸ªjson, xmlæˆ–è€…yaml, ä½†æ˜¯å¤§æ¨¡å‹çš„è¾“å‡ºå¯ä»¥èƒ½æ˜¯ä¸€ä¸ªæ··ä¹±çš„æ ¼å¼, æ‰€ä»¥ä½¿ç”¨çš„æ¨¡å‹å¿…é¡»è¶³å¤Ÿå¤§</p>
<p>å¯ä»¥ä½¿ç”¨JsonOutputParserè¿›è¡Œæç¤ºå¹¶ä¸”è§£æå¤§æ¨¡å‹çš„è¾“å‡º, ä¹Ÿå¯ä»¥ä½¿ç”¨PydanticOutputParser, Jsonçš„è¾“å‡ºæ˜¯å†…ç½®çš„, æ”¯æŒæµå¼è¿”å›</p>
<blockquote>
<p>Pydanticç¤ºä¾‹, <a href="https://blog.csdn.net/codename_cys/article/details/107675748"  target="_blank">Pythonç¬”è®°ï¼šPydanticåº“ç®€ä»‹-CSDNåšå®¢</a></p>

<pre class="language-python"><code class="language-python">from pydantic import BaseModel

class Person(BaseModel):
    name: str

p = Person(name=&quot;Tom&quot;)
print(p.json()) # {&quot;name&quot;: &quot;Tom&quot;}
</code></pre>
</blockquote>

<pre class="language-python"><code class="language-python">from langchain_core.output_parsers import JsonOutputParser
from langchain_openai import ChatOpenAI
from langchain_core.prompts import PromptTemplate
from langchain_core.pydantic_v1 import BaseModel, Field



model = ChatOpenAI(model=&quot;gpt-4o&quot;)
# æè¿°è¾“å‡ºçš„å…·ä½“æ ¼å¼
class Joke(BaseModel):
    setup: str = Field(description=&quot;è®¾ç½®ç¬‘è¯çš„é—®é¢˜&quot;)
    punchline: str = Field(description=&quot;è§£å†³ç¬‘è¯çš„ç­”æ¡ˆ&quot;)

joke_query = &quot;å‘Šè¯‰æˆ‘ä¸€ä¸ªç¬‘è¯&quot;

parser = JsonOutputParser(pydantic_object=Joke)
prompt = PromptTemplate(
    template=&quot;å›ç­”ç”¨æˆ·çš„é—®é¢˜, \n{format_instructions}\n{query}\n&quot;,
    input_variables=[&quot;query&quot;],
    partial_variables={&quot;format_instructions&quot;: parser.get_format_instructions()}
)

chain = prompt |  model | parser
message = chain.invoke({&quot;query&quot;: joke_query})
print(message)
&quot;&quot;&quot;
{'setup': 'ä¸ºä»€ä¹ˆç¨‹åºå‘˜ä¸é¥¿ï¼Ÿ', 'punchline': 'å› ä¸ºä»–ä»¬æœ‰å¾ˆå¤šçš„ç¼“å­˜ã€‚'}
&quot;&quot;&quot;
</code></pre>
<p>å¯ä»¥çœ‹ä¸€ä¸‹è¾“å…¥çš„æ¨¡æ¿, å¦‚æœä¸ä½¿ç”¨è¿™ä¸ªæ¨¡ç‰ˆ, å®é™…çš„è¾“å‡ºä¼šæœ‰éšæœºæ€§</p>

<pre class="language-python"><code class="language-python">print(parser.get_format_instructions())
&quot;&quot;&quot;
The output should be formatted as a JSON instance that conforms to the JSON schema below.
As an example, for the schema 
{
    &quot;properties&quot;: {
    	&quot;foo&quot;: {
    		&quot;title&quot;: &quot;Foo&quot;, 
    		&quot;description&quot;: &quot;a list of strings&quot;, 
    		&quot;type&quot;: &quot;array&quot;, 
    		&quot;items&quot;: {&quot;type&quot;: &quot;string&quot;}
    	}
    }, 
    &quot;required&quot;: [&quot;foo&quot;]
}
the object {&quot;foo&quot;: [&quot;bar&quot;, &quot;baz&quot;]} is a well-formatted instance of the schema. The object {&quot;properties&quot;: {&quot;foo&quot;: [&quot;bar&quot;, &quot;baz&quot;]}} is not well-formatted.

Here is the output schema:
```
{
    &quot;properties&quot;: {
    	&quot;setup&quot;: {
    		&quot;title&quot;: &quot;Setup&quot;,
             &quot;description&quot;: &quot;è®¾ç½®ç¬‘è¯çš„é—®é¢˜&quot;, 
             &quot;type&quot;: &quot;string&quot;
         }, 
         &quot;punchline&quot;: {
             &quot;title&quot;: &quot;Punchline&quot;, 
             &quot;description&quot;: 
             &quot;è§£å†³ç¬‘è¯çš„ç­”æ¡ˆ&quot;, 
             &quot;type&quot;: &quot;string&quot;
          }
     }, 
     &quot;required&quot;: [&quot;setup&quot;, &quot;punchline&quot;]
}
```
&quot;&quot;&quot;
</code></pre>
<p>å¯ä»¥ä½¿ç”¨æµå¼è¾“å‡º</p>

<pre class="language-python"><code class="language-python">for s in chain.stream({&quot;query&quot;: joke_query}):
    print(s)
&quot;&quot;&quot;
{}
{'setup': ''}
{'setup': 'ä¸ºä»€ä¹ˆ'}
{'setup': 'ä¸ºä»€ä¹ˆè¶³çƒ'}
{'setup': 'ä¸ºä»€ä¹ˆè¶³çƒæ¯”èµ›'}
{'setup': 'ä¸ºä»€ä¹ˆè¶³çƒæ¯”èµ›æ€»'}
{'setup': 'ä¸ºä»€ä¹ˆè¶³çƒæ¯”èµ›æ€»æ˜¯åœ¨'}
{'setup': 'ä¸ºä»€ä¹ˆè¶³çƒæ¯”èµ›æ€»æ˜¯åœ¨ç¯'}
{'setup': 'ä¸ºä»€ä¹ˆè¶³çƒæ¯”èµ›æ€»æ˜¯åœ¨ç¯å…‰'}
{'setup': 'ä¸ºä»€ä¹ˆè¶³çƒæ¯”èµ›æ€»æ˜¯åœ¨ç¯å…‰ä¸‹'}
{'setup': 'ä¸ºä»€ä¹ˆè¶³çƒæ¯”èµ›æ€»æ˜¯åœ¨ç¯å…‰ä¸‹ï¼Ÿ'}
{'setup': 'ä¸ºä»€ä¹ˆè¶³çƒæ¯”èµ›æ€»æ˜¯åœ¨ç¯å…‰ä¸‹ï¼Ÿ', 'punchline': ''}
{'setup': 'ä¸ºä»€ä¹ˆè¶³çƒæ¯”èµ›æ€»æ˜¯åœ¨ç¯å…‰ä¸‹ï¼Ÿ', 'punchline': 'å› ä¸º'}
{'setup': 'ä¸ºä»€ä¹ˆè¶³çƒæ¯”èµ›æ€»æ˜¯åœ¨ç¯å…‰ä¸‹ï¼Ÿ', 'punchline': 'å› ä¸ºè§‚'}
{'setup': 'ä¸ºä»€ä¹ˆè¶³çƒæ¯”èµ›æ€»æ˜¯åœ¨ç¯å…‰ä¸‹ï¼Ÿ', 'punchline': 'å› ä¸ºè§‚ä¼—'}
{'setup': 'ä¸ºä»€ä¹ˆè¶³çƒæ¯”èµ›æ€»æ˜¯åœ¨ç¯å…‰ä¸‹ï¼Ÿ', 'punchline': 'å› ä¸ºè§‚ä¼—ä»¬'}
{'setup': 'ä¸ºä»€ä¹ˆè¶³çƒæ¯”èµ›æ€»æ˜¯åœ¨ç¯å…‰ä¸‹ï¼Ÿ', 'punchline': 'å› ä¸ºè§‚ä¼—ä»¬éœ€è¦'}
{'setup': 'ä¸ºä»€ä¹ˆè¶³çƒæ¯”èµ›æ€»æ˜¯åœ¨ç¯å…‰ä¸‹ï¼Ÿ', 'punchline': 'å› ä¸ºè§‚ä¼—ä»¬éœ€è¦çœ‹åˆ°'}
{'setup': 'ä¸ºä»€ä¹ˆè¶³çƒæ¯”èµ›æ€»æ˜¯åœ¨ç¯å…‰ä¸‹ï¼Ÿ', 'punchline': 'å› ä¸ºè§‚ä¼—ä»¬éœ€è¦çœ‹åˆ°è¿›'}
{'setup': 'ä¸ºä»€ä¹ˆè¶³çƒæ¯”èµ›æ€»æ˜¯åœ¨ç¯å…‰ä¸‹ï¼Ÿ', 'punchline': 'å› ä¸ºè§‚ä¼—ä»¬éœ€è¦çœ‹åˆ°è¿›çƒ'}
{'setup': 'ä¸ºä»€ä¹ˆè¶³çƒæ¯”èµ›æ€»æ˜¯åœ¨ç¯å…‰ä¸‹ï¼Ÿ', 'punchline': 'å› ä¸ºè§‚ä¼—ä»¬éœ€è¦çœ‹åˆ°è¿›çƒï¼'}
&quot;&quot;&quot;
</code></pre>
<h3 id="YAML%E8%BE%93%E5%87%BA">YAMLè¾“å‡º</h3>
<p>è¿™ä¸ªæ ¼å¼çš„å®é™…ä½¿ç”¨å’ŒJSONçš„ä½¿ç”¨æ˜¯ä¸€æ ·çš„</p>
<h3 id="XML%E6%A0%BC%E5%BC%8F">XMLæ ¼å¼</h3>
<p>å¯ä»¥ä½¿ç”¨XMLOutputParserè¿›è¡Œè¾“å‡º, ä½¿ç”¨<code>tags=[&quot;&quot;, &quot;&quot;]</code>å¯ä»¥æŒ‡å®šå®é™…è¾“å‡ºçš„æ ‡ç­¾, ä¹‹åçš„è¾“å‡ºä¼šæŒ‰ç…§è¿™ä¸ªçš„å±‚çº§è¿›è¡Œè¾“å‡º, å¦‚æœä½¿ç”¨çš„æ˜¯æµå¼è¾“å‡º, å®é™…çš„ç»“æœè¿˜æ˜¯json</p>

<pre class="language-python"><code class="language-python">from langchain_core.output_parsers import XMLOutputParser
from langchain_openai import ChatOpenAI
from langchain_core.prompts import PromptTemplate

model = ChatOpenAI(model=&quot;gpt-3.5-turbo-1106&quot;)

joke_query = &quot;ç”Ÿæˆå‘¨æ˜Ÿé©°çš„ç”µå½±ä½œå“, å®‰è£…æ—¶é—´é¡ºåºè¿›è¡Œæ’åº&quot;

parser = XMLOutputParser(tags=[&quot;movie&quot;, &quot;actor&quot;, &quot;film&quot;, &quot;genre&quot;,&quot;time&quot;])
prompt = PromptTemplate(
    template=&quot;å›ç­”ç”¨æˆ·çš„é—®é¢˜, \n{format_instructions}\n{query}\n&quot;,
    input_variables=[&quot;query&quot;],
    partial_variables={&quot;format_instructions&quot;: parser.get_format_instructions()}
)

chain = prompt |  model | parser
message = chain.invoke({&quot;query&quot;: joke_query})
print(message)
</code></pre>
<h2 id="%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%9E%8B">è‡ªå®šä¹‰æ¨¡å‹</h2>
<p><a href="https://python.langchain.com/v0.1/docs/modules/model_io/llms/custom_llm/"  target="_blank">Custom LLM | ğŸ¦œï¸ğŸ”— LangChain</a></p>
<p>éœ€è¦å®ç°ä¸¤ä¸ªå‡½æ•°,</p>
<p><a href="https://cloud.tencent.com/developer/article/2467458"  target="_blank">ä½¿ç”¨LangChainè‡ªå®šä¹‰å¤§æ¨¡å‹ | å®Œç¾è°ƒç”¨ç¬¬ä¸‰æ–¹ API | å¦‚OneAPI/ç¡…åŸºæµåŠ¨-è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘</a></p>

                        
                    </div>
                </div>
                <div id="previous_next">
                    <div id="previous">
                        
                        <a href="/note/æœºå™¨å­¦ä¹ /å®é™…åº”ç”¨/2025-2-16-langChain.html">
                            <span class="icon"></span>
                            <span class="label">2025-2-16-langChain</span>
                        </a>
                        
                    </div>
                    <div id="next">
                        
                        <a href="/note/æœºå™¨å­¦ä¹ /å®é™…åº”ç”¨/2025-2-26-Loraå¾®è°ƒ.html">
                            <span class="label">2025-2-26-Loraå¾®è°ƒ</span>
                            <span class="icon"></span>
                        </a>
                        
                    </div>
                </div>
                <div id="comments-container"></div>
            </div>
            <div id="toc_wrapper">
                <div id="toc">
                    <div id="toc_content">
                            
                    </div>
                </div>
            </div>
        </div>
    </div>
    <a id="to_top" href="#"></a>
    <div id="doc_footer">
        <div id="footer">
            <div id="footer_top">
                <ul>
<li><a>é“¾æ¥</a><ul><li><a target="_blank" href="https://teedoc.neucrack.com">ç½‘ç«™ä½¿ç”¨ teedoc ç”Ÿæˆ</a></li>
<li><a target="_blank" href="https://neucrack.com">Copyright Â© 2021 Neucrack</a></li>
<li><a  href="/note/sitemap.xml">ç½‘ç«™åœ°å›¾</a></li>
</ul>
</li>
<li><a>æºç </a><ul><li><a target="_blank" href="https://github.com/XuSenfeng/note/">github</a></li>
<li><a target="_blank" href="https://github.com/teedoc/teedoc">æœ¬ç½‘ç«™æºæ–‡ä»¶</a></li>
</ul>
</li>
</ul>

            </div>
            <div id="footer_bottom">
                <ul>
<li><a target="_blank" href="https://beian.miit.gov.cn">æ¸ICPå¤‡19015320å·</a></li>
<li><a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44030602004109">ç²¤å…¬ç½‘å®‰å¤‡44030602004109å·</a></li>
</ul>

            </div>
        </div>
    </div>
    
        <script src="/note/teedoc-plugin-markdown-parser/mermaid.min.js"></script>
    
        <script>mermaid.initialize({startOnLoad:true});</script>
    
        <script type="text/javascript">
                var transLoaded = false;
                var loading = false;
                var domain = "translate.google.com";
                var domainDefault = domain;
                var storeDomain = localStorage.getItem("googleTransDomain");
                if(storeDomain){
                    domain = storeDomain;
                    console.log("load google translate domain from local storage:" + domain);
                }
                function getUrl(domain){
                    if(domain == "/")
                        return "/static/js/google_translate/element.js?cb=googleTranslateElementInit";
                    else
                        return "https://" + domain + "/translate_a/element.js?cb=googleTranslateElementInit";
                }
                var url = getUrl(domain);
                console.log("google translate domain:" + domain + ", url: " + url);
                function googleTranslateElementInit() {
                    new google.translate.TranslateElement({pageLanguage: "auto", layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
                }
                function loadJS( url, callback ){
                    var script = document.createElement('script');
                    fn = callback || function(){ };
                    script.type = 'text/javascript';
                    if(script.readyState){
                        script.onreadystatechange = function(){
                            if( script.readyState == 'loaded' || script.readyState == 'complete' ){
                                script.onreadystatechange = null;
                                fn();
                            }
                        };
                    }else{
                        script.onload = function(){
                            fn();
                        };
                    }
                    script.src = url;
                    document.getElementsByTagName('head')[0].appendChild(script);
                }
                function removeHint(){
                    var hint = document.getElementById("loadingTranslate");
                    if(hint){
                        hint.remove();
                    }
                }
                var btn = document.getElementById("google_translate_element");
                btn.onclick = function(){
                    if(transLoaded) return;
                    if(loading){
                        var flag = confirm("loading from " + domain + ", please wait, or change domain?");
                        if(flag){
                            newDomain = prompt("domain, default: " + domainDefault + ", now: " + domain);
                            if(newDomain){
                                domain = newDomain;
                                console.log(domain);
                                url = getUrl(domain);
                                loadJS(url, function(){
                                    localStorage.setItem("googleTransDomain", domain);
                                    removeHint()
                                    transLoaded = true;
                                });
                            }
                        }
                        return;
                    }
                    btn.innerHTML = '<span id="loadingTranslate"><img class="icon" src="/note/static/image/google_translate/translate.svg"/>Loading ...</span>';
                    loading = true;
                    loadJS(url, function(){
                        localStorage.setItem("googleTransDomain", domain);
                        removeHint()
                        transLoaded = true;
                    });
                }
                </script>
            
    
        <script src="/note/static/js/theme_default/tocbot.min.js"></script>
    
        <script src="/note/static/js/theme_default/main.js"></script>
    
        <script src="/note/static/js/theme_default/viewer.min.js"></script>
    
        <script src="/note/static/css/theme_default/prism.min.js"></script>
    
        <script src="/note/static/js/search/search_main.js"></script>
    
        <script src="/note/static/js/plugin_blog/main.js"></script>
    
        <link rel="stylesheet" href="/note/static/js/add_hint/style.css" type="text/css"/>
    
        <script src="/note/static/js/add_hint/main.js"></script>
    
        <script src="/note/static/js/gitalk/gitalk.min.js"></script>
    
        <script src="/note/static/js/gitalk/main.js"></script>
    
        <script src="/note/static/js/custom.js"></script>
    
</body>

</html>