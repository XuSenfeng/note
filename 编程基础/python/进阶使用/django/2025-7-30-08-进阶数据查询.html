<!DOCTYPE html>

<html lang="zh-CN"  class="">


<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="keywords" content="">
    
    
    <meta name="description" content="">
    
    <meta name="generator" content="teedoc">
    <meta name="theme" content="teedoc-plugin-theme-default">
    
        
        <meta name="markdown-generator" content="teedoc-plugin-markdown-parser">
        
        <script>
MathJax = {"loader": {"load": ["output/svg"]}, "tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]]}, "svg": {"fontCache": "global"}};
</script>
        
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        
        <meta name="html-generator" content="teedoc-plugin-jupyter-notebook-parser">
        
        <script src="/note/static/js/theme_default/pre_main.js"></script>
        
        <link rel="stylesheet" href="/note/static/css/theme_default/prism.min.css" type="text/css"/>
        
        <link rel="stylesheet" href="/note/static/css/theme_default/viewer.min.css" type="text/css"/>
        
        <link rel="stylesheet" href="/note/static/css/theme_default/dark.css" type="text/css"/>
        
        <link rel="stylesheet" href="/note/static/css/theme_default/light.css" type="text/css"/>
        
        <script src="/note/static/js/theme_default/jquery.min.js"></script>
        
        <script src="/note/static/js/theme_default/split.js"></script>
        
        <link rel="stylesheet" href="/note/static/css/search/style.css" type="text/css"/>
        
        <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?4d52982572d5512e9762879ebf063c86";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
        
        <meta name="blog-generator" content="teedoc-plugin-blog">
        
        <link rel="stylesheet" href="/note/static/css/gitalk/gitalk.css" type="text/css"/>
        
        <link rel="stylesheet" href="/note/static/css/gitalk/custom_gitalk.css" type="text/css"/>
        
        <link rel="stylesheet" href="/note/static/css/custom.css" type="text/css"/>
        
    
    
    <title>è¿›é˜¶æ•°æ®æŸ¥è¯¢ - XvSenfeng's Note</title>
    
    <script type="text/javascript">js_vars = {"teedoc-plugin-ad-hint": {"type": "hint", "label": "â˜†", "content": "è¿™æ˜¯ä¸€ä¸ªæ”¯æŒå›½é™…åŒ–çš„æ¶ˆæ¯ç¤ºä¾‹</br>å–œæ¬¢é¡¹ç›®è¯·<a target=\"_blank\" href=\"https://github.com/teedoc/teedoc\">ç‚¹ä¸‹ â˜† star </a>å“¦~ğŸ¦€ğŸ¦€", "show_times": 2, "show_after_s": 432000, "date": "2021-11-16 14:40", "color": "#a0421d", "link_color": "#e53935", "link_bg_color": "#e6ae5c", "bg_color": "#ffcf89", "color_hover": "white", "bg_color_hover": "#f57c00", "close_color": "#eab971"}}</script>
    <script type="text/javascript">metadata = {"tags": [], "date": null, "update": [], "ts": 0, "author": "", "brief": "", "cover": ""}</script>
</head>


<body class="type_doc">
    
    <div id="navbar">
        <div id="navbar_menu">
            <a class="site_title" href="/note/">
                
                    <img class="site_logo" src="/note/static/image/logo.png" alt="XvSenfeng logo">
                
                
                    <h2>XvSenfeng</h2>
                
        </a>
            <a id="navbar_menu_btn"></a>
        </div>
        <div id="navbar_items">
            <div>
                <ul id="nav_left">
<li class=""><a  href="/note/blog/">åšå®¢</a></li>
<li class=""><a  href="/note/Linux/">Linux</a></li>
<li class=""><a  href="/note/ä»£ç åˆ†æ/">ä»£ç åˆ†æ</a></li>
<li class=""><a  href="/note/ä½¿ç”¨è½¯ä»¶/">ä½¿ç”¨è½¯ä»¶</a></li>
<li class=""><a  href="/note/åµŒå…¥å¼/">åµŒå…¥å¼</a></li>
<li class=""><a  href="/note/æ‰‹æœºå®‰å“/">æ‰‹æœºå®‰å“</a></li>
<li class=""><a  href="/note/æœºå™¨å­¦ä¹ /">æœºå™¨å­¦ä¹ </a></li>
<li class="active"><a  href="/note/ç¼–ç¨‹åŸºç¡€/">ç¼–ç¨‹åŸºç¡€</a></li>
<li class=""><a  href="/note/ç½‘ç»œ/">ç½‘ç»œ</a></li>
</ul>

            </div>
            <div>
                <ul id="nav_right">
<li class=""><a target="_blank" href="https://github.com/XuSenfeng/note/">github</a></li>
</ul>

                <ul class="nav_plugins"><li><a id="google_translate_element"><img class="icon" src="/note/static/image/google_translate/translate.svg"/>Translate</a></li></ul><ul class="nav_plugins"><li><a id="themes" class="light"></a></li></ul><ul class="nav_plugins"><li><a id="search"><span class="icon"></span><span class="placeholder">æœç´¢</span>
                            <div id="search_hints">
                                <span id="search_input_hint">è¾“å…¥å…³é”®è¯ï¼Œå¤šå…³é”®è¯ç©ºæ ¼éš”å¼€</span>
                                <span id="search_loading_hint">æ­£åœ¨åŠ è½½ï¼Œè¯·ç¨å€™ã€‚ã€‚ã€‚</span>
                                <span id="search_download_err_hint">ä¸‹è½½æ–‡ä»¶å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•æˆ–æ£€æŸ¥ç½‘ç»œ</span>
                                <span id="search_other_docs_result_hint">æ¥è‡ªå…¶å®ƒæ–‡æ¡£çš„ç»“æœ</span>
                                <span id="search_curr_doc_result_hint">å½“å‰æ–‡æ¡£æœç´¢ç»“æœ</span>
                            </div></a></li></ul>
            </div>
        </div>
    </div>
    
    <div id="wrapper">
        <div id="sidebar_wrapper">
            <div id="sidebar">
                <div id="sidebar_title">
                    
                </div>
                <ul class="show">
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/index.html"><span class="label">README</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">C#</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/no_translate.html?ref=C.html&from=/ç¼–ç¨‹åŸºç¡€/C.html"><span class="label">2023-6-24-1.C#</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">Cå’ŒæŒ‡é’ˆ</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/Cå’ŒæŒ‡é’ˆ/2022-7-25-Cè¯­è¨€ç¯å¢ƒ.html"><span class="label">2022-7-25-Cè¯­è¨€ç¯å¢ƒ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/Cå’ŒæŒ‡é’ˆ/2022-7-25-å­—ç¬¦ä¸²æ“ä½œ.html"><span class="label">2022-7-25-å­—ç¬¦ä¸²æ“ä½œ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/Cå’ŒæŒ‡é’ˆ/2022-7-25-æ“ä½œç¬¦å’Œè¡¨è¾¾å¼.html"><span class="label">2022-7-25-æ“ä½œç¬¦å’Œè¡¨è¾¾å¼</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/Cå’ŒæŒ‡é’ˆ/2022-7-25-æ•°æ®.html"><span class="label">2022-7-25-æ•°æ®</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/Cå’ŒæŒ‡é’ˆ/2022-7-25-è¯æ³•è§„åˆ™.html"><span class="label">2022-7-25-è¯æ³•è§„åˆ™</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/Cå’ŒæŒ‡é’ˆ/2022-7-25-è¯­å¥.html"><span class="label">2022-7-25-è¯­å¥</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/Cå’ŒæŒ‡é’ˆ/2022-7-26-å‡½æ•°.html"><span class="label">2022-7-26-å‡½æ•°</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/Cå’ŒæŒ‡é’ˆ/2022-7-26-æŒ‡é’ˆ.html"><span class="label">2022-7-26-æŒ‡é’ˆ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/Cå’ŒæŒ‡é’ˆ/2022-7-26-æ•°ç»„.html"><span class="label">2022-7-26-æ•°ç»„</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/Cå’ŒæŒ‡é’ˆ/2022-7-26-è¡¨è¾¾å¼.html"><span class="label">2022-7-26-è¡¨è¾¾å¼</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/Cå’ŒæŒ‡é’ˆ/2022-7-27-åŠ¨æ€å†…å­˜åˆ†é….html"><span class="label">2022-7-27-åŠ¨æ€å†…å­˜åˆ†é…</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/Cå’ŒæŒ‡é’ˆ/2022-7-27-å­—ç¬¦ä¸²å­—ç¬¦å­—èŠ‚.html"><span class="label">2022-7-27-å­—ç¬¦ä¸²å­—ç¬¦å­—èŠ‚</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/Cå’ŒæŒ‡é’ˆ/2022-7-27-ç»“æ„ä½“å’ŒæŒ‡é’ˆ.html"><span class="label">2022-7-27-ç»“æ„ä½“å’ŒæŒ‡é’ˆ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/Cå’ŒæŒ‡é’ˆ/2022-7-27-ç»“æ„å’Œè”åˆ.html"><span class="label">2022-7-27-ç»“æ„å’Œè”åˆ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/Cå’ŒæŒ‡é’ˆ/2022-7-28-é¢„å¤„ç†å™¨.html"><span class="label">2022-7-28-é¢„å¤„ç†å™¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/Cå’ŒæŒ‡é’ˆ/2022-7-28-é«˜çº§æŒ‡é’ˆ.html"><span class="label">2022-7-28-é«˜çº§æŒ‡é’ˆ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/Cå’ŒæŒ‡é’ˆ/2022-7-29-è¾“å…¥è¾“å‡ºå‡½æ•°.html"><span class="label">2022-7-29-è¾“å…¥è¾“å‡ºå‡½æ•°</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/Cå’ŒæŒ‡é’ˆ/2022-7-30-æ ‡å‡†åº“å‡½æ•°.html"><span class="label">2022-7-30-æ ‡å‡†åº“å‡½æ•°</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/Cå’ŒæŒ‡é’ˆ/2022-7-30-ç»å…¸æŠ½è±¡æ•°æ®ç±»å‹.html"><span class="label">2022-7-30-ç»å…¸æŠ½è±¡æ•°æ®ç±»å‹</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/Cå’ŒæŒ‡é’ˆ/2022-7-31-è¿è¡Œæ—¶ç¯å¢ƒ.html"><span class="label">2022-7-31-è¿è¡Œæ—¶ç¯å¢ƒ</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">Cé™·é˜±ä¸ç¼ºé™·</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/Cé™·é˜±ä¸ç¼ºé™·/2022-8-26-å‡½æ•°.html"><span class="label">2022-8-26-å‡½æ•°</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/Cé™·é˜±ä¸ç¼ºé™·/2022-8-27-è¯­ä¹‰é™·é˜±.html"><span class="label">2022-8-27-è¯­ä¹‰é™·é˜±</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">c</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/c/2023-6-16-cç›‘æ§.html"><span class="label">2023-6-16-cç›‘æ§</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/c/2023-6-19-Cè¯­è¨€ç¨‹åºè®¾è®¡.html"><span class="label">2023-6-19-Cè¯­è¨€ç¨‹åºè®¾è®¡</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">cpp</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/cpp/2025-1-1-01C++.html"><span class="label">2025-1-1-01C++</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/cpp/2025-1-1-02å†…å­˜.html"><span class="label">2025-1-1-02å†…å­˜</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/cpp/2025-1-22-å…¶ä»–æ‰©å±•è¯­æ³•.html"><span class="label">2025-1-22-å…¶ä»–æ‰©å±•è¯­æ³•</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/cpp/2025-1-26-å¤šçº¿ç¨‹.html"><span class="label">2025-1-26-å¤šçº¿ç¨‹</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/cpp/2025-1-6-03æ¨¡æ¿å’ŒSTL.html"><span class="label">2025-1-6-03æ¨¡æ¿å’ŒSTL</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">go</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/go/2022-8-26-å‡½æ•°.html"><span class="label">2022-8-26-å‡½æ•°</span><span class=""></span></a></li>
</ul>
</li>
<li class="active_parent no_link"><a><span class="label">python</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active no_link"><a><span class="label">åŸºç¡€è¯­æ³•</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/åŸºç¡€è¯­æ³•/2023-6-15-ä¿®é¥°å™¨.html"><span class="label">2023-6-15-ä¿®é¥°å™¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/åŸºç¡€è¯­æ³•/2023-9-23-01åŸºç¡€è¿ç®—.html"><span class="label">2023-9-23-01åŸºç¡€è¿ç®—</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/åŸºç¡€è¯­æ³•/2023-9-24-02å‡½æ•°åŠå˜é‡.html"><span class="label">2023-9-24-02å‡½æ•°åŠå˜é‡</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/åŸºç¡€è¯­æ³•/2024-4-23-03è™šæ‹Ÿç¯å¢ƒ.html"><span class="label">2024-4-23-03è™šæ‹Ÿç¯å¢ƒ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/åŸºç¡€è¯­æ³•/2024-4-23-04å¸¸ç”¨å‡½æ•°.html"><span class="label">2024-4-23-04å¸¸ç”¨å‡½æ•°</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/åŸºç¡€è¯­æ³•/2024-4-24-05ç¨‹åºè·å–å‚æ•°.html"><span class="label">2024-4-24-05ç¨‹åºè·å–å‚æ•°</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/åŸºç¡€è¯­æ³•/2024-4-25-06æ¨å¯¼å¼å’Œæ‹†åŒ….html"><span class="label">2024-4-25-06æ¨å¯¼å¼å’Œæ‹†åŒ…</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/åŸºç¡€è¯­æ³•/2024-4-25-07å¼•å…¥.html"><span class="label">2024-4-25-07å¼•å…¥</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/åŸºç¡€è¯­æ³•/2024-4-25-08åŒ¿åå‡½æ•°.html"><span class="label">2024-4-25-08åŒ¿åå‡½æ•°</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/åŸºç¡€è¯­æ³•/2024-4-25-09é¢å‘å¯¹è±¡.html"><span class="label">2024-4-25-09é¢å‘å¯¹è±¡</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/åŸºç¡€è¯­æ³•/2024-4-26-10æ–‡ä»¶åŸºæœ¬æ“ä½œ.html"><span class="label">2024-4-26-10æ–‡ä»¶åŸºæœ¬æ“ä½œ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/åŸºç¡€è¯­æ³•/2024-4-27-11OSæ¨¡å—.html"><span class="label">2024-4-27-11OSæ¨¡å—</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/åŸºç¡€è¯­æ³•/2024-4-27-12è¿­ä»£å™¨.html"><span class="label">2024-4-27-12è¿­ä»£å™¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/åŸºç¡€è¯­æ³•/2024-4-27-13å¼‚å¸¸å¤„ç†.html"><span class="label">2024-4-27-13å¼‚å¸¸å¤„ç†</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/åŸºç¡€è¯­æ³•/2024-4-27-14ç”Ÿæˆå™¨.html"><span class="label">2024-4-27-14ç”Ÿæˆå™¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/åŸºç¡€è¯­æ³•/2024-4-28-15é—­åŒ….html"><span class="label">2024-4-28-15é—­åŒ…</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/åŸºç¡€è¯­æ³•/2024-4-30-16æ·±æ‹·è´æµ…æ‹·è´.html"><span class="label">2024-4-30-16æ·±æ‹·è´æµ…æ‹·è´</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/åŸºç¡€è¯­æ³•/2024-5-1-17Withå’Œä¸Šä¸‹æ–‡ç®¡ç†å™¨.html"><span class="label">2024-5-1-17Withå’Œä¸Šä¸‹æ–‡ç®¡ç†å™¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/åŸºç¡€è¯­æ³•/2024-5-4-18GIL.html"><span class="label">2024-5-4-18GIL</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/åŸºç¡€è¯­æ³•/2024-5-4-19åƒåœ¾å›æ”¶.html"><span class="label">2024-5-4-19åƒåœ¾å›æ”¶</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/åŸºç¡€è¯­æ³•/2025-1-31-å¤šä»»åŠ¡.html"><span class="label">2025-1-31-å¤šä»»åŠ¡</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/åŸºç¡€è¯­æ³•/2025-12-19-CPPäº¤äº’ä½¿ç”¨.html"><span class="label">2025-12-19-CPPäº¤äº’ä½¿ç”¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/åŸºç¡€è¯­æ³•/2025-12-19-æ‰“åŒ…whlæ–‡ä»¶.html"><span class="label">2025-12-19-æ‰“åŒ…whlæ–‡ä»¶</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/åŸºç¡€è¯­æ³•/2025-2-25-yaml.html"><span class="label">2025-2-25-yaml</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/åŸºç¡€è¯­æ³•/2025-3-21-åŒ…å¯¼å…¥.html"><span class="label">2025-3-21-åŒ…å¯¼å…¥</span><span class=""></span></a></li>
</ul>
</li>
<li class="active_parent no_link"><a><span class="label">è¿›é˜¶ä½¿ç”¨</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active no_link"><a><span class="label">Cè¯­è¨€-Cppæ¥è½¨</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/Cè¯­è¨€-Cppæ¥è½¨/2025-12-10-01-struct.html"><span class="label">2025-12-10-01-struct</span><span class=""></span></a></li>
</ul>
</li>
<li class="active_parent no_link"><a><span class="label">django</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/django/2025-7-24-01-Django.html"><span class="label">2025-7-24-01-Django</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/django/2025-7-24-02-åˆ›å»º.html"><span class="label">2025-7-24-02-åˆ›å»º</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/django/2025-7-24-03-è·¯ç”±.html"><span class="label">2025-7-24-03-è·¯ç”±</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/django/2025-7-24-04-è§†å›¾.html"><span class="label">2025-7-24-04-è§†å›¾</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/django/2025-7-24-05-é…ç½®æ–‡ä»¶.html"><span class="label">2025-7-24-05-é…ç½®æ–‡ä»¶</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/django/2025-7-26-04-æ¨¡ç‰ˆ.html"><span class="label">2025-7-26-04-æ¨¡ç‰ˆ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/django/2025-7-28-05-é™æ€æ–‡ä»¶.html"><span class="label">2025-7-28-05-é™æ€æ–‡ä»¶</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/django/2025-7-29-06-ä¸­é—´ä»¶.html"><span class="label">2025-7-29-06-ä¸­é—´ä»¶</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/django/2025-7-29-07-æ•°æ®åº“.html"><span class="label">2025-7-29-07-æ•°æ®åº“</span><span class=""></span></a></li>
<li class="active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/django/2025-7-30-08-è¿›é˜¶æ•°æ®æŸ¥è¯¢.html"><span class="label">2025-7-30-08-è¿›é˜¶æ•°æ®æŸ¥è¯¢</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/django/2025-8-1-09-ORMä¼˜åŒ–.html"><span class="label">2025-8-1-09-ORMä¼˜åŒ–</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/django/2025-8-2-10-æ¨¡å‹æ‰©å±•.html"><span class="label">2025-8-2-10-æ¨¡å‹æ‰©å±•</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/django/2025-8-2-11-ç»„ä»¶.html"><span class="label">2025-8-2-11-ç»„ä»¶</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/django/2025-8-3-12-å¼‚æ­¥.html"><span class="label">2025-8-3-12-å¼‚æ­¥</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">pyQT</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/pyQT/2024-5-11-08ç•Œé¢å®¹å™¨.html"><span class="label">2024-5-11-08ç•Œé¢å®¹å™¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/pyQT/2024-5-6-01ä»‹ç»ä»¥åŠå®‰è£….html"><span class="label">2024-5-6-01ä»‹ç»ä»¥åŠå®‰è£…</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/pyQT/2024-5-6-02æ§ä»¶.html"><span class="label">2024-5-6-02æ§ä»¶</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/pyQT/2024-5-7-03å¸ƒå±€.html"><span class="label">2024-5-7-03å¸ƒå±€</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/pyQT/2024-5-7-04çª—å£.html"><span class="label">2024-5-7-04çª—å£</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/pyQT/2024-5-8-05ä¿¡å·ä¸æ§½.html"><span class="label">2024-5-8-05ä¿¡å·ä¸æ§½</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/pyQT/2024-5-8-06QTDesigner.html"><span class="label">2024-5-8-06QTDesigner</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/pyQT/2024-5-8-07çº¿ç¨‹.html"><span class="label">2024-5-8-07çº¿ç¨‹</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">ç®€å•æ¨¡å—ä½¿ç”¨</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/ç®€å•æ¨¡å—ä½¿ç”¨/2024-5-4-01loggingæ—¥å¿—æ¨¡å—.html"><span class="label">2024-5-4-01loggingæ—¥å¿—æ¨¡å—</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/ç®€å•æ¨¡å—ä½¿ç”¨/2025-3-15-02fastapi.html"><span class="label">2025-3-15-02fastapi</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">çº¿ç¨‹</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/çº¿ç¨‹/2024-5-10-01å¤šä»»åŠ¡.html"><span class="label">2024-5-10-01å¤šä»»åŠ¡</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/çº¿ç¨‹/2024-5-14-02é˜Ÿåˆ—.html"><span class="label">2024-5-14-02é˜Ÿåˆ—</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/çº¿ç¨‹/2025-2-20-async.html"><span class="label">2025-2-20-async</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">ç½‘ç»œç¼–ç¨‹</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/ç½‘ç»œç¼–ç¨‹/2024-5-10-01ç½‘ç»œç¼–ç¨‹.html"><span class="label">2024-5-10-01ç½‘ç»œç¼–ç¨‹</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/ç½‘ç»œç¼–ç¨‹/2024-5-10-02Socket.html"><span class="label">2024-5-10-02Socket</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/ç½‘ç»œç¼–ç¨‹/2024-5-12-03è½¯ä»¶.html"><span class="label">2024-5-12-03è½¯ä»¶</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/ç½‘ç»œç¼–ç¨‹/2024-8-20-04MQTT.html"><span class="label">2024-8-20-04MQTT</span><span class=""></span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">å‰ç«¯</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/å‰ç«¯/2024-8-12-04CSS2.html"><span class="label">2024-8-12-04CSS2</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/å‰ç«¯/2024-8-5-01åŸºç¡€çŸ¥è¯†.html"><span class="label">2024-8-5-01åŸºç¡€çŸ¥è¯†</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/å‰ç«¯/2024-8-5-02HTML.html"><span class="label">2024-8-5-02HTML</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/å‰ç«¯/2024-8-6-03CSS.html"><span class="label">2024-8-6-03CSS</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">åµŒå…¥å¼Cè¯­è¨€</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-21-__attribute__.html"><span class="label">2022-7-21-__attribute__</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-21-å†…è”å‡½æ•°å†…ç½®å†…å­˜å‡½æ•°.html"><span class="label">2022-7-21-å†…è”å‡½æ•°å†…ç½®å†…å­˜å‡½æ•°</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-21-å˜é‡æŒ‡é’ˆ.html"><span class="label">2022-7-21-å˜é‡æŒ‡é’ˆ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-21-å¤§å°ç«¯æ•°æ®å¯¹é½size_t.html"><span class="label">2022-7-21-å¤§å°ç«¯æ•°æ®å¯¹é½size_t</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-21-å­˜å‚¨å™¨.html"><span class="label">2022-7-21-å­˜å‚¨å™¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-21-è¯­å¥è¡¨è¾¾å¼define.html"><span class="label">2022-7-21-è¯­å¥è¡¨è¾¾å¼define</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-22-Linuxä¸­çš„é¢å‘å¯¹è±¡æ€æƒ³-å°è£….html"><span class="label">2022-7-22-Linuxä¸­çš„é¢å‘å¯¹è±¡æ€æƒ³-å°è£…</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-22-mainå‡½æ•°çš„å‚æ•°.html"><span class="label">2022-7-22-mainå‡½æ•°çš„å‚æ•°</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-22-äºŒçº§æŒ‡é’ˆ.html"><span class="label">2022-7-22-äºŒçº§æŒ‡é’ˆ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-22-ä»£ç å¤ç”¨åˆ†å±‚æ€æƒ³.html"><span class="label">2022-7-22-ä»£ç å¤ç”¨åˆ†å±‚æ€æƒ³</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-22-å‡½æ•°å‚æ•°çš„æœ¬è´¨.html"><span class="label">2022-7-22-å‡½æ•°å‚æ•°çš„æœ¬è´¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-22-å‡½æ•°æŒ‡é’ˆ.html"><span class="label">2022-7-22-å‡½æ•°æŒ‡é’ˆ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-22-æŒ‡é’ˆå’Œæ•°ç»„.html"><span class="label">2022-7-22-æŒ‡é’ˆå’Œæ•°ç»„</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-22-é¢å‘å¯¹è±¡ç¼–ç¨‹åŸºç¡€.html"><span class="label">2022-7-22-é¢å‘å¯¹è±¡ç¼–ç¨‹åŸºç¡€</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-23-gotoå…³é”®å­—.html"><span class="label">2022-7-23-gotoå…³é”®å­—</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-23-å¯é‡å…¥å‡½æ•°.html"><span class="label">2022-7-23-å¯é‡å…¥å‡½æ•°</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-23-å¤šä»»åŠ¡.html"><span class="label">2022-7-23-å¤šä»»åŠ¡</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-23-å¤´æ–‡ä»¶å‰–æ.html"><span class="label">2022-7-23-å¤´æ–‡ä»¶å‰–æ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-23-å¼‚æ­¥é€šä¿¡æ¨¡å¼.html"><span class="label">2022-7-23-å¼‚æ­¥é€šä¿¡æ¨¡å¼</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-23-æ“ä½œç³»ç»ŸåŸºæœ¬åŸç†.html"><span class="label">2022-7-23-æ“ä½œç³»ç»ŸåŸºæœ¬åŸç†</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-23-æ¨¡å—åŒ–ç¼–ç¨‹.html"><span class="label">2022-7-23-æ¨¡å—åŒ–ç¼–ç¨‹</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-23-æ¨¡å—è¿›é˜¶.html"><span class="label">2022-7-23-æ¨¡å—è¿›é˜¶</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-23-æ¨¡å—é—´é€šè®¯.html"><span class="label">2022-7-23-æ¨¡å—é—´é€šè®¯</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-24-MMUå†…å­˜ç®¡ç†å•å…ƒ.html"><span class="label">2022-7-24-MMUå†…å­˜ç®¡ç†å•å…ƒ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-24-ä¸­æ–­.html"><span class="label">2022-7-24-ä¸­æ–­</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-24-å¯„å­˜å™¨æ“ä½œ.html"><span class="label">2022-7-24-å¯„å­˜å™¨æ“ä½œ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-24-åµŒå…¥å¼å¯åŠ¨.html"><span class="label">2022-7-24-åµŒå…¥å¼å¯åŠ¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-24-æ–‡ä»¶ç³»ç»Ÿ.html"><span class="label">2022-7-24-æ–‡ä»¶ç³»ç»Ÿ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-24-ç³»ç»Ÿè°ƒç”¨.html"><span class="label">2022-7-24-ç³»ç»Ÿè°ƒç”¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/åµŒå…¥å¼Cè¯­è¨€/2022-7-24-è¿›ç¨‹çº¿ç¨‹åç¨‹.html"><span class="label">2022-7-24-è¿›ç¨‹çº¿ç¨‹åç¨‹</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">ç®—æ³•åŸºç¡€</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/ç®—æ³•åŸºç¡€/2022-7-31-é«˜çº§æ•°æ®ç»“æ„.html"><span class="label">2022-7-31-é«˜çº§æ•°æ®ç»“æ„</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/ç®—æ³•åŸºç¡€/2024-12-31-01å¿«é€Ÿæ’åº.html"><span class="label">2024-12-31-01å¿«é€Ÿæ’åº</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/ç®—æ³•åŸºç¡€/2024-12-31-02å“ˆå¸Œè¡¨.html"><span class="label">2024-12-31-02å“ˆå¸Œè¡¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/note/ç¼–ç¨‹åŸºç¡€/ç®—æ³•åŸºç¡€/2024-12-31-03è´ªå¿ƒç®—æ³•.html"><span class="label">2024-12-31-03è´ªå¿ƒç®—æ³•</span><span class=""></span></a></li>
</ul>
</li>
</ul>

            </div>
        </div>
        <div id="article">
            <div id="menu_wrapper">
                <div id="menu">
                </div>
            </div>
            <div id="content_wrapper">
                <div id="content_body">
                    <div id="article_head">
                        <div id="article_title">
                            
                            <h1>è¿›é˜¶æ•°æ®æŸ¥è¯¢</h1>
                            
                        </div>
                        <div id="article_tags">
                            <ul>
                            
                            </ul>
                        </div>
                        <div id="article_info">
                        <div id="article_info_left">
                            <span class="article_author">
                                
                            </span>
                            
                                <span class="article_date" title="æœ€åä¿®æ”¹æ—¥æœŸï¼š 2025-12-14">
                                    2025-12-14
                                </span>
                            
                        </div>
                        <div id="article_info_right">
                            
                            <div id="source_link">
                                <a href="https://github.com/XuSenfeng/note/tree/master/doc/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/django/2025-7-30-08-è¿›é˜¶æ•°æ®æŸ¥è¯¢.md" target="_blank">
                                    ç¼–è¾‘æœ¬é¡µ
                                </a>
                            </div>
                            
                        </div>
                        </div>
                    </div>
                    <div id="article_tools">
                        <span></span>
                        <span id="toc_btn"></span>
                    </div>
                    <div id="update_history">
                        
                    </div>
                    <div id="article_content">
                        
                            <h2 id="%E8%BF%87%E6%BB%A4%E6%9D%A1%E4%BB%B6">è¿‡æ»¤æ¡ä»¶</h2>
<p>ORMåœ¨å†…éƒ¨ç”ŸæˆSQLä¸­çš„whereå­å¥æ—¶ï¼Œæä¾›3ä¸ªæ–¹æ³•å¯ä»¥å¸®æˆ‘ä»¬å®ç°whereè¿‡æ»¤æ“ä½œï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>filter</strong> è¿‡æ»¤å‡ºç¬¦åˆæ¡ä»¶çš„å¤šä¸ªç»“æœ</li>
<li>exclude æ’é™¤æ‰ç¬¦åˆæ¡ä»¶çš„å¤šä¸ªç»“æœï¼Œä¸filterç›¸åï¼Œä¸filteräº’æ–¥ã€‚</li>
<li><strong>get</strong> è¿‡æ»¤å•ä¸€ç»“æœ, ç»“æœä¸æ˜¯ä¸€ä¸ªï¼Œä¼šæŠ¥é”™ã€‚</li>
</ul>
<p>å¯¹äºè¿‡æ»¤æ¡ä»¶çš„ä½¿ç”¨ï¼Œä¸Šè¿°ä¸‰ä¸ªæ–¹æ³•ç›¸åŒï¼Œä½†æ˜¯äº’æ–¥çš„ï¼Œåªèƒ½ä½¿ç”¨ä»»æ„1ä¸ªï¼Œæ•…ä»…ä»¥<strong>filter</strong>è¿›è¡Œè®²è§£ã€‚</p>
<p>æ–‡æ¡£ï¼š<a href="https://docs.djangoproject.com/zh-hans/4.2/ref/models/querysets/#field-lookups"  target="_blank">https://docs.djangoproject.com/zh-hans/4.2/ref/models/querysets/#field-lookups</a></p>
<p>ORMä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œè®¾ç½®æŸ¥è¯¢è¿‡æ»¤æ¡ä»¶çš„è¡¨è¾¾è¯­æ³•ï¼Œå¦‚ä¸‹ï¼š</p>

<pre class="language-python"><code class="language-python"># å•è¡¨çš„è¿‡æ»¤:
æ¨¡å‹ç±».objects.filter(å±æ€§åç§°__è¿ç®—ç¬¦=å€¼)  # æ­¤å¤„çš„è¿ç®—ç¬¦æ˜¯djangoçš„ORMæä¾›çš„è‹±æ–‡å•è¯çš„è¿ç®—ç¬¦ï¼Œä¸pythonçš„è¿ç®—ç¬¦ä¸ä¸€æ ·ï¼Œä¾‹å¦‚ORMçš„å¤§äºæ˜¯gtï¼Œå¤§äºç­‰äºæ˜¯gteã€‚
æ¨¡å‹ç±».objects.exclude(å±æ€§åç§°__è¿ç®—ç¬¦=å€¼) 
æ¨¡å‹ç±».objects.get(å±æ€§åç§°__è¿ç®—ç¬¦=å€¼) 

# å¤šè¡¨çš„è¿‡æ»¤
æ¨¡å‹ç±».objects.filter(å¤–é”®å±æ€§åç§°__å¤–é”®æ¨¡å‹çš„å±æ€§åç§°__è¿ç®—ç¬¦=å€¼)
æ¨¡å‹ç±».objects.exclude(å¤–é”®å±æ€§åç§°__å¤–é”®æ¨¡å‹çš„å±æ€§åç§°__è¿ç®—ç¬¦=å€¼)
æ¨¡å‹ç±».objects.get(å¤–é”®å±æ€§åç§°__å¤–é”®æ¨¡å‹çš„å±æ€§åç§°__è¿ç®—ç¬¦=å€¼)
# å±æ€§åç§°å’Œæ¯”è¾ƒè¿ç®—ç¬¦é—´ä½¿ç”¨ä¸¤ä¸ªè‹±æ–‡ä¸‹åˆ’çº¿ï¼Œæ‰€ä»¥è¿™å°±æ˜¯ä¸ºä»€ä¹ˆï¼Œä¹‹å‰å£°æ˜æ¨¡å‹ç±»ï¼Œè§„å®šäº†å±æ€§åä¸èƒ½åŒ…æ‹¬å¤šä¸ªä¸‹åˆ’çº¿
</code></pre>
<blockquote>
<ol>
<li>å¤–é”®å±æ€§åç§°<ul>
<li>å½“å‰æ¨¡å‹ï¼ˆä½ æ­£åœ¨æŸ¥è¯¢çš„æ¨¡å‹ï¼‰ä¸­å®šä¹‰çš„<strong>å¤–é”®å­—æ®µå</strong></li>
<li>å³ <code>models.ForeignKey</code> å­—æ®µçš„åç§°</li>
<li>å®ƒæŒ‡å‘å¦ä¸€ä¸ªæ¨¡å‹ï¼ˆå…³è”æ¨¡å‹ï¼‰</li>
</ul>
</li>
<li>å¤–é”®æ¨¡å‹çš„å±æ€§åç§°<ul>
<li>è¢«å…³è”æ¨¡å‹ï¼ˆå¤–é”®æŒ‡å‘çš„æ¨¡å‹ï¼‰ä¸­çš„<strong>å­—æ®µå</strong></li>
<li>ä½ æƒ³åŸºäºè¿™ä¸ªå­—æ®µçš„å€¼è¿›è¡ŒæŸ¥è¯¢</li>
</ul>
</li>
</ol>
</blockquote>
<h4 id="1.-%E7%9B%B8%E7%AD%89">1. ç›¸ç­‰</h4>
<p><strong>exactï¼šè¡¨ç¤ºåˆ¤æ–­å€¼æ˜¯å¦ç›¸ç­‰ã€‚</strong></p>
<p>ä¾‹ï¼šæŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯ã€‚</p>

<pre class="language-python"><code class="language-python">&quot;&quot;&quot;exact è¿‡æ»¤ç›¸ç­‰çš„æ¡ä»¶&quot;&quot;&quot;
# student_list = Student.objects.filter(name__exact=&quot;å´æ°&quot;).all()
student_list = Student.objects.filter(name=&quot;å´æ°&quot;).all()  # ç®€å†™æ–¹å¼ï¼Œè¿™ä¸ªæœ€å¸¸ç”¨ï¼ï¼
print(student_list)
return HttpResponse(&quot;OK&quot;)
</code></pre>
<h4 id="2.-%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2">2. æ¨¡ç³ŠæŸ¥è¯¢</h4>
<p><strong>containsï¼šæ˜¯å¦åŒ…å«ã€‚</strong></p>
<blockquote>
<p>è¯´æ˜ï¼šå¦‚æœè¦åŒ…å«%æ— éœ€è½¬ä¹‰ï¼Œç›´æ¥å†™å³å¯ã€‚</p>
</blockquote>
<p>ä¾‹ï¼šæŸ¥è¯¢å§“ååŒ…å«'å'çš„å­¦ç”Ÿã€‚</p>

<pre class="language-python"><code class="language-python">&quot;&quot;&quot;æ¨¡ç³ŠæŸ¥è¯¢[ç®€å•æ•°æ®è¡¨æ‰ä½¿ç”¨è¿™ä¸ªï¼Œæ•°æ®é‡å¤§äº†ä¸è¦ä½¿ç”¨è¿™ä¸ªï¼Œæ”¹ç”¨å…¨æ–‡æœç´¢ï¼Œä½¿ç”¨ä¸“ä¸šçš„æœç´¢å¼•æ“]&quot;&quot;&quot;
# name__contains -&gt; åŒ…å« ---&gt; name like &quot;%å%&quot;
student1 = Student.objects.filter(name__contains='å')
# print(student1)
</code></pre>
<p><strong>startswithã€endswithï¼šä»¥æŒ‡å®šå€¼å¼€å¤´æˆ–ç»“å°¾ã€‚</strong></p>
<p>ä¾‹ï¼šæŸ¥è¯¢å§“åä»¥'å'ç»“å°¾çš„å­¦ç”Ÿ</p>

<pre class="language-python"><code class="language-python"># name__endswith -&gt; ç»“å°¾ ---&gt; name like &quot;%å&quot;
student2 = Student.objects.filter(name__endswith='å')
# print(student2)

# name__startswith-&gt;å¼€å¤´ ---&gt; name like &quot;æ±Ÿ%&quot;
student3 = Student.objects.filter(name__startswith=&quot;æ±Ÿ&quot;)
print(student3)
</code></pre>
<blockquote>
<p>ä»¥ä¸Šè¿ç®—ç¬¦éƒ½åŒºåˆ†å¤§å°å†™ï¼Œåœ¨è¿™äº›è¿ç®—ç¬¦å‰åŠ ä¸Šiè¡¨ç¤ºä¸åŒºåˆ†å­—æ¯å¤§å°å†™ï¼Œå¦‚iexactã€icontainsã€istartswithã€iendswith.</p>
</blockquote>
<h4 id="3.-%E7%A9%BA%E6%9F%A5%E8%AF%A2">3. ç©ºæŸ¥è¯¢</h4>
<p><strong>isnullï¼šå­—æ®µå€¼æ˜¯å¦ä¸ºnullã€‚</strong></p>
<p>ä¾‹ï¼šæŸ¥è¯¢ä¸ªæ€§ç­¾åä¸ä¸ºç©ºçš„å­¦ç”Ÿã€‚</p>

<pre class="language-python"><code class="language-python"># æ·»åŠ æµ‹è¯•æ•°æ®,SQLè¯­å¥
INSERT INTO student (name, age, sex, class, description, status, created_time, updated_time, mobile) VALUES ('åˆ˜å¾·å', 17, 1, '407', null, 0, '2020-11-20 10:00:00.000000', '2020-11-20 10:00:00.000000', '15067895432');

# ä»£ç æ“ä½œ
&quot;&quot;&quot;ç©ºæŸ¥è¯¢&quot;&quot;&quot;
student = Student.objects.filter(description__isnull=True)
print(student)
</code></pre>
<h4 id="4.-%E8%8C%83%E5%9B%B4%E6%9F%A5%E8%AF%A2">4. èŒƒå›´æŸ¥è¯¢</h4>
<p><strong>inï¼šæ˜¯å¦åŒ…å«åœ¨èŒƒå›´å†…ã€‚</strong></p>
<p>ä¾‹ï¼šæŸ¥è¯¢ç­çº§ç¼–å·ä¸º301,302æˆ–303çš„å­¦ç”Ÿ</p>

<pre class="language-python"><code class="language-python">&quot;&quot;&quot;èŒƒå›´æŸ¥è¯¢&quot;&quot;&quot;
student = Student.objects.filter(classmate__in=[301, 302, 303]).all().values(&quot;id&quot;, &quot;name&quot;, &quot;classmate&quot;)
print(student)
</code></pre>
<h4 id="5.-%E5%8F%96%E5%80%BC%E8%8C%83%E5%9B%B4">5. å–å€¼èŒƒå›´</h4>
<p>range è®¾ç½®å¼€å§‹å€¼ä¸ç»“æŸå€¼èŒƒå›´ï¼Œè¿›è¡Œæ•°å€¼åˆ¤æ–­ï¼Œç¬¦åˆèŒƒå›´çš„æ•°æ®è¢«æŸ¥è¯¢å‡ºæ¥ã€‚ä¸ä»…å¯ä»¥è®¾ç½®æ•°å€¼èŒƒå›´ï¼Œä¹Ÿå¯ä»¥è®¾ç½®æ—¶é—´èŒƒå›´ã€‚</p>
<p>ä¾‹å¦‚ï¼šæŸ¥è¯¢å‡ºå­¦å·idåœ¨51~67ä¹‹é—´çš„ã€‚</p>

<pre class="language-python"><code class="language-python">&quot;&quot;&quot;å–å€¼èŒƒå›´&quot;&quot;&quot;
# SQL: SELECT ... WHERE id BETWEEN 51 and 67; 
student_list = Student.objects.filter(id__range=(51, 67)).values(&quot;id&quot;, &quot;name&quot;)
print(student_list)
return HttpResponse(&quot;ok&quot;)
</code></pre>
<h4 id="6.-%E6%AF%94%E8%BE%83%E6%9F%A5%E8%AF%A2">6. æ¯”è¾ƒæŸ¥è¯¢</h4>
<ul>
<li><strong>gt</strong> å¤§äº (greater then)</li>
<li><strong>gte</strong> å¤§äºç­‰äº (greater then equal)</li>
<li><strong>lt</strong> å°äº (less then)</li>
<li><strong>lte</strong> å°äºç­‰äº (less then equal)</li>
</ul>
<p>ä¾‹ï¼šæŸ¥è¯¢ç¼–å·å¤§äº3çš„å­¦ç”Ÿ</p>

<pre class="language-python"><code class="language-python">        &quot;&quot;&quot;æ¯”è¾ƒæŸ¥è¯¢&quot;&quot;&quot;
        # # å¹´é¾„å¤§äº20çš„
        # # age__gt=20  ----&gt;&gt;&gt;  where age &gt; 20
        # student_list = Student.objects.filter(age__gt=22).values(&quot;name&quot;, &quot;age&quot;)  # åé¢ä»»ä½•æ–¹æ³•ï¼Œé»˜è®¤è¡¥å……all()
        # print(student_list)

        # # å¹´é¾„å°äº19çš„
        # # age__lt=19  ----&gt;&gt;&gt;  where age &lt; 19
        # student_list = Student.objects.filter(age__gt=19).all().values(&quot;name&quot;,&quot;age&quot;)
        # print(student_list)

        # å¹´é¾„ä¸ç­‰äº19çš„
        # ä½¿ç”¨excludeæŠŠç¬¦åˆæ¡ä»¶çš„æ’é™¤æ‰
        student_list = Student.objects.exclude(age=19).all().values(&quot;name&quot;,&quot;age&quot;)
        print(student_list)

</code></pre>
<p>ä¸ç­‰äºçš„è¿ç®—ç¬¦ï¼Œä½¿ç”¨exclude()è¿‡æ»¤å™¨ã€‚</p>
<h4 id="7.-%E6%97%A5%E6%9C%9F%E6%9F%A5%E8%AF%A2">7. æ—¥æœŸæŸ¥è¯¢</h4>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<ol>
<li>djangoçš„ORMä¸­æä¾›äº†è®¸å¤šæ–¹æ³•ç”¨äºè¿›è¡Œæ—¥æœŸçš„æŸ¥è¯¢è¿‡æ»¤ï¼Œä¾‹å¦‚ï¼š<strong>yearã€monthã€dayã€week_dayã€hourã€minuteã€secondéƒ½å¯ä»¥å¯¹æ—¥æœŸæ—¶é—´ç±»å‹çš„å±æ€§è¿›è¡Œè¿ç®—ã€‚</strong></li>
<li>è¦è¿›è¡Œæ—¥æœŸæ—¶é—´çš„è¿‡æ»¤æŸ¥è¯¢ï¼Œå¿…é¡»ä¿è¯pythonä»£ç ä¸­ä½¿ç”¨çš„æ—¶é—´æ—¶åŒºä¸mysqlæ•°æ®åº“ä¸­çš„æ—¶é—´æ—¶åŒºæ˜¯å¯¹åº”çš„ï¼å¦‚æœmysqlçš„æ—¶åŒºä¸pythonä»£ç çš„æ—¶åŒºä¸å¯¹åº”ï¼Œåˆ™å¾—åˆ°çš„ç»“æœçº¯åœ¨æ—¶åŒºçš„å·®å¼‚ã€‚</li>
</ol>
<p>å¯ä»¥ä½¿ç”¨<code>SELECT NOW()</code>æŸ¥çœ‹mysqlçš„æ—¶åŒº</p>
</blockquote>
<p>ä¾‹ï¼šæŸ¥è¯¢2017å¹´è¢«æ·»åŠ åˆ°æ•°æ®ä¸­çš„å­¦ç”Ÿã€‚</p>

<pre class="language-python"><code class="language-python">&quot;&quot;&quot;æ—¥æœŸè¿‡æ»¤æŸ¥è¯¢
éœ€è¦è°ƒæ•´settings.pyçš„æ—¶åŒºé…ç½®é¡¹ä¸ºï¼šUSE_TZ = False
&quot;&quot;&quot;
# æŸ¥è¯¢2017å¹´è¢«åŠ å…¥æ•°æ®è¡¨çš„ä¿¡æ¯
# created_time__year=2017  ---&gt; where year(created_time)=2017
student_list = Student.objects.filter(created_time__year=2017).values(&quot;name&quot;, &quot;created_time&quot;)
print(student_list)

# æŸ¥è¯¢11æœˆä»½è¢«åŠ å…¥æ•°æ®è¡¨çš„ä¿¡æ¯
# SQL: where month(created_time) = 11;
student_list = Student.objects.filter(created_time__month=7).values(&quot;name&quot;, &quot;created_time&quot;)
print(student_list)

# æŸ¥è¯¢å‡º2022å¹´07æœˆä»½çš„å­¦ç”Ÿ
# SQL: WHERE month(created_time) = 7 AND year(created_time) = 2022;
student_list = Student.objects.filter(created_time__year=2022, created_time__month=7).values(&quot;name&quot;, &quot;created_time&quot;)
print(student_list)

# æŸ¥è¯¢å‡º2017å¹´11æœˆ20å·çš„å­¦ç”Ÿ
# SQL: WHERE month(created_time) = 7 AND year(created_time) = 2022 AND day(created_time);
student_list = Student.objects.filter(
created_time__year=2017,
created_time__month=7,
created_time__day=20
).values(&quot;name&quot;, &quot;created_time&quot;)
print(student_list)

# æŸ¥è¯¢07æœˆ20å·çš„å­¦ç”Ÿ
student_list = Student.objects.filter(
created_time__month=7,
created_time__day=20
).values(&quot;name&quot;, &quot;created_time&quot;)
print(student_list)
</code></pre>
<h6 id="%E4%B8%9A%E5%8A%A1%E5%9C%BA%E6%99%AF%EF%BC%9A%E6%97%B6%E9%97%B4%E5%88%A4%E6%96%AD">ä¸šåŠ¡åœºæ™¯ï¼šæ—¶é—´åˆ¤æ–­</h6>
<p>ä¾‹ï¼šæŸ¥è¯¢2021-08-18 16:19:38 è¿™ä¸ªæ—¶é—´ç‚¹ä¸Šæ·»åŠ çš„å­¦ç”Ÿä¿¡æ¯ã€‚</p>
<p>ä¾‹ï¼šæŸ¥è¯¢æ—¶é—´èŒƒå›´åœ¨ &quot;2021-08-18 16:19:38&quot; ~ &quot;2021-08-18 16:21:56&quot; çš„æ•°æ®ã€‚</p>

<pre class="language-python"><code class="language-python">&quot;&quot;&quot;ç²¾ç¡®æ—¶é—´æŸ¥è¯¢&quot;&quot;&quot;
# æ–¹å¼1ï¼šå½“åœ¨æ¨¡å‹ä½¿ç”¨datetimeæŒ‡å®šå­—æ®µçš„æ•°æ®ç±»å‹ä»¥åï¼Œå°±ä¸èƒ½ç›´æ¥é€šè¿‡å­—ç¬¦ä¸²çš„æ¯”è¾ƒæ¥è¿‡æ»¤æŸ¥è¯¢äº†ï¼Œå› ä¸ºå­—ç¬¦ä¸²æ—¶é—´æ ¼å¼æ— æ³•ä¸datetimeå¯¹è±¡æ¥è¿›è¡Œå¾ˆç²¾ç¡®çš„åˆ¤æ–­æ¯”è¾ƒ
student_objs = models.Student.objects.filter(created_time=&quot;2021-08-18 16:19:38&quot;).all()
print(student_objs)

# æ–¹å¼2ï¼šæŠŠå­—ç¬¦çªœæ ¼å¼çš„æ—¶é—´è½¬æ¢æˆdatetimeå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æŸ¥è¯¢ã€‚
from django.utils.timezone import datetime
# æŠŠå­—ç¬¦ä¸²æ ¼å¼æ—¶é—´è½¬æ¢æˆdatetimeæ—¶é—´æˆ³å¯¹è±¡
timestamp = datetime.strptime(&quot;2021-08-18 16:19:38&quot;, &quot;%Y-%m-%d %H:%M:%S&quot;)
student_objs = models.Student.objects.filter(created_time=timestamp).all()
print(student_objs)

&quot;&quot;&quot;åˆ¤æ–­ä¸¤ä¸ªæ—¶é—´èŒƒå›´&quot;&quot;&quot;
time1 = &quot;2020-11-20 9:00:00&quot;
time2 = &quot;2020-11-20 11:00:00&quot;
# æŸ¥è¯¢æ·»åŠ æ—¶é—´åœ¨time1ä¸time2ä¹‹é—´çš„å­¦ç”Ÿä¿¡æ¯
student_objs = models.Student.objects.filter(
created_time__gte=time1,
created_time__lte=time2,
).all()
print(student_objs) # &lt;QuerySet [&lt;Student: åˆ˜å¾·å&gt;]&gt;
</code></pre>
<h4 id="8.-F%E5%AF%B9%E8%B1%A1%2C-%E5%AD%97%E6%AE%B5%E9%97%B4">8. Få¯¹è±¡, å­—æ®µé—´</h4>
<p>Få¯¹è±¡ï¼Œä¸»è¦ç”¨äºåœ¨SQLè¯­å¥ä¸­é’ˆå¯¹å­—æ®µä¹‹é—´çš„å€¼è¿›è¡Œæ¯”è¾ƒçš„æŸ¥è¯¢ã€‚</p>
<p>ä¹‹å‰çš„æŸ¥è¯¢éƒ½æ˜¯å¯¹è±¡çš„å±æ€§ä¸å¸¸é‡å€¼æ¯”è¾ƒï¼Œä¸¤ä¸ªå±æ€§æ€ä¹ˆæ¯”è¾ƒå‘¢ï¼Ÿ ç­”ï¼šä½¿ç”¨Få¯¹è±¡ï¼Œè¢«å®šä¹‰åœ¨django.db.modelsä¸­ã€‚</p>
<p>è¯­æ³•å¦‚ä¸‹ï¼š</p>

<pre class="language-python"><code class="language-python">&quot;&quot;&quot;Få¯¹è±¡ï¼Œå­—æ®µé—´çš„å€¼æ¯”è¾ƒæŸ¥è¯¢&quot;&quot;&quot;
from django.db.models import F
# æŸ¥è¯¢å‡ºå…¥å­¦ä»¥åï¼Œæ•°æ®æ²¡æœ‰è¢«ä¿®æ”¹è¿‡çš„å­¦ç”Ÿä¿¡æ¯, æ¯”è¾ƒupdated_timeå’Œcreated_time
student = Student.objects.filter(created_time=F(&quot;updated_time&quot;)).values(&quot;name&quot;,&quot;created_time&quot;,&quot;updated_time&quot;)
print(student)
return HttpResponse(&quot;ok&quot;)

# é™¤äº†ä¸Šé¢ä¾‹å­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä»å·¥ä½œä¸­é’ˆå¯¹å…¬å¸æ¯æœˆçš„è¥æ”¶(æ”¯å‡ºå’Œæ”¶å…¥)ã€è‚¡ç¥¨(æ¯æœˆæ¶¨å’Œè·Œ)éƒ½å¯ä»¥ä½¿ç”¨Få¯¹è±¡è¿›è¡ŒæŸ¥è¯¢ã€‚
</code></pre>
<h4 id="9.-Q%E5%AF%B9%E8%B1%A1-%E9%80%BB%E8%BE%91%E6%AF%94%E8%BE%83">9. Qå¯¹è±¡ é€»è¾‘æ¯”è¾ƒ</h4>
<p><strong>å¤šä¸ªè¿‡æ»¤å™¨é€ä¸ªè°ƒç”¨è¡¨ç¤ºé€»è¾‘ä¸å…³ç³»ï¼ŒåŒsqlè¯­å¥ä¸­whereéƒ¨åˆ†çš„andå…³é”®å­—ã€‚</strong></p>
<p>ä¾‹ï¼šæŸ¥è¯¢å¹´é¾„å¤§äº20ï¼Œå¹¶ä¸”ç¼–å·å°äº30çš„å­¦ç”Ÿã€‚</p>

<pre class="language-python"><code class="language-python">Student.objects.filter(age__gt=20,id__lt=30)
æˆ–
Student.filter(age__gt=20).filter(id__lt=30)
</code></pre>
<p><strong>å¦‚æœéœ€è¦å®ç°é€»è¾‘æˆ–orçš„æŸ¥è¯¢ï¼Œéœ€è¦ä½¿ç”¨Q()å¯¹è±¡ç»“åˆ|è¿ç®—ç¬¦</strong>ï¼ŒQå¯¹è±¡è¢«ä¹‰åœ¨django.db.modelsä¸­ã€‚</p>
<p>è¯­æ³•å¦‚ä¸‹ï¼š</p>

<pre class="language-python"><code class="language-python"># And
filter( Q(å±æ€§å__è¿ç®—ç¬¦=å€¼) )
filter(Q(å±æ€§å__è¿ç®—ç¬¦=å€¼, å±æ€§å__è¿ç®—ç¬¦=å€¼, ....))

# OR
filter(Q(å±æ€§å__è¿ç®—ç¬¦=å€¼) | Q(å±æ€§å__è¿ç®—ç¬¦=å€¼))
filter(Q(å±æ€§å__è¿ç®—ç¬¦=å€¼) | Q(å±æ€§å__è¿ç®—ç¬¦=å€¼) | ....)

# NOT
filter(~Q(å±æ€§å__è¿ç®—ç¬¦=å€¼))
</code></pre>
<p>ä¾‹å­ã€‚</p>

<pre class="language-python"><code class="language-python">&quot;&quot;&quot;Qå¯¹è±¡ï¼Œå¤æ‚é€»è¾‘æŸ¥è¯¢ï¼Œé’ˆå¯¹å¤šæ¡ä»¶è¿›è¡Œä¸æˆ–éå¤„ç†&quot;&quot;&quot;
from django.db.models import Q
# å¤šä¸ªä¸ and  Q(æ¡ä»¶) &amp; Q(æ¡ä»¶)
# æŸ¥è¯¢å‡º301ç­çš„ç”·ç”Ÿ
# student = Student.objects.filter(Q(classmate=301) &amp; Q(xingbie=1)).values(&quot;name&quot;,&quot;xingbie&quot;,&quot;classmate&quot;)
# ä¸Šé¢å®Œå…¨å¯ä»¥ç®€å†™æˆ
student = Student.objects.filter(classmate=301, xingbie=1).values(&quot;name&quot;,&quot;xingbie&quot;,&quot;classmate&quot;)
&quot;&quot;&quot;å•çº¯çš„å¤šä¸ªæ¡ä»¶å¹¶ç«‹çš„æƒ…å†µä¸‹ï¼Œæ²¡å¿…è¦ä½¿ç”¨åˆ°Qå¯¹è±¡è¿›è¡Œå¤„ç†ï¼Œç›´æ¥ç¼–å†™å¤šä¸ªæ¡ä»¶ï¼Œä½¿ç”¨é€—å·ä¸²è”å³å¯&quot;&quot;&quot;

# å¤šä¸ªæˆ–ï¼Œor Q(æ¡ä»¶) | Q(æ¡ä»¶)
# æŸ¥è¯¢å‡º301ç­çš„ç”·ç”Ÿ æˆ–è€… 302ç­çš„ç”·ç”Ÿ
student = Student.objects.filter(Q(classmate=301, xingbie=1) | Q(classmate=302, xingbie=1)).values(&quot;name&quot;,&quot;xingbie&quot;,&quot;classmate&quot;)
# print(student)
# ä¸Šé¢å®Œå…¨å¯ä»¥ç®€å†™æˆ
student = Student.objects.filter(classmate__in=[301,302], xingbie=1).values(&quot;name&quot;,&quot;xingbie&quot;,&quot;classmate&quot;)
# print(student)

# å¦‚æœæ˜¯è¿™æ ·åˆ™ä¸èƒ½ç®€å†™äº†
# æŸ¥è¯¢å‡º301ç­å¹´é¾„å¤§äº21ç”·ç”Ÿï¼Œæˆ–è€… 302ç­å¹´é¾„å°äº19å²çš„å¥³ç”Ÿ
student = Student.objects.filter( Q(classmate=301, age__gt=21, xingbie=1) | Q(classmate=302, age__lt=22, xingbie=2) ).values(&quot;name&quot;,&quot;age&quot;,&quot;xingbie&quot;,&quot;classmate&quot;)
# print(student)
</code></pre>
<p><strong>Qå¯¹è±¡å¯ä»¥ä½¿ç”¨&amp; è¡¨ç¤ºé€»è¾‘ä¸ï¼ˆandï¼‰ï¼Œ| è¡¨ç¤ºé€»è¾‘æˆ–ï¼ˆorï¼‰ï¼Œ~è¡¨ç¤ºé€»è¾‘éï¼ˆnotï¼‰</strong></p>
<p>ä¾‹ï¼šæŸ¥è¯¢å¹´é¾„å¤§äº20ï¼Œæˆ–ç¼–å·å°äº30çš„å­¦ç”Ÿï¼Œåªèƒ½ä½¿ç”¨Qå¯¹è±¡å®ç°</p>

<pre class="language-none"><code class="language-none">Student.objects.filter(Q(age__gt=20) | Q(pk__lt=30))
</code></pre>
<p><code>Qå¯¹è±¡å·¦è¾¹å¯ä»¥ä½¿ç”¨~æ“ä½œç¬¦ï¼Œè¡¨ç¤ºénotã€‚ä½†æ˜¯å·¥ä½œä¸­ï¼Œæˆ‘ä»¬åªä¼šä½¿ç”¨Qå¯¹è±¡è¿›è¡Œæˆ–è€…çš„æ“ä½œï¼Œåªæœ‰å¤šç§åµŒå¥—å¤æ‚çš„æŸ¥è¯¢æ¡ä»¶æ‰ä¼šä½¿ç”¨&amp;å’Œ~è¿›è¡Œä¸å’Œéå¾—æ“ä½œ</code>ã€‚</p>
<p>ä¾‹ï¼šæŸ¥è¯¢å‡ºå¹´é¾„ä¸æ˜¯20å²çš„</p>

<pre class="language-none"><code class="language-none">student = Student.objects.filter(~Q(age=20)).values(&quot;name&quot;, &quot;age&quot;)
print(student)
# ç›¸å½“äº exclude
student = Student.objects.exclude(age=20).values(&quot;name&quot;, &quot;age&quot;)
print(student)
</code></pre>
<h3 id="%E7%BB%93%E6%9E%9C%E6%8E%92%E5%BA%8F">ç»“æœæ’åº</h3>
<p>ä½¿ç”¨<strong>order_by</strong>å¯¹ç»“æœè¿›è¡Œæ’åº</p>

<pre class="language-python"><code class="language-python">&quot;&quot;&quot;ç»“æœæ’åº&quot;&quot;&quot;
# order_by(&quot;ç¬¬ä¸€æ’åºå­—æ®µ&quot;,&quot;ç¬¬äºŒæ’åºå­—æ®µ&quot;,....)
#  å½“å‰ç¬¬ä¸€å­—æ®µçš„å€¼ä¸€æ ·æ—¶ï¼Œå‚è€ƒç¬¬äºŒå­—æ®µè¿›è¡Œæ’åºï¼Œç¬¬äºŒå­—æ®µçš„å€¼ä¸€æ ·æ—¶ï¼Œå‚è€ƒç¬¬ä¸‰å­—æ®µè¿›è¡Œæ’åº,....
# å¦‚æœæ²¡æœ‰å£°æ˜order_by()æ¥æŸ¥è¯¢ï¼Œè€Œå€¼åˆæ˜¯ä¸€æ ·çš„æ—¶å€™ï¼Œåˆ™æ ¹æ®MySQLåœ¨å†…éƒ¨æ‰§è¡ŒæŸ¥è¯¢è®¡åˆ’çš„é¡ºåºè¿›è¡Œæ’åˆ—ï¼Œä¹Ÿå°±æ˜¯éšæœºæ’åˆ—
# å­—æ®µæ’åºå†™æ³•ï¼š
# order_by(&quot;id&quot;)   # è¡¨ç¤ºæŒ‰idå­—æ®µçš„å€¼è¿›è¡Œå‡åºæ’åºï¼Œidæ•°å€¼ä»å°åˆ°å¤§
# order_by(&quot;-id&quot;)  # è¡¨ç¤ºæŒ‰idå­—æ®µçš„å€¼è¿›è¡Œé™åºæ’åºï¼Œidæ•°å€¼ä»å¤§åˆ°å°
# å…ˆæŒ‰ç­çº§è¿›è¡Œç¬¬ä¸€æ’åºé™åºå¤„ç†ï¼Œå½“ç­çº§æ•°å€¼ä¸€æ ·æ—¶ï¼Œå†æŒ‰idè¿›è¡Œç¬¬äºŒæ’åºå‡åºå¤„ç†
# student = Student.objects.order_by(&quot;-classmate&quot;,&quot;id&quot;).values(&quot;classmate&quot;,&quot;id&quot;,&quot;name&quot;)

# è°ƒç”¨äº†order_byä»¥åï¼Œå¦‚æœæ²¡æœ‰åç»­å£°æ˜è¿”å›ç»“æœçš„allæ–¹æ³•æ—¶ï¼Œé»˜è®¤ä½¿ç”¨all()è¿›è¡Œç»“æœæŸ¥è¯¢
student = Student.objects.order_by(&quot;-id&quot;)
print(student)
</code></pre>
<h3 id="%E9%99%90%E5%88%B6%E6%9F%A5%E8%AF%A2">é™åˆ¶æŸ¥è¯¢</h3>
<p>ORMä¸­é’ˆå¯¹æŸ¥è¯¢ç»“æœçš„æ•°é‡é™åˆ¶ï¼Œæä¾›äº†ä¸€ä¸ªæŸ¥è¯¢é›†å¯¹è±¡[QuerySet].è¿™ä¸ªQuerySet,æ˜¯ORMä¸­é’ˆå¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œ<strong>ä¸´æ—¶ä¿å­˜</strong>æ•°æ®çš„ä¸€ä¸ªå®¹å™¨å¯¹è±¡,æˆ‘ä»¬å¯ä»¥é€šè¿‡äº†è§£è¿™ä¸ªQuerySetè¿›è¡Œä½¿ç”¨,è¾¾åˆ°<strong>æŸ¥è¯¢ä¼˜åŒ–</strong>çš„ç›®çš„ï¼Œä¹Ÿæˆ–è€…<strong>é™åˆ¶æŸ¥è¯¢ç»“æœæ•°é‡</strong>çš„ä½œç”¨ã€‚</p>
<h4 id="%E6%9F%A5%E8%AF%A2%E9%9B%86-QuerySet">æŸ¥è¯¢é›† QuerySet</h4>
<p>æŸ¥è¯¢é›†ï¼Œä¹Ÿç§°æŸ¥è¯¢ç»“æœé›†ã€QuerySetï¼Œè¡¨ç¤ºä»æ•°æ®åº“ä¸­è·å–çš„å¯¹è±¡é›†åˆã€‚</p>
<p>å½“è°ƒç”¨å¦‚ä¸‹ORMæä¾›çš„è¿‡æ»¤å™¨æ–¹æ³•æ—¶ï¼ŒDjangoä¼šè¿”å›æŸ¥è¯¢é›†ï¼ˆè€Œä¸æ˜¯ç®€å•çš„åˆ—è¡¨ï¼‰ï¼š</p>
<ul>
<li><code>all()</code>ï¼šè¿”å›æ‰€æœ‰æ•°æ®ã€‚</li>
<li><code>filter()</code>ï¼šè¿”å›æ»¡è¶³æ¡ä»¶çš„æ•°æ®ã€‚filterä¼šé»˜è®¤è°ƒç”¨allæ–¹æ³•ã€‚</li>
<li><code>exclude()</code>ï¼šè¿”å›æ»¡è¶³æ¡ä»¶ä¹‹å¤–çš„æ•°æ®ã€‚excludeä¼šé»˜è®¤è°ƒç”¨allæ–¹æ³•</li>
<li><code>order_by()</code>ï¼šå¯¹ç»“æœè¿›è¡Œæ’åºã€‚order_byä¼šé»˜è®¤è°ƒç”¨allæ–¹æ³•</li>
</ul>
<p>å¯¹æŸ¥è¯¢é›†å¯ä»¥å†æ¬¡è°ƒç”¨è¿‡æ»¤å™¨è¿›è¡Œè¿‡æ»¤ï¼Œå¦‚</p>

<pre class="language-python"><code class="language-python">Student.objects.filter(pk__gt=30).order_by('age')
</code></pre>
<p>ä¹Ÿå°±æ„å‘³ç€æŸ¥è¯¢é›†å¯ä»¥å«æœ‰é›¶ä¸ªã€ä¸€ä¸ªæˆ–å¤šä¸ªfilterè¿‡æ»¤å™¨ã€‚è¿‡æ»¤å™¨åŸºäºæ‰€ç»™çš„å‚æ•°é™åˆ¶æŸ¥è¯¢çš„ç»“æœã€‚</p>
<p><strong>ä»SQLçš„è§’åº¦è®²ï¼ŒæŸ¥è¯¢é›†ä¸selectè¯­å¥ç­‰ä»·ï¼Œè¿‡æ»¤å™¨åƒwhereã€limitã€order byå­å¥ã€‚</strong></p>
<p>åˆ¤æ–­æŸä¸€ä¸ªæŸ¥è¯¢é›†ä¸­æ˜¯å¦æœ‰æ•°æ®ï¼š</p>
<ul>
<li><code>exists()</code>ï¼šåˆ¤æ–­æŸ¥è¯¢é›†ä¸­æ˜¯å¦æœ‰æ•°æ®ï¼Œå¦‚æœæœ‰åˆ™è¿”å›Trueï¼Œæ²¡æœ‰åˆ™è¿”å›Falseã€‚</li>
<li><code>values()</code>: æŠŠç»“æœé›†ä¸­çš„æ¨¡å‹å¯¹è±¡è½¬æ¢æˆ<strong>å­—å…¸</strong>,å¹¶å¯ä»¥è®¾ç½®è½¬æ¢çš„å­—æ®µåˆ—è¡¨ï¼Œè¾¾åˆ°å‡å°‘å†…å­˜æŸè€—ï¼Œæé«˜æ€§èƒ½</li>
<li><code>values_list()</code>: æŠŠç»“æœé›†ä¸­çš„æ¨¡å‹å¯¹è±¡è½¬æ¢æˆ<strong>åˆ—è¡¨</strong>ï¼Œå¹¶å¯ä»¥è®¾ç½®è½¬æ¢çš„å­—æ®µåˆ—è¡¨ï¼ˆå…ƒç¥–ï¼‰ï¼Œè¾¾åˆ°å‡å°‘å†…å­˜æŸè€—ï¼Œæé«˜æ€§èƒ½</li>
</ul>
<p>æ³¨æ„ï¼šå·¥ä½œä¸­å¦‚æœéœ€è¦è¿”å›æ•°æ®çš„è¿‡ç¨‹ä¸­è¿›è¡Œä¼˜åŒ–ï¼Œåˆ™ä¸€èˆ¬æˆ‘ä»¬é€‰æ‹©ä½¿ç”¨<code>values()</code>æˆ–<code>values_list()</code>è¿”å›å­—æ®µï¼Œæ¯”æˆ‘ä»¬æ“ä½œæ¨¡å‹å¯¹è±¡æ•ˆç‡æ›´é«˜ï¼å½“ç„¶ä»æä¾›çš„åŠŸèƒ½æ“ä½œä¸Šæ¥è¯´ï¼Œè‚¯å®šæ¨¡å‹å¯¹è±¡æ›´å¼ºå¤§çµæ´»ã€‚</p>

<pre class="language-python"><code class="language-python"># æ‰€æœ‰åŸºäºallæ–¹æ³•è¿”å›çš„ç»“æœï¼Œéƒ½æ˜¯Queryï¼ˆæŸ¥è¯¢é›†ï¼‰ï¼Œè·¯å¾„ï¼š django.db.models.query.QuerySet

# æŸ¥è¯¢å‡º301ç­æ˜¯å¦æœ‰ç”·ç”Ÿ
# student_list = Student.objects.filter(classmate=&quot;301&quot;)
# student_list = student_list.order_by(&quot;-age&quot;)
# student_list = student_list.filter(sex=1)
# ret = student_list.exists()

# values æŠŠæŸ¥è¯¢ç»“æœä¸­æ¨¡å‹å¯¹è±¡è½¬æ¢æˆå­—å…¸
student_list = Student.objects.filter(classmate=&quot;301&quot;)
student_list = student_list.order_by(&quot;-age&quot;)
student_list = student_list.filter(sex=1)
ret1 = student_list.values() # é»˜è®¤æŠŠæ‰€æœ‰å­—æ®µå…¨éƒ¨è½¬æ¢å¹¶è¿”å›
ret2 = student_list.values(&quot;id&quot;,&quot;name&quot;,&quot;age&quot;) # å¯ä»¥é€šè¿‡å‚æ•°è®¾ç½®è¦è½¬æ¢çš„å­—æ®µå¹¶è¿”å›
ret3 = student_list.values_list() # é»˜è®¤æŠŠæ‰€æœ‰å­—æ®µå…¨éƒ¨è½¬æ¢å¹¶è¿”å›
ret4 = student_list.values_list(&quot;id&quot;,&quot;name&quot;,&quot;age&quot;) # å¯ä»¥é€šè¿‡å‚æ•°è®¾ç½®è¦è½¬æ¢çš„å­—æ®µå¹¶è¿”å›
print(ret4)
return JsonResponse({},safe=False)
</code></pre>
<h5 id="QuerySet%E7%9A%84%E4%B8%A4%E5%A4%A7%E7%89%B9%E6%80%A7">QuerySetçš„ä¸¤å¤§ç‰¹æ€§</h5>
<p>å­¦ä¹ ä¹‹å‰çš„å‡†å¤‡å·¥ä½œ</p>
<p>ä¸ºäº†è§‚å¯ŸQuerySetçš„2ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åˆ°mysqlé…ç½®mysql.iniä¸­é…ç½®æŸ¥çœ‹SQLçš„è¿è¡Œæ—¥å¿—</p>

<pre class="language-python"><code class="language-python">&quot;&quot;&quot;
è¯´æ˜ï¼š
å¼€å¯mysqlæ•°æ®åº“æ—¥å¿—æœ‰2ç§æ–¹å¼ï¼š
   ä¸´æ—¶å¼€å¯, é€šè¿‡mysqläº¤äº’ç»ˆç«¯ä¸´æ—¶è®¾ç½®ï¼Œå¦‚æœæœåŠ¡å™¨é‡å¯æˆ–è€…mysqlé‡å¯ï¼Œåˆ™æ—¥å¿—çš„é…ç½®ä¿¡æ¯è¿˜åŸã€‚
   æ°¸ä¹…å¼€å¯, é€šè¿‡mysqlçš„é…ç½®æ–‡ä»¶è¿›è¡Œå‚æ•°è®¾ç½®ï¼Œå°†æ¥å³ä¾¿æœåŠ¡å™¨é‡å¯æˆ–mysqlé‡å¯ï¼Œéƒ½ä¸ä¼šå…³é—­æ—¥å­åŠŸèƒ½
æ­¤å¤„æˆ‘ä»¬è®¾ç½®çš„æ‰“å°æ—¥å¿—æ˜¯è¾“å…¥ä¸´æ—¶å¼€å¯ï¼Œç”¨äºè¾…åŠ©å­¦ä¹ ä¹‹ç”¨ï¼Œæ•°æ®åº“å…³é—­æˆ–é‡å¯ä»¥åå°±å¤±æ•ˆäº†
&quot;&quot;&quot;
-- æŸ¥çœ‹æ—¥å¿—åŠŸèƒ½æ˜¯å¦å¼€å¯äº†ï¼Œæ¥ä¸‹æ¥åœ¨mysqlç»ˆç«¯ä¸‹å¼€å¯æ—¥å¿—æ˜¾ç¤ºï¼Œæ ¹æ®ä¸‹é¢æç¤ºè¾“å…¥å‘½ä»¤å’ŒSQL
-- è¿›å…¥æ•°æ®åº“ç»ˆç«¯[è´¦æˆ·ä¸å¯†ç è‡ªå·±ä¿®æ”¹ä¸‹]
mysql -uroot -p123
show variables like &quot;%general_log%&quot;;
--    +------------------+------------------------------------------------------+
--    | Variable_name    | Value                                                |
--    +------------------+------------------------------------------------------+
--    | general_log      | OFF                                                  |  # OFFè¡¨ç¤ºæ²¡æœ‰å¼€å¯æ™®é€šæ—¥å¿—åŠŸèƒ½
--    | general_log_file | C:\tool\mysql-8.0.28-winx64\data\WIN-Q0O96JBBIJ2.log |  # è¿™é‡Œè®°å½•çš„æ˜¯æ™®é€šæ—¥å¿—å¼€å¯ä»¥åï¼Œæ—¥å¿—æ–‡ä»¶è·¯å¾„
--    +------------------+------------------------------------------------------+

set global general_log = 'ON';       -- è®¾ç½®ä¸´æ—¶å¼€å¯ï¼Œmysqlé‡å¯åå…³é—­
set global general_log_file = 'C:/Users/Administrator/Desktop/rg2305/day06/general.log'; -- å¯ä»¥ä¸è®¾ç½®æ—¥å¿—è·¯å¾„ï¼Œé»˜è®¤æ—¥å¿—è·¯å¾„[è·¯å¾„ä¸è¦åŒ…æ‹¬ç‰¹æ®Šå­—ç¬¦ä¹Ÿä¸è¦å‡ºç°ä¸­æ–‡ï¼Œè·¯å¾„åˆ†éš”ç¬¦ä½¿ç”¨æ­£æ–œæ ]

--   +------------------+---------------------------------------------------------+
--   | Variable_name    | Value                                                   |
--   +------------------+---------------------------------------------------------+
--   | general_log      | ON                                                    |   # æ—¥å¿—åŠŸèƒ½ä¹Ÿå¼€å¯äº†
--   | general_log_file | C:/Users/Administrator/Desktop/rg2305/day06/general.log |  # å¯ä»¥çœ‹åˆ°è·¯å¾„å‘ç”Ÿæ”¹å˜äº†ï¼Œã€‚
--   +------------------+---------------------------------------------------------+


-- mysqlæ—¥å¿—æ–‡ä»¶ä¸­æ—¶é—´ä¸€èˆ¬è·Ÿç³»ç»Ÿæ—¶é—´æ˜¯å¯¹ä¸ä¸Šçš„ã€‚åŸå› æ˜¯mysqlçš„æ—¶åŒºæ˜¯0æ—¶åŒºï¼Œæˆ‘ä»¬è¿™è¾¹æ˜¯ä¸œå…«åŒºã€‚
select @@log_timestamps;
--      +------------------+
--      | @@log_timestamps |
--      +------------------+
--      | UTC              |   # å¯ä»¥å‘ç°æ˜¯UTCï¼Œ0æ—¶åŒº
--      +------------------+
set global log_timestamps=SYSTEM;  # å¦‚æœè¦æ°¸ä¹…è®¾ç½®ï¼Œåœ¨ä¸Šé¢é…ç½®æ–‡ä»¶ä¸­ï¼Œæ·»åŠ  log_timestamps = SYSTEM
--      +------------------+
--      | @@log_timestamps |
--      +------------------+
--      | SYSTEM           |   # æ—¶åŒºå‚è€ƒå½“å‰æ“ä½œç³»ç»Ÿ
--      +------------------+

-- é€€å‡ºæ•°æ®åº“ç»ˆç«¯
exit

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰“å¼€ä¸Šé¢é…ç½®å¥½çš„æ—¥å¿—æ–‡ä»¶å°±å¯ä»¥äº†ã€‚
</code></pre>
<h5 id="1%EF%BC%89%E6%83%B0%E6%80%A7%E6%89%A7%E8%A1%8C">1ï¼‰æƒ°æ€§æ‰§è¡Œ</h5>
<p>QuerySetæŸ¥è¯¢é›†åœ¨åˆ›å»ºæ—¶æ˜¯ä¸ä¼šè®¿é—®æ•°æ®åº“æ‰§è¡ŒSQLè¯­å¥ï¼Œç›´åˆ°æ¨¡å‹å¯¹è±¡è¢«è°ƒç”¨è¾“å‡ºæˆ–è€…è°ƒç”¨æ¨¡å‹å¯¹è±¡çš„å±æ€§æ—¶ï¼Œæ‰ä¼šçœŸæ­£çš„è®¿é—®æ•°æ®åº“æ‰§è¡ŒSQLè¯­å¥ï¼Œè°ƒç”¨æ¨¡å‹çš„æƒ…å†µåŒ…æ‹¬<strong>å¾ªç¯è¿­ä»£ã€åºåˆ—åŒ–ã€ä¸ifåˆç”¨ï¼Œprint</strong>çš„æ—¶å€™ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå½“æ‰§è¡Œå¦‚ä¸‹è¯­å¥æ—¶ï¼Œå¹¶æœªè¿›è¡Œæ•°æ®åº“æŸ¥è¯¢ï¼Œåªæ˜¯åˆ›å»ºäº†ä¸€ä¸ªæŸ¥è¯¢é›†å¯¹è±¡student_listï¼Œå¹¶æ²¡æœ‰æ‰§è¡ŒSQLè¯­å¥çš„ã€‚</p>

<pre class="language-python"><code class="language-python">student_list = Student.objects.all()
</code></pre>
<p>ç»§ç»­æ‰§è¡Œéå†è¿­ä»£ã€æˆ–æ‰“å°æ“ä½œä¹‹åæ“ä½œåï¼Œæ‰çœŸæ­£çš„è¿›è¡Œäº†æ•°æ®åº“çš„æŸ¥è¯¢</p>

<pre class="language-python"><code class="language-python">for student in student_list:
    pass
</code></pre>
<p>æƒ°æ€§æ‰§è¡Œï¼Œå¯ä»¥è®©é‡å¤çš„æŸ¥è¯¢æ“ä½œï¼Œåªæ‰§è¡Œä¸€æ¬¡ã€‚</p>
<h5 id="2%EF%BC%89%E7%BC%93%E5%AD%98%E7%BB%93%E6%9E%9C">2ï¼‰ç¼“å­˜ç»“æœ</h5>
<p>ä½¿ç”¨åŒä¸€ä¸ªæŸ¥è¯¢é›†ï¼Œç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶ä¼šå‘ç”Ÿæ•°æ®åº“çš„æŸ¥è¯¢ï¼Œç„¶åDjangoä¼šæŠŠç»“æœç¼“å­˜ä¸‹æ¥ï¼Œå†æ¬¡ä½¿ç”¨è¿™ä¸ªæŸ¥è¯¢é›†æ—¶ä¼šä½¿ç”¨ç¼“å­˜çš„æ•°æ®ï¼Œ<strong>å‡å°‘äº†æ•°æ®åº“çš„æŸ¥è¯¢æ¬¡æ•°</strong>ã€‚</p>
<p><strong>æƒ…å†µä¸€</strong>ï¼šå¦‚ä¸‹æ˜¯ä¸¤ä¸ªæŸ¥è¯¢é›†ï¼Œæ— æ³•é‡ç”¨ç¼“å­˜ï¼Œæ¯æ¬¡æŸ¥è¯¢éƒ½ä¼šä¸æ•°æ®åº“è¿›è¡Œä¸€æ¬¡äº¤äº’ï¼Œå¢åŠ äº†æ•°æ®åº“çš„è´Ÿè½½ã€‚</p>

<pre class="language-python"><code class="language-python">from .models import Student
[student.id for student in Student.objects.all()] # å› ä¸ºæ²¡æœ‰ç¼“å­˜æŸ¥è¯¢é›†åˆ°å˜é‡ä¸­ï¼Œæ‰€ä»¥æ­¤å¤„ç¬¬ä¸€æ¬¡æ‰§è¡Œäº†SQLè¯­å¥
[student.id for student in Student.objects.all()] # å› ä¸ºæ²¡æœ‰ç¼“å­˜æŸ¥è¯¢é›†åˆ°å˜é‡ä¸­ï¼Œæ‰€ä»¥æ­¤å¤„ç¬¬ä¸€æ¬¡æ‰§è¡Œäº†SQLè¯­å¥
</code></pre>
<p><strong>æƒ…å†µäºŒ</strong>ï¼šç»è¿‡å­˜å‚¨åï¼Œå¯ä»¥é‡ç”¨æŸ¥è¯¢é›†ï¼Œç¬¬äºŒæ¬¡ä½¿ç”¨ç¼“å­˜ä¸­çš„æ•°æ®ã€‚</p>

<pre class="language-python"><code class="language-python">student_list=Student.objects.all()
[student.id for student in student_list] # å› ä¸ºä¸Šé¢ä¿å­˜åˆ°æŸ¥è¯¢åˆ°å˜é‡ä¸­ï¼Œæ‰€ä»¥æ­¤å¤„æ‰§è¡Œäº†SQLè¯­å¥
[student.id for student in student_list] # æ­¤å¤„è°ƒç”¨äº†ä¹‹å‰çš„ç¼“å­˜æ•°æ®
</code></pre>
<h5 id="%E9%99%90%E5%88%B6%E7%BB%93%E6%9E%9C%E6%95%B0%E9%87%8F">é™åˆ¶ç»“æœæ•°é‡</h5>
<p>djangoä¸­è¿˜å¯ä»¥å¯¹æŸ¥è¯¢é›†QuerySetè¿›è¡Œ<strong>å–ä¸‹æ ‡æˆ–åˆ‡ç‰‡æ“ä½œï¼Œç­‰åŒäºSQLä¸­çš„limitå’Œoffsetå­å¥</strong>ã€‚</p>
<p>æ³¨æ„ï¼šQuerySetæ¯•ç«Ÿä¸æ˜¯çœŸæ­£çš„åˆ—è¡¨ï¼Œæ‰€ä»¥å®ƒ<strong>ä¸æ”¯æŒè´Ÿæ•°ç´¢å¼•</strong>ã€‚</p>
<p><strong>å¯¹æŸ¥è¯¢é›†QuerySetè¿›è¡Œåˆ‡ç‰‡åè¿”å›ä¸€ä¸ªæ–°çš„æŸ¥è¯¢é›†ï¼Œä½†è¿˜æ˜¯ä¸ä¼šç«‹å³æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢ã€‚</strong></p>
<p>å¦‚æœè·å–ä¸€ä¸ªå¯¹è±¡ï¼Œç›´æ¥ä½¿ç”¨[0]ï¼Œç­‰åŒäº[0:1].get()ï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰æ•°æ®ï¼Œ[0]å¼•å‘IndexErrorå¼‚å¸¸ï¼Œ[0:1].get()å¦‚æœæ²¡æœ‰æ•°æ®å¼•å‘DoesNotExistå¼‚å¸¸ã€‚</p>
<p>ç¤ºä¾‹ï¼šè·å–ç¬¬1ã€2é¡¹ï¼Œè¿è¡ŒæŸ¥çœ‹ã€‚</p>

<pre class="language-python"><code class="language-python">qs = Student.objects.all()[0:2]
</code></pre>
<p>ä»£ç ï¼š</p>

<pre class="language-python"><code class="language-python"># æŸ¥è¯¢é›†ç»“æœæ•°é‡çš„ä¸‹æ ‡å’Œåˆ‡ç‰‡æ“ä½œ
qs = Student.objects.all()
# print(qs[0])  # ç¬¬1æ¡æ•°æ®ï¼Œ ORMä¼šè‡ªåŠ¨è¯†åˆ«è¿™ä¸ªæ“ä½œå¹¶è½¬åŒ–æˆSQLè¯­å¥çš„ limit 1
# print(qs[2])  # ç¬¬3æ¡æ•°æ®ï¼Œ ORMä¼šè‡ªåŠ¨è¯†åˆ«è¿™ä¸ªæ“ä½œå¹¶è½¬åŒ–æˆSQLè¯­å¥çš„ limit 1 offset 2
# print(qs[:2])   # å‰2æ¡æ•°æ®ï¼Œ ORMä¼šè‡ªåŠ¨è¯†åˆ«è¿™ä¸ªæ“ä½œå¹¶è½¬åŒ–æˆSQLè¯­å¥çš„ limit 2
# print(qs[1:4])  # ç¬¬1ï¼Œ2ï¼Œ3 æ•°æ®ï¼Œ ORMä¼šè‡ªåŠ¨è¯†åˆ«è¿™ä¸ªæ“ä½œå¹¶è½¬åŒ–æˆSQLè¯­å¥çš„ limit 3 offset 1
# print( qs[-1] )   # æŠ¥é”™ï¼ï¼ï¼ä¸èƒ½ä½¿ç”¨è´Ÿæ•°
</code></pre>
<h3 id="%E8%81%9A%E5%90%88%E5%88%86%E7%BB%84">èšåˆåˆ†ç»„</h3>
<h4 id="%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%28%E5%B9%B3%E5%9D%87/%E6%9C%80%E5%A4%A7%E5%80%BC...%29">èšåˆå‡½æ•°(å¹³å‡/æœ€å¤§å€¼...)</h4>
<p>djangoä¸­ï¼Œå¯ä»¥ä½¿ç”¨aggregate()è¿‡æ»¤å™¨è°ƒç”¨èšåˆå‡½æ•°ã€‚èšåˆå‡½æ•°åŒ…æ‹¬ï¼š<strong>Avg</strong> å¹³å‡ï¼Œ<strong>Count</strong> æ€»æ•°ï¼Œ<strong>Max</strong> æœ€å¤§ï¼Œ<strong>Min</strong> æœ€å°ï¼Œ<strong>Sum</strong> æ±‚å’Œï¼Œè¢«å®šä¹‰åœ¨django.db.modelsä¸­ã€‚</p>
<p>ä¾‹ï¼šæŸ¥è¯¢301ç­å­¦ç”Ÿçš„å¹³å‡å¹´é¾„ã€‚</p>

<pre class="language-python"><code class="language-python">&quot;&quot;&quot;èšåˆå‡½æ•°&quot;&quot;&quot;
from django.db.models import Avg,Max,Min,Sum,Count
# æŸ¥è¯¢301ç­å­¦ç”Ÿçš„å¹³å‡å¹´é¾„
ret = Student.objects.filter(classmate=301).aggregate(Avg(&quot;age&quot;))
# print(ret) # {'age__avg': 19.6364}

# æŸ¥è¯¢301ç­å¹´é¾„æœ€å¤§çš„å­¦ç”Ÿ
ret = Student.objects.filter(classmate=301).aggregate(Max(&quot;age&quot;))
# print(ret)  # {'age__max': 23}

# æŸ¥æ–°301ç­å…¥å­¦æœ€æ—©çš„å­¦ç”Ÿ[ä¹Ÿå°±æ˜¯IDæœ€å°çš„]
ret = Student.objects.filter(classmate=301).aggregate(c=Min(&quot;id&quot;))
print(ret) # {'id__min': 2}  ==&gt; {'c': 2}
</code></pre>
<p>æ³¨æ„ï¼šaggregateçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªå­—å…¸ç±»å‹ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p>

<pre class="language-python"><code class="language-python">{'å±æ€§å__èšåˆç±»å°å†™':å€¼}
å¦‚:{'id__min': 2}  ==&gt; {'c': 2}
</code></pre>
<p>ä½¿ç”¨countæ—¶ä¸€èˆ¬ä¸ä½¿ç”¨aggregate()è¿‡æ»¤å™¨ã€‚</p>
<p>ä¾‹ï¼šæŸ¥è¯¢301ç­çš„å­¦ç”Ÿæ€»æ•°ã€‚</p>

<pre class="language-python"><code class="language-python"># æŸ¥è¯¢301ç­çš„æ€»äººæ•°
ret = Student.objects.filter(classmate=301).aggregate(t=Count(&quot;id&quot;))
print(ret) # {'t':11}

# ç»Ÿè®¡æ€»æ•°ï¼Œå®Œå…¨å¯ä»¥è°ƒç”¨countæ–¹æ³•å³å¯ï¼Œä¸éœ€è¦ç»è¿‡aggregateçš„è°ƒç”¨
ret = Student.objects.filter(classmate=301).count()
print(ret) # 11
</code></pre>
<p>æ³¨æ„ï¼šcountå‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªæ•°å­—ã€‚</p>
<h4 id="%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2">åˆ†ç»„æŸ¥è¯¢</h4>
<p>å¯ä»¥å…ˆä½¿ç”¨<code>values</code>è¿›è¡Œåˆ†ç»„, valuesæ”¾åœ¨ä¸åŒçš„ä½ç½®çš„æ—¶å€™å«ä¹‰æ˜¯ä¸åŒçš„</p>
<table>
<thead>
<tr>
  <th>id</th>
  <th>name</th>
  <th>class</th>
</tr>
</thead>
<tbody>
<tr>
  <td>1</td>
  <td>xiaoming</td>
  <td>301</td>
</tr>
<tr>
  <td>2</td>
  <td>xiaohong</td>
  <td>301</td>
</tr>
<tr>
  <td>3</td>
  <td>xiaoli</td>
  <td>302</td>
</tr>
</tbody>
</table>

<pre class="language-python"><code class="language-python">QuerySetå¯¹è±¡.annotate()
# annotate() è¿›è¡Œåˆ†ç»„ç»Ÿè®¡ï¼ŒæŒ‰å‰é¢valuesçš„å­—æ®µè¿›è¡Œ group by
# annotate() è¿”å›å€¼ä¾ç„¶æ˜¯ querysetå¯¹è±¡ï¼Œå¢åŠ äº†åˆ†ç»„ç»Ÿè®¡åçš„é”®å€¼å¯¹

# SQLåŸç”Ÿè¯­å¥ä¸­åˆ†ç»„ä¹‹åå¯ä»¥ä½¿ç”¨havingè¿‡æ»¤ï¼Œåœ¨djangoä¸­å¹¶æ²¡æœ‰æä¾›havingå¯¹åº”çš„æ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨filterå¯¹åˆ†ç»„ç»“æœè¿›è¡Œè¿‡æ»¤
# æ‰€ä»¥filteråœ¨annotateä¹‹å‰ï¼Œè¡¨ç¤ºåˆ†ç»„æŸ¥è¯¢ä¹‹é—´çš„whereå­å¥ï¼Œåœ¨annotateä¹‹åä»£è¡¨åˆ†ç»„ç»“æœçš„havingå­å¥
# åŒç†ï¼Œvaluesåœ¨annotateä¹‹å‰ï¼Œä»£è¡¨åˆ†ç»„çš„å­—æ®µï¼Œåœ¨annotateä¹‹åä»£è¡¨æ•°æ®æŸ¥è¯¢ç»“æœè¿”å›çš„å­—æ®µåˆ—
</code></pre>
<p>ä»£ç ï¼š</p>

<pre class="language-python"><code class="language-python"># æŸ¥è¯¢å„ä¸ªç­çº§ä¸­çš„å­¦ç”Ÿæ•°é‡
from django.db.models import Count,Min
# é’ˆå¯¹å•ä¸ªå­—æ®µè¿›è¡Œåˆ†ç»„  values(&quot;classmate&quot;).annotate(total=Count(&quot;id&quot;)  æŒ‰ç­çº§ç»Ÿè®¡äººæ•°
ret = Student.objects.values(&quot;classmate&quot;).annotate(total=Count(&quot;id&quot;)) # totalæ˜¯è¿”å›çš„å‚æ•°çš„åå­—
# print(ret)
&quot;&quot;&quot;
        &lt;QuerySet [
            {'classmate': '307', 'total': 3}, 
            {'classmate': '301', 'total': 11}, 
            {'classmate': '504', 'total': 2}, 
            ....
        ]&gt;
&quot;&quot;&quot;
# é’ˆå¯¹å¤šä¸ªå­—æ®µè¿›è¡Œåˆ†ç»„  values(&quot;classmate&quot;,&quot;xingbie&quot;).annotate(total=Count(&quot;id&quot;)) æŒ‰ ç­çº§å’Œæ€§åˆ« ç»Ÿè®¡äººæ•°
ret = Student.objects.values(&quot;classmate&quot;,&quot;xingbie&quot;).annotate(total=Count(&quot;id&quot;))
# print(ret)
&quot;&quot;&quot;
        &lt;QuerySet [
            {'classmate': '307', 'xingbie': 1, 'total': 3}, 
            {'classmate': '301', 'xingbie': 1, 'total': 8}, 
            {'classmate': '301', 'xingbie': 2, 'total': 2},
            {'classmate': '301', 'xingbie': 0, 'total': 1},
            {'classmate': '504', 'xingbie': 1, 'total': 2},
            ...
        ]&gt;
        &quot;&quot;&quot;

# æŸ¥è¯¢å‡ºæ¯ä¸€ä¸ªç­çº§ä¸­å¹´é¾„æœ€å°çš„å­¦ç”Ÿä¿¡æ¯
ret = Student.objects.values(&quot;classmate&quot;).annotate(min=Min(&quot;age&quot;))
# print(ret)
&quot;&quot;&quot;
           &lt;QuerySet [
                {'classmate': '307', 'min': 19}, 
                {'classmate': '301', 'min': 17}, 
                {'classmate': '504', 'min': 19},
                ....
           ]&gt;     
&quot;&quot;&quot;
ret = Student.objects.values(&quot;classmate&quot;).annotate(min=Min(&quot;age&quot;)).values(&quot;classmate&quot;,&quot;min&quot;).order_by(&quot;classmate&quot;)
# print(ret)
&quot;&quot;&quot;
        &lt;QuerySet [
            {'classmate': '301', 'min': 17}, 
            {'classmate': '302', 'min': 21}, 
            {'classmate': '303', 'min': 19},
            ...
        ]&gt;
&quot;&quot;&quot;

# æŸ¥è¯¢å‡ºäººæ•°åœ¨4ä¸ªäººä»¥ä¸Š(åŒ…æ‹¬4ä¸ªäºº)çš„ç­çº§
# å†™åœ¨annotateåé¢çš„filterå®é™…ä¸Šè¡¨ç¤ºçš„æ˜¯havingï¼Œè¡¨ç¤ºå¯¹äºåˆ†ç»„åçš„æ•°æ®ç»“æœè¿›è¡Œè¿‡æ»¤
# å†™åœ¨annotateå‰é¢çš„filterå®é™…ä¸Šè¡¨ç¤ºçš„æ˜¯whereï¼Œ è¡¨ç¤ºå¯¹äºåˆ†ç»„å‰çš„æ•°æ®ç»“æœè¿›è¡Œè¿‡æ»¤
ret = Student.objects.values(&quot;classmate&quot;).annotate(total=Count(&quot;id&quot;)).values(&quot;classmate&quot;,&quot;total&quot;).filter(total__gte=4)
# print(ret)
&quot;&quot;&quot;
        &lt;QuerySet [
            {'classmate': '301', 'total': 11}, 
            {'classmate': '502', 'total': 5}, 
            {'classmate': '306', 'total': 6}, 
            {'classmate': '503', 'total': 7}, 
            {'classmate': '508', 'total': 4}, 
            ....
        ]&gt;
&quot;&quot;&quot;
# æŸ¥è¯¢å‡ºå¥³ç”Ÿæ•°é‡åœ¨2ä¸ªä»¥ä¸Šçš„ç­çº§
ret = Student.objects.filter(sex=2).values(&quot;classmate&quot;).annotate(total=Count(&quot;id&quot;)).values(&quot;classmate&quot;,&quot;total&quot;).filter(total__gte=2)
print(ret)
&quot;&quot;&quot;
        &lt;QuerySet [
            {'classmate': '306', 'total': 4}, 
            {'classmate': '405', 'total': 2}, 
            {'classmate': '502', 'total': 3}, 
            ....
        ]&gt;
&quot;&quot;&quot;
</code></pre>
<h3 id="%E5%8E%9F%E7%94%9F%E6%9F%A5%E8%AF%A2">åŸç”ŸæŸ¥è¯¢</h3>
<p>æ‰§è¡ŒåŸç”ŸSQLè¯­å¥ï¼Œåœ¨djangoä¸­æˆ‘ä»¬å¯ä»¥è‡ªå·±å¼•å…¥pymysqlæ‰§è¡ŒSQLï¼Œä¹Ÿå¯ä»¥è°ƒç”¨ORMæä¾›çš„rawæ–¹æ³•æ¥æ‰§è¡ŒSQLè¯­å¥</p>
<p>å¦‚æœä½¿ç”¨rawæ–¹æ³•æ‰§è¡ŒSQLè¯­å¥ï¼Œåˆ™è¿”å›ç»“æœæ˜¯QuerySetï¼Œè¿™ä¸ªè¿”å›ç»“æœåœ¨æ“ä½œå­—æ®µæ—¶ï¼Œä¼šæœ‰é¢å¤–æ€§èƒ½æŸè€—ã€‚</p>

<pre class="language-python"><code class="language-python"># æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿçš„ç­çº§ã€å¹´é¾„ã€å§“åå’Œæ€§åˆ«
sql = &quot;SELECT id,name,sex,age,class FROM `db_student`&quot;
ret = Student.objects.raw(sql)
# é’ˆå¯¹åŸç”ŸSQLè¯­å¥ä¸­å·²ç»æŸ¥è¯¢å‡ºæ¥çš„å­—æ®µï¼Œåªä¼šæŸ¥è¯¢ä¸€é
# ä½†æ˜¯å¦‚æœSQLè¯­å¥æ²¡æœ‰æŸ¥è¯¢å‡ºæ¥çš„å­—æ®µï¼Œè€Œåœ¨æ¨¡å‹ä¸­è°ƒç”¨ï¼Œåˆ™ä¼šç”±ORMå†æ¬¡è°ƒç”¨æ•°æ®åº“æŸ¥è¯¢ï¼ŒæŠŠæ•°æ®ä¸´æ—¶æŸ¥è¯¢å‡ºæ¥ã€‚
for student in ret:
    print(student)
    print(student.description)
</code></pre>
<h1 id="%E5%A4%9A%E6%95%B0%E6%8D%AE%E5%BA%93">å¤šæ•°æ®åº“</h1>
<h2 id="%E5%A4%9A%E5%BA%93%E5%85%B1%E5%AD%98">å¤šåº“å…±å­˜</h2>
<p>åœ¨djangoä¸­ï¼Œsettings.pyé…ç½®çš„DATABASESé…ç½®é¡¹å…è®¸æ³¨å†Œå¤šä¸ªæ•°æ®åº“ï¼Œå½“ç„¶ä¹Ÿå°±æ”¯æŒåœ¨é¡¹ç›®ä¸­éšæ—¶åˆ‡æ¢æ“ä½œä¸åŒçš„æ•°æ®åº“äº†ã€‚</p>
<ol>
<li>å…ˆåˆ°<code>djdemo/settings.py</code>é‡Œé¢ï¼Œåœ¨DATABASESé…ç½®é¡¹ä¸­æ–°å¢ä¸€ä¸ªæ•°æ®åº“</li>
<li>ä¸ºäº†æ–¹ä¾¿å¿«é€Ÿæ¼”ç¤ºï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥æŠŠschoolé‡Œé¢çš„studentå¤åˆ¶åˆ°studentæ•°æ®åº“</li>
</ol>

<pre class="language-mysql"><code class="language-mysql">use students; # åˆ‡æ¢æ•°æ®
create table student (
id  bigint auto_increment primary key,
created_time datetime(6) null,
updated_time datetime(6) null,
name         varchar(15) not null,
age          smallint    not null,
sex          tinyint(1)  not null,
class        varchar(50) not null,
mobile       varchar(20) not null,
description  longtext    null,
status       int         null,
constraint mobile unique (mobile)
);
</code></pre>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202507311549034.png" alt="image-20250731154900919" /></p>
<ol start="3">
<li>ä½¿ç”¨ä»¥ä¸‹è¯­å¥å¤åˆ¶studentè¡¨çš„æ‰€æœ‰æ•°æ®</li>
</ol>

<pre class="language-mysql"><code class="language-mysql">insert into `students`.`students` (id, created_time, updated_time, name, age, sex, class, mobile, description, status)
select id, created_time, updated_time, name, age, sex, class, mobile, description, status from `school1`.`students`;
</code></pre>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202507311547963.png" alt="image-20250731154742871" /></p>
<ol start="4">
<li>æ·»åŠ åˆ°settings.pyé‡Œé¢</li>
</ol>

<pre class="language-python"><code class="language-python">DATABASES = {
    # 'default': {
    #     'ENGINE': 'django.db.backends.sqlite3',
    #     'NAME': BASE_DIR / 'db.sqlite3',
    # }
    'default': {
        'ENGINE': 'django.db.backends.mysql',  # ORMçš„åº•å±‚å¯¹æ¥pymysqlçš„æ ¸å¿ƒå¼•æ“ç±»
        'NAME': 'school1',          # æ•°æ®åº“å
        'PORT': 3306,              # ç«¯å£
        'HOST': '127.0.0.1',       # æ•°æ®åº“IP
        'USER': 'root',            # è´¦å·
        'PASSWORD': 'jhy030116',         # å¯†ç 
        'POOL_OPTIONS': {  # poolè¡¨ç¤ºæ•°æ®åº“è¿æ¥æ± é…ç½®ï¼Œä¸»è¦ä¸ºäº†èŠ‚çœè¿æ¥æ•°æ®åº“çš„å¼€é”€ï¼Œä¸´æ—¶å­˜å‚¨æ•°æ®åº“è¿æ¥å¯¹è±¡
            'POOL_SIZE': 10,     # é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰“å¼€çš„æ•°æ®åº“è¿æ¥å¯¹è±¡çš„æ•°é‡ [1,2,3,4,5,6,7,8,9,10]
            'MAX_OVERFLOW': 30,  # è´Ÿè½½æƒ…å†µä¸‹ï¼Œå…è®¸æº¢å‡ºçš„è¿æ¥æ•°é‡  [11,12,13,14,15,16,17,18,19,20]
        }
    },
    &quot;djdemo&quot;: {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'students',
        'PORT': 3306,
        'HOST': '127.0.0.1',
        'USER': 'root',
        'PASSWORD': 'jhy030116',
        'POOL_OPTIONS': {
            'POOL_SIZE': 10,     # é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰“å¼€çš„æ•°æ®åº“è¿æ¥å¯¹è±¡çš„æ•°é‡ [1,2,3,4,5,6,7,8,9,10]
            'MAX_OVERFLOW': 30,  # è´Ÿè½½æƒ…å†µä¸‹ï¼Œå…è®¸æº¢å‡ºçš„è¿æ¥æ•°é‡  [11,12,13,14,15,16,17,18,19,20]
        }
    }
}
</code></pre>
<ol start="5">
<li>åˆ‡æ¢é“¾æ¥</li>
</ol>

<pre class="language-python"><code class="language-python">def get(self, request):
    &quot;&quot;&quot;å¤šåº“å…±å­˜ä¸‹ï¼ŒåŸºäºdjangoåº•å±‚å®‰è£…çš„pymysqlæ¥ä½¿ç”¨åŸç”ŸSQLè¯­å¥æ“ä½œçš„åˆ‡æ¢æ•°æ®è¿æ¥ï¼Œå®Œæˆæ•°æ®åº“æŸ¥è¯¢çš„è¿‡ç¨‹&quot;&quot;&quot;
    # from django.db import connections
    # with connections[&quot;djdemo&quot;].cursor() as cursor:
    #     # è®©æ¸¸æ ‡æ‰§è¡ŒSQLè¯­å¥
    #     cursor.execute(&quot;select * from student&quot;)
    #     # é€šè¿‡æ¸¸æ ‡è·å–æŸ¥è¯¢ç»“æœ
    #     result = cursor.fetchall()
    #     print(result)

    &quot;&quot;&quot;å¤šåº“å…±å­˜ä¸‹ï¼ŒåŸºäºdjangoçš„ORMæ¨¡å‹æ“ä½œï¼Œæ¥åˆ‡æ¢æ•°æ®è¿æ¥å®Œæˆæ•°æ®åº“æ“ä½œçš„è¿‡ç¨‹&quot;&quot;&quot;
    student_objs = models.Student.objects.using(&quot;default&quot;).values(&quot;name&quot;, &quot;age&quot;)
    print(student_objs)
    return JsonResponse({})

</code></pre>
<h2 id="%E5%85%B3%E8%81%94%E6%A8%A1%E5%9E%8B">å…³è”æ¨¡å‹</h2>
<p>å…³è”æ¨¡å‹å®é™…ä¸Šå°±æ˜¯ORMæä¾›ç»™å¼€å‘è€…ç”¨äºæ“ä½œå¤šè¡¨æ•°æ®çš„åŠŸèƒ½ã€‚å› ä¸ºå¤šä¸ªè¡¨ä¹‹é—´çš„å­˜åœ¨çš„å…³è”å…³ç³»ï¼Œå¾€å¾€éƒ½æ˜¯åŸºäºå»ºåº“å»ºè¡¨ä¹‹åˆçš„å®ä½“å…³ç³»åˆ†æ( ERå›¾ ) å’Œ èŒƒå¼ç†è®º æ¢³ç†å‡ºæ¥çš„ã€‚</p>
<p>æ„å»ºæ•°æ®åº“å’Œæ„å»ºæ•°æ®è¡¨ï¼šå®ä½“ã€å±æ€§ã€å…³ç³»ã€‚</p>
<p>å®ä½“ï¼šåœ¨ç°å®ä¸–ç•Œä¸­ï¼Œå®¢è§‚å­˜åœ¨çš„èƒ½å¤Ÿè¢«åŒºåˆ†çš„äººäº‹ç‰©æˆ–é›†ä½“æ¦‚å¿µã€‚</p>
<p>å±æ€§ï¼šå…·æœ‰æè¿°æ€§ã€ä¿®é¥°æ€§çš„è¯è¯­ï¼Œç”¨äºæè¿°å®ä½“çš„ç‰¹å¾çš„ã€‚</p>
<table>
<thead>
<tr>
  <th>id</th>
  <th>title</th>
  <th>price</th>
  <th>sale é”€é‡</th>
</tr>
</thead>
<tbody>
<tr>
  <td>1</td>
  <td>meta40</td>
  <td>3299</td>
  <td>15</td>
</tr>
<tr>
  <td>2</td>
  <td></td>
  <td></td>
  <td></td>
</tr>
<tr>
  <td></td>
  <td></td>
  <td></td>
  <td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
  <th>id</th>
  <th>status</th>
  <th>goods_id</th>
</tr>
</thead>
<tbody>
<tr>
  <td>1</td>
  <td>å·²æˆäº¤</td>
  <td>1</td>
</tr>
<tr>
  <td>2</td>
  <td>æœªæ”¯ä»˜</td>
  <td></td>
</tr>
<tr>
  <td></td>
  <td>å·²å–æ¶ˆ</td>
  <td></td>
</tr>
</tbody>
</table>
<h3 id="%E8%8C%83%E5%BC%8F%E7%90%86%E8%AE%BA%28%E4%B8%89%E8%8C%83%E5%BC%8F%E3%80%81%E9%80%86%E8%8C%83%E5%BC%8F%29">èŒƒå¼ç†è®º(ä¸‰èŒƒå¼ã€é€†èŒƒå¼)</h3>
<p>èŒƒå¼ç†è®ºæ˜¯å…³ç³»å‹æ¨¡å‹å»ºåº“å»ºè¡¨çš„å‚è€ƒæ ‡å‡†ã€‚</p>
<p><a href="https://baike.baidu.com/item/%E7%AC%AC%E4%B8%80%E8%8C%83%E5%BC%8F/3193590"  target="_blank">ç¬¬ä¸€èŒƒå¼</a>ï¼ˆ1NFï¼ŒåŸå­æ€§ï¼‰ï¼šæ•°æ®è¡¨çš„æ¯ä¸€åˆ—éƒ½æ˜¯ä¸å¯åˆ†å‰²ï¼Œä¸èƒ½é‡å¤ã€‚å¦‚æœå‡ºç°é‡å¤çš„å±æ€§ï¼Œå°±å¯èƒ½éœ€è¦å®šä¹‰ä¸€ä¸ªæ–°çš„å®ä½“ï¼ˆä¹Ÿå°±æ˜¯æ–°å»ºä¸€å¼ æ•°æ®è¡¨æ¥è¿›è¡Œä¿å­˜ï¼‰ã€‚</p>
<p><a href="https://baike.baidu.com/item/%E7%AC%AC%E4%BA%8C%E8%8C%83%E5%BC%8F/3193760"  target="_blank">ç¬¬äºŒèŒƒå¼</a>ï¼ˆ2NFï¼Œä¾èµ–æ€§ï¼‰ï¼šæ•°æ®è¡¨çš„æ¯ä¸€è¡Œéƒ½æ˜¯å”¯ä¸€ï¼Œéœ€è¦åˆ›å»ºIDæ¥è¿›è¡ŒåŒºåˆ†æ¯ä¸€è¡Œæ•°æ®ã€‚</p>
<p><a href="https://baike.baidu.com/item/%E7%AC%AC%E4%B8%89%E8%8C%83%E5%BC%8F/3193798"  target="_blank">ç¬¬ä¸‰èŒƒå¼</a>ï¼ˆ3NFï¼Œå†—ä½™æ€§ï¼‰ï¼šæ•°æ®è¡¨çš„æ•°æ®ä¸èƒ½å†—ä½™ï¼Œé’ˆå¯¹å†—ä½™æ•°æ®åº”è¯¥å•ç‹¬åˆ›å»ºä¸€ä¸ªæ•°æ®è¡¨ï¼Œå¹¶æŠŠIDå†™åˆ°æ–°è¡¨ä¸­è¿›è¡Œå…³è”ã€‚</p>
<p>é€†èŒƒå¼æŒ‡çš„æ˜¯é€šè¿‡å¢åŠ å†—ä½™æˆ–é‡å¤çš„æ•°æ®æ¥æé«˜æ•°æ®åº“çš„è¯»å–é€Ÿåº¦ã€‚</p>
<p>å¾€å¾€é€†èŒƒå¼éµå¾ªçš„åŸåˆ™æ˜¯ï¼š<strong>ç©ºé—´æ¢æ—¶é—´</strong>ã€‚æœ¬è´¨å°±æ˜¯ï¼š ä»¥å»‰ä»·çš„ç¡¬ç›˜ç©ºé—´ï¼Œæ¢å–çè´µçš„æ•°æ®åº“æŸ¥è¯¢æ—¶é—´ï¼Œä»¥æ›´å¿«çš„æ•°æ®ä»æ•°æ®åº“è¯»å–æ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p>
<p>ORMä¸­é’ˆå¯¹æ•°æ®è¡¨ä¹‹é—´è¿›è¡Œçš„å…³è”æ“ä½œ,ä¹Ÿå¯ä»¥å¤–é”®ç»‘å®šçš„æ“ä½œæ–¹å¼,å…¶ä¸­æ ¹æ®æ•°æ®åº“è¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³», å¯ä»¥æœ‰ä¸‰ç§ä»¥ä¸Šçš„å…³è”æ–¹å¼ï¼š1å¯¹1ï¼Œ1å¯¹å¤šï¼Œå¤šå¯¹å¤šã€‚å…¶ä¸­é’ˆå¯¹å¤–é”®è®¾ç½®çš„æ¨¡å‹ä»£ç ï¼Œåœ¨djangoä¸­ä¸€èˆ¬æœ‰2ç§<strong>æ“ä½œæ–¹å¼</strong>ï¼š</p>

<pre class="language-python"><code class="language-python"># æ­£å‘æŸ¥è¯¢æŒ‰å­—æ®µï¼Œä»ä¸»æ¨¡å‹æŸ¥è¯¢å¤–é”®æ¨¡å‹çš„æ•°æ®
    æ¨¡å‹å¯¹è±¡ = å½“å‰æ¨¡å‹.filter(xxx).first()  # ä¾‹å¦‚ï¼Œè·å–å•†å“ï¼ŒæŸ¥è¯¢å•†å“çš„åˆ†ç±»ï¼Œå‡è®¾åˆ†ç±»å±æ€§ category
    æ¨¡å‹å¯¹è±¡.å¤–é”®    # å•†å“.category  ---&gt; å•†å“åˆ†ç±»

# åå‘æŸ¥è¯¢æŒ‰è¡¨åï¼Œä»å¤–é”®æ¨¡å‹æŸ¥è¯¢ä¸»æ¨¡å‹æ•°æ®
    ä¸»é”®å¯¹è±¡ = ä¸»é”®æ¨¡å‹.filter(xxx).first()  # å…ˆæŸ¥è¯¢åˆ†ç±»  --&gt; å½“å‰åˆ†ç±»ä¸‹æœ‰å¤šå°‘å•†å“
    ä¸»é”®å¯¹è±¡.å¤–é”®æ¨¡å‹è¡¨å_set   # _setæ–¹æ³•å¯ä»¥ä½¿ç”¨related_nameä»£æ›¿ [_setæ“ä½œåœ¨ä¸€å¯¹ä¸€é‡Œé¢æ˜¯æ²¡æœ‰çš„]
</code></pre>
<p>setæ–¹æ³•æ–‡æ¡£ï¼š<a href="https://docs.djangoproject.com/zh-hans/4.0/ref/models/relations/"  target="_blank">https://docs.djangoproject.com/zh-hans/4.0/ref/models/relations/</a></p>
<h4 id="%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BE%8B">åˆ›å»ºå®ä¾‹</h4>
<h3 id="%E4%B8%80%E5%AF%B9%E4%B8%80%E5%85%B3%E8%81%94%28OneToOneField%29">ä¸€å¯¹ä¸€å…³è”(OneToOneField)</h3>
<p>åˆ›å»ºæ¨¡å‹çš„å…³è”å…³ç³»ï¼Œ<code>orm/models.py</code>ï¼Œä»£ç ï¼š</p>
<h4 id="%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0">æ¨¡å‹å®ç°</h4>
<p>ä½¿ç”¨<code>OneToOneField</code>è¿›è¡Œå…³è”</p>
<blockquote>
<h4 id="%3Ccode%3E%26quot%3BStudent%26quot%3B%3C/code%3E"><code>&quot;Student&quot;</code></h4>
<ul>
<li><strong>å…³è”çš„ç›®æ ‡æ¨¡å‹</strong>ï¼ˆè¿™é‡Œæ˜¯åä¸º <code>Student</code> çš„æ¨¡å‹ï¼‰</li>
<li>ä½¿ç”¨å­—ç¬¦ä¸²å½¢å¼é¿å…å¾ªç¯å¯¼å…¥ï¼ˆDjango ä¼šæŒ‰éœ€è§£æï¼‰</li>
<li>ç­‰æ•ˆå†™æ³•ï¼š<code>Student</code>ï¼ˆéœ€å…ˆå¯¼å…¥æ¨¡å‹ç±»ï¼‰</li>
</ul>
<h4 id="%E2%96%B6-%3Ccode%3Erelated_name%3D%26quot%3Bprofile%26quot%3B%3C/code%3E">â–¶ <code>related_name=&quot;profile&quot;</code></h4>
<ul>
<li><p><strong>åå‘å…³ç³»åç§°</strong>ï¼ˆä» <code>Student</code> è®¿é—®å½“å‰æ¨¡å‹çš„å…³é”®å­—ï¼‰</p>
</li>
<li><p>æ•ˆæœï¼šé€šè¿‡ <code>student.profile</code> ç›´æ¥è·å–å…³è”å¯¹è±¡</p>
<p>python</p>

<pre class="language-none"><code class="language-none">student = Student.objects.get(id=1)
profile = student.profile  # è·å–è¯¥å­¦ç”Ÿçš„å…³è”æ¡£æ¡ˆ
</code></pre>
</li>
<li><p>æœªè®¾ç½®æ—¶é»˜è®¤åï¼š<code>å°å†™æ¨¡å‹ç±»å</code>ï¼ˆå¦‚ <code>studentprofile</code>ï¼‰</p>
</li>
</ul>
<h4 id="%E2%96%B6-%3Ccode%3Eon_delete%3Dmodels.CASCADE%3C/code%3E">â–¶ <code>on_delete=models.CASCADE</code></h4>
<ul>
<li><strong>åˆ é™¤è”åŠ¨è§„åˆ™</strong>ï¼šå½“å…³è”çš„ <code>Student</code> è¢«åˆ é™¤æ—¶</li>
<li><code>CASCADE</code>ï¼šåŒæ­¥åˆ é™¤å½“å‰æ¨¡å‹å®ä¾‹ï¼ˆçº§è”åˆ é™¤ï¼‰<br />
  <em>ä¾‹å¦‚ï¼šåˆ é™¤å­¦ç”Ÿæ—¶ï¼Œå…¶æ¡£æ¡ˆè‡ªåŠ¨åˆ é™¤</em></li>
<li>å…¶ä»–é€‰é¡¹ï¼š<ul>
<li><code>PROTECT</code>ï¼šé˜»æ­¢åˆ é™¤ï¼ˆå¼•å‘ <code>ProtectedError</code>ï¼‰</li>
<li><code>SET_NULL</code>ï¼šè®¾ä¸º <code>NULL</code>ï¼ˆéœ€å­—æ®µå…è®¸ <code>null=True</code>ï¼‰</li>
<li><code>SET_DEFAULT</code>ï¼šè®¾ä¸ºé»˜è®¤å€¼ï¼ˆéœ€è®¾ç½® <code>default</code>ï¼‰</li>
</ul>
</li>
</ul>
<h4 id="%E2%96%B6-%3Ccode%3Everbose_name%3D%26quot%3B%E5%AD%A6%E7%94%9F%26quot%3B%3C/code%3E">â–¶ <code>verbose_name=&quot;å­¦ç”Ÿ&quot;</code></h4>
<ul>
<li><strong>å¯è¯»çš„å­—æ®µåç§°</strong>ï¼ˆç”¨äºåå°/adminç•Œé¢å±•ç¤ºï¼‰</li>
<li>ä¸­æ–‡æ˜¾ç¤ºä¸º&quot;å­¦ç”Ÿ&quot;ï¼ˆæ›¿ä»£é»˜è®¤çš„è‹±æ–‡æ˜¾ç¤ºï¼‰</li>
</ul>
</blockquote>

<pre class="language-python"><code class="language-python">from django.db import models

# Create your models here.
&quot;&quot;&quot;
ä¸€å¯¹ä¸€æ¨¡å‹å…³è”
&quot;&quot;&quot;

# ä¸»è¡¨
class Student(models.Model):
    name = models.CharField(max_length=20, db_index=True, verbose_name=&quot;å§“å&quot;)
    age = models.IntegerField(verbose_name=&quot;å¹´é¾„&quot;)
    sex = models.BooleanField(null=True, blank=True, default=None, verbose_name=&quot;æ€§åˆ«&quot;)
    created_time = models.DateTimeField(auto_now_add=True, verbose_name=&quot;åˆ›å»ºæ—¶é—´&quot;)
    updated_time = models.DateTimeField(auto_now=True, verbose_name=&quot;æ›´æ–°æ—¶é—´&quot;)

    class Meta:
        db_table = 'orm_student'
        verbose_name = &quot;å­¦ç”Ÿä¿¡æ¯&quot;
        verbose_name_plural = verbose_name

    def __str__(self):
        return str({&quot;id&quot;: self.pk, &quot;name&quot;: self.name, &quot;age&quot;: self.age})

# é™„åŠ çš„è¡¨
class StudentProfile(models.Model):
    # è®¾ç½®å¤–é”®[1å¯¹1ï¼Œmodels.OneToOneField(&quot;ä¸»é”®æ¨¡å‹ç±»å&quot;, on_delete=&quot;å¤–é”®çº¦æŸç±»å‹&quot;, ....)]
    # è®¾ç½®å¤–é”®ä»¥åï¼Œåœ¨æ•°æ®åº“ä¸­ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª&quot;å±æ€§_id&quot;çš„çœŸå®å­—æ®µç»™å¼€å‘è€…è¿›è¡Œå¤–é”®è®°å½•
    # related_name ä¸»è¦å£°æ˜ç»™ä¸»æ¨¡å‹æ¥ä½¿ç”¨çš„ï¼Œç”¨äºåå‘æŸ¥è¯¢ã€‚
    # StudentProfile.student = å­¦ç”Ÿä¿¡æ¯
    # Student.profile = å­¦ç”Ÿè¯¦ç»†ä¿¡æ¯
    student = models.OneToOneField(&quot;Student&quot;, related_name=&quot;profile&quot;, on_delete=models.CASCADE, verbose_name=&quot;å­¦ç”Ÿ&quot;)
    description = models.TextField(default=&quot;&quot;, verbose_name=&quot;ä¸ªæ€§ç­¾å&quot;)
    address = models.CharField(max_length=500, verbose_name=&quot;å®¶åº­ä½å€&quot;)
    mobile = models.CharField(max_length=15, verbose_name=&quot;ç´§æ€¥è”ç³»ç”µè¯&quot;)

    class Meta:
        db_table = &quot;orm_student_profile&quot;
        verbose_name = &quot;å­¦ç”Ÿè¯¦ç»†ä¿¡æ¯&quot;
        verbose_name_plural = verbose_name

    def __str__(self):
        return str({&quot;address&quot;: self.address, &quot;mobile&quot;: self.mobile})

</code></pre>
<p><img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202507311923571.png" alt="image-20250731192326508" /></p>
<p>è¿›è¡Œæ•°æ®è¿ç§»</p>

<pre class="language-bash"><code class="language-bash">python manage.py makemigrations
python manage.py migrate
</code></pre>
<h4 id="%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE">æ·»åŠ æ•°æ®</h4>

<pre class="language-python"><code class="language-python">class StudentView(View):
    &quot;&quot;&quot;1ï¼š1æ¨¡å‹å…³è”&quot;&quot;&quot;
    def get1(self, request):
        &quot;&quot;&quot;æ·»åŠ æ•°æ®æ“ä½œ&quot;&quot;&quot;
        &quot;&quot;&quot;
        å”¯ä¸€æ–¹å¼ï¼šå…ˆæ·»åŠ ä¸»æ¨¡å‹æ•°æ®Student, åæ·»åŠ å¤–é”®æ¨¡å‹æ•°æ®
        &quot;&quot;&quot;
        student = models.Student.objects.create(
            name=&quot;å°ç™½&quot;,
            age=17,
            sex=True,
        )
        profile = models.StudentProfile.objects.create(
            # student=student, # é€šè¿‡æŒ‡å®šå¯¹è±¡çš„æ–¹å¼ï¼Œå¯ä»¥å¸®æˆ‘ä»¬è‡ªåŠ¨ç»‘å®šå¤–é”®
            student_id=student.id,  # ç­‰ä»·äºä¸Šä¸€å¥
            description=&quot;ä¸€æ®µé•¿é•¿é•¿é•¿çš„ä¸ªæ€§ç­¾å....&quot;,
            address=&quot;å­¦ç”Ÿå°ç™½çš„å®¶åº­ä½å€&quot;,
            mobile=&quot;13312345618&quot;,
        )


        &quot;&quot;&quot;æ³¨æ„ï¼šä¸è¦ä½¿ç”¨ä»¥ä¸‹å†™æ³•ï¼Œå¤–é”®æ¨¡å‹çš„æ•°æ®æ— æ³•ææ·»åŠ ï¼Œä½†æ˜¯ä¸ä¼šæŠ¥é”™ã€‚&quot;&quot;&quot;
        # student = models.Student.objects.create(
        #     name=&quot;å°è¾‰&quot;,
        #     age=17,
        #     sex=True,
        #     profile=models.StudentProfile(
        #         description=&quot;ä¸€æ®µé•¿é•¿é•¿é•¿çš„ä¸ªæ€§ç­¾å....&quot;,
        #         address=&quot;å­¦ç”Ÿå°è¾‰çš„å®¶åº­ä½å€&quot;,
        #         mobile=&quot;13312345668&quot;,
        #     )
        # )

        return JsonResponse({})


</code></pre>
<h4 id="%E7%9B%B8%E4%BA%92%E8%AE%BF%E9%97%AE%E7%AD%9B%E9%80%89">ç›¸äº’è®¿é—®ç­›é€‰</h4>

<pre class="language-python"><code class="language-python">    def get2(self, request):
        &quot;&quot;&quot;æŸ¥è¯¢æ•°æ®&quot;&quot;&quot;
        &quot;&quot;&quot;
        æ–¹å¼1ï¼šä»ä¸»æ¨¡å‹(ä¸»è¡¨, orm_student)æŸ¥è¯¢åˆ°å¤–é”®æ¨¡å‹(é™„åŠ è¡¨, orm_student_profile)
        &quot;&quot;&quot;
        # ä¾‹å¦‚ï¼Œå°æ˜ä»Šå¤©æ²¡ä¸Šå­¦ï¼ŒæŸ¥è¯¢ä»–çš„ç´§æ€¥è”ç³»ç”µè¯å’Œå®¶åº­åœ°å€
        student = models.Student.objects.filter(name=&quot;å°æ˜&quot;).first()
        if student:
            # profileå°±æ˜¯åœ¨StudentProfileé‡Œé¢å®šä¹‰çš„ related_name
            print(student.profile.mobile)
            print(student.profile.address)

        &quot;&quot;&quot;
        æ–¹å¼2ï¼šä½¿ç”¨å¤–é”®æ¨¡å‹ä¸­æŸ¥è¯¢æ•°æ®ï¼Œä»¥ä¸»é”®æ¨¡å‹ä½œä¸ºæ¡ä»¶
        &quot;&quot;&quot;
        # ä¾‹å¦‚ï¼Œå°ç™½ä»Šå¤©æ²¡ä¸Šå­¦ï¼ŒæŸ¥è¯¢ä»–çš„ç´§æ€¥è”ç³»ç”µè¯å’Œå®¶åº­åœ°å€
        profile = models.StudentProfile.objects.filter(student__name=&quot;å°ç™½&quot;).first()
        print(profile.mobile)

        &quot;&quot;&quot;
        æ–¹å¼3ï¼šä»å¤–é”®æ¨¡å‹(é™„åŠ è¡¨, orm_student_profile)æŸ¥è¯¢åˆ°ä¸»æ¨¡å‹(ä¸»è¡¨, orm_student)
        &quot;&quot;&quot;
        # ä¾‹å¦‚ï¼Œæ ¹æ®æ‰‹æœºå·ï¼Œ13312345618 æ˜¯è°çš„æ‰‹æœºå·ç 
        student_profile = models.StudentProfile.objects.filter(mobile=&quot;13312345618&quot;).first()
        if student_profile:
            print(student_profile.student.name)

        &quot;&quot;&quot;
        æ–¹å¼4ï¼šæŸ¥è¯¢ä¸»æ¨¡å‹æ•°æ®ï¼Œä»¥å¤–é”®æ¨¡å‹ä½œä¸ºæ¡ä»¶
        &quot;&quot;&quot;
        # ä¾‹å¦‚ï¼Œæ ¹æ®æ‰‹æœºå·ï¼Œ13312345618 æ˜¯è°çš„æ‰‹æœºå·ç 
        student = models.Student.objects.filter(profile__mobile=&quot;13312345618&quot;).first()
        print(student.name)

        return JsonResponse({})
</code></pre>
<h4 id="%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE">ä¿®æ”¹æ•°æ®</h4>

<pre class="language-python"><code class="language-python">    def get3(self, request):
        &quot;&quot;&quot;æ›´æ–°æ•°æ®&quot;&quot;&quot;
        &quot;&quot;&quot;æ–¹å¼1ï¼šä»ä¸»æ¨¡å‹æ›´æ–°å¤–é”®æ¨¡å‹æ•°æ®ï¼ˆsaveï¼‰&quot;&quot;&quot;
        # ä¾‹å¦‚ï¼Œä¿®æ”¹å°æ˜çš„å®¶åº­åœ°å€
        student = models.Student.objects.filter(name=&quot;å°æ˜&quot;).first()
        if student:
            print(student)
            print(student.profile)
            print(student.profile.address)
            # ç›´æ¥ä¿®æ”¹ï¼Œå¹¶ä¿å­˜å³å¯
            student.profile.address = &quot;å­¦ç”Ÿå°æ˜çš„æ–°å®¶åº­åœ°å€&quot;
            # ä¿®æ”¹çš„addressæ˜¯StudentProfileçš„å­—æ®µï¼Œæ‰€ä»¥ä½¿ç”¨StudentProfileçš„saveæ–¹æ³•
            student.profile.save()

        &quot;&quot;&quot;æ–¹å¼2ï¼šä¿®æ”¹å¤–é”®æ¨¡å‹æ•°æ®ï¼Œä½¿ç”¨ä¸»æ¨¡å‹ä½œä¸ºä¿®æ”¹æ¡ä»¶(update)&quot;&quot;&quot;
        # ä¾‹å¦‚ï¼Œä¿®æ”¹å°ç™½çš„å®¶åº­åœ°å€
        models.StudentProfile.objects.filter(student__name=&quot;å°ç™½&quot;).update(address=&quot;å­¦ç”Ÿå°ç™½çš„æ–°å®¶åº­åœ°å€&quot;)

        &quot;&quot;&quot;æ–¹å¼3ï¼šä»å¤–é”®æ¨¡å‹æ›´æ–°ä¸»æ¨¡å‹æ•°æ®(save)&quot;&quot;&quot;
        # ä¾‹å¦‚ï¼Œä¿®æ”¹æ‰‹æœºå·ï¼š&quot;13312345618&quot; çš„å­¦ç”Ÿçš„å¹´é¾„ä¸º21å²
        student_profile = models.StudentProfile.objects.filter(mobile=&quot;13312345618&quot;).first()
        if student_profile:
            print(student_profile)
            print(student_profile.student)
            print(student_profile.student.age)
            student_profile.student.age = 21
            student_profile.student.save()

        &quot;&quot;&quot;æ–¹å¼4ï¼šä¿®æ”¹ä¸»æ¨¡å‹æ•°æ®ï¼Œä½¿ç”¨å¤–é”®æ¨¡å‹ä½œä¸ºä¿®æ”¹æ¡ä»¶ï¼ˆupdateï¼‰&quot;&quot;&quot;
        # ä¾‹å¦‚ï¼Œä¿®æ”¹æ‰‹æœºå·ï¼š&quot;13312345118&quot; çš„å­¦ç”Ÿçš„å¹´é¾„ä¸º18å²
        models.Student.objects.filter(profile__mobile=&quot;13312345118&quot;).update(age=18)

        return JsonResponse({})

</code></pre>
<h4 id="%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE">åˆ é™¤æ•°æ®</h4>

<pre class="language-python"><code class="language-python">def get(self,request):
    &quot;&quot;&quot;åˆ é™¤æ“ä½œ&quot;&quot;&quot;
    &quot;&quot;&quot;å½“on_delete=models.CASCADEæ—¶ï¼Œåˆ é™¤ä¸»æ¨¡å‹æ•°æ®ï¼Œmysqlä¼šè‡ªåŠ¨åˆ é™¤å¤–é”®æ¨¡å‹æ•°æ®&quot;&quot;&quot;
    # ä¾‹å¦‚ï¼Œåˆ é™¤å°æ˜çš„æ•°æ®è®°å½•
    #models.Student.objects.filter(name=&quot;å°æ˜&quot;).delete()

    &quot;&quot;&quot;å½“on_delete=models.CASCADEæ—¶ï¼Œåˆ é™¤å¤–é”®æ¨¡å‹æ•°æ®ï¼Œä¸ä¼šå½±å“ä¸»æ¨¡å‹æ•°æ®çš„&quot;&quot;&quot;
    # ä¾‹å¦‚ï¼Œåˆ é™¤æ‰‹æœºå·ä¸º13312345118çš„å­¦ç”Ÿé™„åŠ èµ„æ–™
    models.StudentProfile.objects.filter(mobile=&quot;13312345118&quot;).delete()
    return JsonResponse({})
</code></pre>
<h4 id="%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F%E9%80%89%E9%A1%B9%28%E5%88%A0%E9%99%A4%29">å¤–é”®çº¦æŸé€‰é¡¹(åˆ é™¤)</h4>
<p>åœ¨è®¾ç½®å¤–é”®æ—¶ï¼Œéœ€è¦é€šè¿‡<strong>on_delete</strong>é€‰é¡¹æŒ‡æ˜ä¸»è¡¨åˆ é™¤æ•°æ®æ—¶ï¼Œå¯¹äºå¤–é”®å¼•ç”¨è¡¨æ•°æ®å¦‚ä½•å¤„ç†ï¼Œåœ¨django.db.modelsä¸­åŒ…å«äº†å¯é€‰å¸¸é‡ï¼š</p>
<ul>
<li><p><strong>CASCADE</strong>ï¼š çº§è”/æ ªè¿ï¼Œåˆ é™¤ä¸»è¡¨æ•°æ®æ—¶è¿é€šä¸€èµ·åˆ é™¤å¤–é”®è¡¨ä¸­æ•°æ®</p>
</li>
<li><p><strong>PROTECT</strong>ï¼š åˆ é™¤ä¿æŠ¤ï¼Œé€šè¿‡æŠ›å‡º<strong>ProtectedError</strong>å¼‚å¸¸ï¼Œæ¥é˜»æ­¢åˆ é™¤ä¸»è¡¨ä¸­è¢«å¤–é”®åº”ç”¨çš„æ•°æ®ï¼Œæ„æ€æ˜¯å¿…é¡»å…ˆåˆ é™¤å¤–é”®æ•°æ®ä»¥åæ‰èƒ½åˆ é™¤ä¸»é”®æ•°æ®</p>
</li>
<li><p><strong>SET_NULL</strong>ï¼š è®¾ç½®ä¸ºNULLï¼Œä»…åœ¨è¯¥å­—æ®µnull=Trueå…è®¸ä¸ºnullæ—¶å¯ç”¨</p>
</li>
<li><p>SET_DEFAULTï¼š è®¾ç½®ä¸ºé»˜è®¤å€¼ï¼Œä»…åœ¨è¯¥å­—æ®µè®¾ç½®äº†é»˜è®¤å€¼æ—¶å¯ç”¨</p>
</li>
<li><p>SET()ï¼š è®¾ç½®ä¸ºç‰¹å®šå€¼æˆ–è€…è°ƒç”¨ç‰¹å®šæ–¹æ³•ï¼Œä¾‹å¦‚ï¼š</p>

<pre class="language-python"><code class="language-python">from django.conf import settings
from django.contrib.auth import get_user_model
from django.db import models
def get_sentinel_user():
    return get_user_model().objects.get_or_create(username='deleted')[0]
class UserModel(models.Model):
    user = models.ForeignKey(
        settings.AUTH_USER_MODEL,
        on_delete=models.SET(get_sentinel_user),
    )
</code></pre>
</li>
<li><p><strong>DO_NOTHING</strong>ï¼š ä¸åšä»»ä½•æ“ä½œï¼Œå¦‚æœæ•°æ®åº“å‰ç½®æŒ‡æ˜çº§è”æ€§ï¼Œæ­¤é€‰é¡¹ä¼šæŠ›å‡º<strong>IntegrityError</strong>å¼‚å¸¸</p>
</li>
</ul>
<h3 id="%E4%B8%80%E5%AF%B9%E5%A4%9A%E5%85%B3%E8%81%94%28ForeignKey%29">ä¸€å¯¹å¤šå…³è”(ForeignKey)</h3>
<p>ä¸€å¯¹å¤šæ¨¡å‹å…³è”ï¼Œä¾‹å¦‚å­¦ç”Ÿå’Œæˆç»©ï¼Œæ–‡ç« åˆ†ç±»å’Œæ–‡ç« ï¼Œå•†å“åˆ†ç±»å’Œå•†å“ï¼Œå•†å“å“ç‰Œå’Œå•†å“ä¹‹é—´çš„å…³ç³»ã€‚</p>
<p>ä½¿ç”¨<code>ForeignKey</code>è¿›è¡Œå…³è”(åœ¨å­æ¨¡å‹é‡Œé¢)</p>

<pre class="language-python"><code class="language-python">class Author(models.Model):
    name = models.CharField(max_length=20, db_index=True, verbose_name=&quot;å§“å&quot;)
    age = models.IntegerField(verbose_name=&quot;å¹´é¾„&quot;)
    sex = models.BooleanField(null=True, blank=True, default=None, verbose_name=&quot;æ€§åˆ«&quot;)

    class Meta:
        db_table = 'orm_author'
        verbose_name = &quot;ä½œè€…ä¿¡æ¯&quot;
        verbose_name_plural = verbose_name

    def __str__(self):
        return str({&quot;id&quot;: self.pk, &quot;name&quot;: self.name, &quot;age&quot;: self.age,  &quot;sex&quot;: self.sex})


class Article(models.Model):
    title = models.CharField(max_length=50, verbose_name=&quot;æ–‡ç« æ ‡é¢˜&quot;)
    content = models.TextField(null=True, verbose_name=&quot;æ–‡ç« å†…å®¹&quot;)
    pubdate = models.DateTimeField(null=True, verbose_name=&quot;å‘å¸ƒæ—¶é—´&quot;)
    created_time = models.DateTimeField(auto_now_add=True, verbose_name=&quot;åˆ›å»ºæ—¶é—´&quot;)
    updated_time = models.DateTimeField(auto_now=True, verbose_name=&quot;åˆ›å»ºæ—¶é—´&quot;)
    author = models.ForeignKey(&quot;Author&quot;, on_delete=models.DO_NOTHING, related_name=&quot;article_list&quot;, verbose_name=&quot;ä½œè€…&quot;)

    class Meta:
        db_table = &quot;orm_article&quot;
        verbose_name = &quot;æ–‡ç« ä¿¡æ¯&quot;
        verbose_name_plural = verbose_name

    def __str__(self):
        return str({&quot;id&quot;: self.id, &quot;title&quot;: self.title, &quot;pubdate&quot;: self.pubdate})
</code></pre>
<p>è¿›è¡Œæ•°æ®è¿ç§»</p>

<pre class="language-bash"><code class="language-bash">python manage.py makemigrations
python manage.py migrate
</code></pre>
<p>å…³è”æ“ä½œ</p>

<pre class="language-python"><code class="language-python"># from .models import Achievement
# student = Student.objects.get(pk=10)
# achievement_list = [
#   Achievement(student=student,score=100),
#   Achievement(student=student,score=100),
#   Achievement(student=student,score=100),
#   Achievement(student=student,score=100),
# ]
#
# Achievement.objects.bulk_create(achievement_list)

# è·å–ä¸€ä¸ªå­¦ç”Ÿçš„æ‰€æœ‰æˆç»©
# student = Student.objects.get(pk=10)
# print(student.score_list.all().values(&quot;id&quot;,&quot;score&quot;))      # å¿…é¡»åœ¨å¤–é”®æ¨¡å‹ä¸­è®¾ç½®related_name=&quot;score_list&quot;,å¦åˆ™æ— æ³•è·å–å¤–é”®å…³ç³»
# print(student.achievement_set.all().values(&quot;id&quot;,&quot;score&quot;)) # å¦‚æœå¤–é”®æ¨¡å‹ä¸­æ²¡æœ‰è®¾ç½®related_nameåˆ™å¯ä»¥é€šè¿‡æ¨¡å‹_setæä¾›ç»™ä¸»æ¨¡å‹è°ƒç”¨æ•°æ®

# ä»å¤–é”®æ•°æ®æŸ¥æ‰¾ä¸»æ¨¡å‹
from .models import Achievement
student_achievement = Achievement.objects.filter(score=80).first()
print(student_achievement.student)    # æŸ¥æ‰¾å¤–é”®å±æ€§å­—æ®µ
print(student_achievement.student_id) # ç›´æ¥æŸ¥æ•°æ®è¡¨ä¸­çš„æ•°å€¼ID
</code></pre>
<h4 id="%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE">æ·»åŠ æ•°æ®</h4>

<pre class="language-python"><code class="language-python">class ArticleView(View):
    &quot;&quot;&quot;1:å¤šæ¨¡å‹å…³è”&quot;&quot;&quot;
    def get1(self,request):
        &quot;&quot;&quot;æ·»åŠ æ•°æ®&quot;&quot;&quot;
        &quot;&quot;&quot;1. å…ˆæ·»åŠ ä¸»æ¨¡å‹ï¼Œæ ¹æ®ä¸»æ¨¡å‹æ·»åŠ å¤–é”®æ¨¡å‹&quot;&quot;&quot;
        author = models.Author.objects.create(
            name=&quot;å°æ˜&quot;,
            age=23,
            sex=True
        )
        article_list = [
            models.Article(title=&quot;æ–‡ç« æ ‡é¢˜1&quot;, content=&quot;æ–‡ç« å†…å®¹1&quot;, 
                           pubdate=&quot;2023-03-15 10:30:30&quot;, author=author),
            models.Article(title=&quot;æ–‡ç« æ ‡é¢˜2&quot;, content=&quot;æ–‡ç« å†…å®¹2&quot;, 
                           pubdate=&quot;2023-03-16 10:30:30&quot;, author_id=author.id),
        ]
        models.Article.objects.bulk_create(article_list)

        &quot;&quot;&quot;å¦‚æœå·²ç»æœ‰äº†ä¸»æ¨¡å‹ï¼Œåˆ™ç›´æ¥é€šè¿‡æŸ¥è¯¢ä¸»æ¨¡å‹æå–ä¸»é”®IDï¼Œå†æ·»åŠ å¤–é”®æ¨¡å‹æ•°æ®å³å¯ã€‚&quot;&quot;&quot;
        # ä¾‹å¦‚ï¼Œç»™å°æ˜è®°å½•å¤š2ç‰‡æ–‡ç« 
        author = models.Author.objects.filter(name=&quot;å°æ˜&quot;).first()
        if author:
            article_list = [
                models.Article(title=&quot;æ–‡ç« æ ‡é¢˜3&quot;, content=&quot;æ–‡ç« å†…å®¹3&quot;, 
                               pubdate=&quot;2023-03-15 10:30:33&quot;, author=author),
                models.Article(title=&quot;æ–‡ç« æ ‡é¢˜4&quot;, content=&quot;æ–‡ç« å†…å®¹4&quot;, 
                               pubdate=&quot;2023-03-16 10:30:34&quot;, author_id=author.id),
            ]
            models.Article.objects.bulk_create(article_list)

        &quot;&quot;&quot;æ·»åŠ ä¸»æ¨¡å‹ï¼Œå†æ·»åŠ å¤–é”®æ¨¡å‹çš„å¦ä¸€ç§å†™æ³•&quot;&quot;&quot;
        models.Article.objects.create(
            title=&quot;æ–‡ç« æ ‡é¢˜5&quot;,
            content=&quot;æ–‡ç« å†…å®¹5&quot;,
            pubdate=&quot;2023-10-03 12:05:00&quot;,
            author=models.Author.objects.create(name=&quot;å°ç™½&quot;, age=23, sex=False)
        )

        return JsonResponse({})
</code></pre>
<h4 id="%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE">æŸ¥è¯¢æ•°æ®</h4>

<pre class="language-python"><code class="language-python">    def get2(self, request):
        &quot;&quot;&quot;æŸ¥è¯¢æ•°æ®&quot;&quot;&quot;
        &quot;&quot;&quot;é€šè¿‡ä¸»æ¨¡å‹æŸ¥æ‰¾å¤–é”®æ¨¡å‹&quot;&quot;&quot;
        # ä¾‹å¦‚ï¼ŒæŸ¥è¯¢å°æ˜çš„æ‰€æœ‰æ–‡ç« 
        author = models.Author.objects.filter(name=&quot;å°æ˜&quot;).first()
        if author:
            print(author)
            # è·å–å¤–é”®ï¼Œarticle_listå°±æ˜¯Articleä¸­related_nameå®šä¹‰ï¼Œæä¾›ç»™Authoråå‘æŸ¥è¯¢ä½¿ç”¨çš„
            print(author.article_list.all())

        &quot;&quot;&quot;ä½¿ç”¨ä¸»æ¨¡å‹ä½œä¸ºæ¡ä»¶ï¼Œç›´æ¥æŸ¥è¯¢å¤–é”®æ¨¡å‹çš„æ•°æ®&quot;&quot;&quot;
        # ä¾‹å¦‚ï¼ŒæŸ¥è¯¢å°ç™½çš„æ‰€æœ‰æ–‡ç« 
        article_list = models.Article.objects.filter(author__name=&quot;å°ç™½&quot;).all()
        print(article_list)

        &quot;&quot;&quot;é€šè¿‡å¤–é”®æ¨¡å‹æŸ¥è¯¢ä¸»æ¨¡å‹&quot;&quot;&quot;
        # ä¾‹å¦‚ï¼ŒæŸ¥è¯¢æ–‡ç« æ ‡é¢˜ä¸ºã€Šæ–‡ç« æ ‡é¢˜5ã€‹çš„ä½œè€…
        article = models.Article.objects.filter(title=&quot;æ–‡ç« æ ‡é¢˜5&quot;).first()
        if article:
            print(article.author, type(article.author))
            print(article.author.name)

        &quot;&quot;&quot;ä½¿ç”¨å¤–é”®æ¨¡å‹ä½œä¸ºæ¡ä»¶ï¼Œç›´æ¥æŸ¥è¯¢ä¸»æ¨¡å‹çš„æ•°æ®&quot;&quot;&quot;
        # ä¾‹å¦‚ï¼ŒæŸ¥è¯¢æ–‡ç« æ ‡é¢˜ä¸ºã€Šæ–‡ç« æ ‡é¢˜3ã€‹çš„ä½œè€…
        author = models.Author.objects.filter(article_list__title=&quot;æ–‡ç« æ ‡é¢˜3&quot;).first()
        print(author)
        print(author.name)
        return JsonResponse({})
</code></pre>
<h4 id="%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE">æ›´æ–°æ•°æ®</h4>

<pre class="language-python"><code class="language-python">def get3(self, request):
    &quot;&quot;&quot;æ›´æ–°æ“ä½œ&quot;&quot;&quot;
    &quot;&quot;&quot;è·å–ä¸»æ¨¡å‹ï¼Œå†æ”¹åŠ¨å¤–é”®æ¨¡å‹[å¤–é”®æ¨¡å‹å¯ä»¥æ˜¯1ä¸ªæˆ–å¤šä¸ªï¼Œå¦‚æœæ˜¯å¤šä¸ªï¼Œåˆ™éœ€è¦å¾ªç¯]&quot;&quot;&quot;
    # æŠŠå°æ˜çš„æ‰€æœ‰æ–‡ç« å‘å¸ƒæ—¶é—´ä¿®æ”¹æˆ 2023-10-15 10:00:00
    author = models.Author.objects.filter(name=&quot;å°æ˜&quot;).first()
    for article in author.article_list.all():
        article.pubdate = &quot;2023-10-15 10:00:00&quot;
        article.save()

    &quot;&quot;&quot;ä»¥ä¸»æ¨¡å‹ä½œä¸ºæ›´æ–°æ¡ä»¶ï¼Œæ›´æ–°å¤–é”®æ¨¡å‹æ•°æ®&quot;&quot;&quot;
    # æŠŠå°ç™½çš„æ‰€æœ‰æ–‡ç« å‘å¸ƒæ—¶é—´ä¿®æ”¹æˆ 2023-05-05 10:00:00
    models.Article.objects.filter(author__name=&quot;å°ç™½&quot;).update(pubdate=&quot;2023-05-05 10:00:00&quot;)

    &quot;&quot;&quot;è·å–åˆ°å¤–é”®æ¨¡å‹ï¼Œå†æ”¹åŠ¨ä¸»æ¨¡å‹&quot;&quot;&quot;
    # ä¾‹å¦‚ï¼Œä¿®æ”¹æ–‡ç« æ ‡é¢˜ã€Šæ–‡ç« æ ‡é¢˜4ã€‹çš„ä½œè€…çš„å¹´é¾„ä¸º27å²
    article = models.Article.objects.filter(title=&quot;æ–‡ç« æ ‡é¢˜4&quot;).first()
    article.author.age = 27
    article.author.save()


    &quot;&quot;&quot;ä»¥å¤–é”®æ¨¡å‹ä½œä¸ºæ›´æ–°æ¡ä»¶ï¼Œæ›´æ–°ä¸»æ¨¡å‹æ•°æ®&quot;&quot;&quot;
    # ä¾‹å¦‚ï¼Œä¿®æ”¹æ–‡ç« æ ‡é¢˜ã€Šæ–‡ç« æ ‡é¢˜1ã€‹çš„ä½œè€…çš„å¹´é¾„ä¸º22å²
    models.Author.objects.filter(article_list__title=&quot;æ–‡ç« æ ‡é¢˜1&quot;).update(age=22)


    &quot;&quot;&quot;å¤–é”®æ˜¯å¯ä»¥åœ¨å¼€å‘ä¸­æ›´æ”¹ç»‘å®šå…³ç³»&quot;&quot;&quot;
    # # ä¾‹å¦‚ï¼Œä¿®æ”¹æ–‡ç« æ ‡é¢˜ã€Šæ–‡ç« æ ‡é¢˜3ã€‹çš„ä½œè€…ä¸ºå°ç™½
    article = models.Article.objects.filter(title=&quot;æ–‡ç« æ ‡é¢˜3&quot;).first()
    author = models.Author.objects.filter(name=&quot;å°ç™½&quot;).first()
    article.author = author
    article.save()

    # # ä¾‹å¦‚ï¼Œä¿®æ”¹æ–‡ç« æ ‡é¢˜ã€Šæ–‡ç« æ ‡é¢˜3ã€‹çš„ä½œè€…ä¸ºå°æ˜
    # models.Article.objects.filter(title=&quot;æ–‡ç« æ ‡é¢˜3&quot;).update(
    #     author=models.Author.objects.filter(name=&quot;å°æ˜&quot;).first()
    # )

    return JsonResponse({})
</code></pre>
<h4 id="%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE">åˆ é™¤æ•°æ®</h4>

<pre class="language-python"><code class="language-python">def get(self,request):
    &quot;&quot;&quot;åˆ é™¤æ•°æ®&quot;&quot;&quot;
    models.Author.objects.filter(name=&quot;å°ç™½&quot;).delete()
    return JsonResponse({})
</code></pre>
<h3 id="%E5%A4%9A%E5%AF%B9%E5%A4%9A%E5%85%B3%E8%81%94%EF%BC%88ManyToManyField%EF%BC%89">å¤šå¯¹å¤šå…³è”ï¼ˆManyToManyFieldï¼‰</h3>
<h4 id="%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0">æ¨¡å‹å®ç°</h4>
<p>å¤šå¯¹å¤šæ¨¡å‹å…³è”, ä¾‹å¦‚ï¼šç½‘è¯¾å’Œå­¦ç”Ÿï¼Œæ´»åŠ¨å’Œå•†å“ï¼Œè½¯ä»¶åº”ç”¨å’ŒæœåŠ¡å™¨ã€‚ä½¿ç”¨<code>ManyToManyField</code>è¿›è¡Œå…³è”, åŒæ—¶æ²¡æœ‰ä¸»æ¬¡ä¹‹åˆ†</p>
<p>åœ¨åˆ›å»ºè¿™ä¸¤ä¸ªè¡¨çš„æ—¶å€™, å®é™…è¿˜ä¼šåˆ›å»ºä¸€ä¸ªå…³ç³»è¡¨</p>

<pre class="language-python"><code class="language-python">&quot;&quot;&quot;å¤šå¯¹å¤š&quot;&quot;&quot;
# ä¸€ä¸ªè€å¸ˆå¯ä»¥æˆè¯¾å¤šä¸ªè¯¾ç¨‹
# ä¸€ä¸ªè¯¾ç¨‹ä¹Ÿå¯ä»¥ç”±å¤šä¸ªè€å¸ˆæˆè¯¾
# å¤šå¯¹å¤šå…³è”ä»¥åï¼Œåœ¨æ•°æ®è¿ç§»æ—¶ï¼Œåœ¨æ•°æ®åº“ä¸­å®é™…ä¸Šä¼šåˆ›å»ºä¸‰å¼ è¡¨ï¼Œåˆ†åˆ«æ˜¯ï¼š2ä¸ªæ¨¡å‹å¯¹è±¡å®ä½“è¡¨ï¼Œ1å¼ å…³è”2ä¸ªæ¨¡å‹çš„å…³ç³»è¡¨ã€‚
# ä¸€å¯¹ä¸€ï¼ŒæŠŠä¸»æ¨¡å‹çš„ä¸»é”®idï¼Œä½œä¸ºå¤–é”®å­—æ®µå£°æ˜åœ¨å¤–é”®æ¨¡å‹ä¸­ã€æ‰€ä»¥å¤–é”®æ¨¡å‹å¤šå‡ºä¸€ä¸ªå…³è”å±æ€§å­—æ®µã€‘
# ä¸€å¯¹å¤šï¼ŒæŠŠä¸»æ¨¡å‹çš„ä¸»é”®idï¼Œä½œä¸ºå¤–é”®å­—æ®µå£°æ˜åœ¨å¤–é”®æ¨¡å‹ä¸­ã€æ‰€ä»¥å¤–é”®æ¨¡å‹å¤šå‡ºä¸€ä¸ªå…³è”å±æ€§å­—æ®µã€‘
# å¤šå¯¹å¤šï¼ŒæŠŠ2ä¸ªä¸»æ¨¡å‹çš„ä¸»é”®idï¼Œä½œä¸ºå¤–é”®å­—æ®µè®°å½•ç¬¬ä¸‰å¼ å…³ç³»è¡¨ä¸­ï¼Œè¿™å¼ è¡¨ä¸»è¦æœ‰2ä¸ªå¤–é”®å­—æ®µã€‚è€Œä¸”ORMä¸­ï¼Œæˆ‘ä»¬æ— æ³•ç›´æ¥è®¿é—®å’Œæ“ä½œè¿™ä¸ªè¡¨çš„ï¼Œåªèƒ½é€šè¿‡ä¸»æ¨¡å‹æ¥æ“ä½œ
class Teacher(models.Model):
    name = models.CharField(max_length=15,verbose_name=&quot;è€å¸ˆ&quot;)
    # æ³¨æ„ï¼šTeacheræ¨¡å‹ä¸­è®¾ç½®äº†courseå¤–é”®ï¼Œå°±ä¸è¦è®¾ç½®Courseçš„teacherå¤–é”®äº†ã€‚2ä¸ªå†²çªçš„ã€‚
    # course = models.ManyToManyField(&quot;Course&quot;, related_name=&quot;to_teacher&quot;)

    class Meta:
        db_table = &quot;tb_teacher&quot;
        verbose_name = 'è€å¸ˆä¿¡æ¯è¡¨'
        verbose_name_plural = verbose_name

class Course(models.Model):
    name = models.CharField(max_length=20, verbose_name=&quot;è¯¾ç¨‹&quot;)
    # å¤šå¯¹å¤šä¸éœ€è¦æˆ‘ä»¬è®¾ç½®on_deleteï¼Œç›´æ¥é»˜è®¤å°±æ˜¯models.CASCADEçº§è”äº†ã€‚
    teacher = models.ManyToManyField(&quot;Teacher&quot;, related_name=&quot;to_course&quot;)

    class Meta:
        db_table = &quot;tb_course&quot;
        verbose_name = 'è¯¾ç¨‹ä¿¡æ¯è¡¨'
        verbose_name_plural = verbose_name
</code></pre>
<p>è¿›è¡Œæ•°æ®è¿ç§»</p>

<pre class="language-none"><code class="language-none">python manage.py makemigrations
python manage.py migrate
</code></pre>
<h4 id="%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE">æ·»åŠ æ•°æ®</h4>

<pre class="language-python"><code class="language-python">class TeacherView(View):
    &quot;&quot;&quot;å¤šå¯¹å¤šå…³è”æ“ä½œ&quot;&quot;&quot;
    def get1(self, request):
        &quot;&quot;&quot;æ·»åŠ æ•°æ®&quot;&quot;&quot;
        &quot;&quot;&quot;å…ˆæ·»åŠ å®ä½“æ¨¡å‹ï¼Œç„¶åé€šè¿‡å¤–é”®ä½¿ç”¨addè¿›è¡Œå…³è”ä¸¤ä¸ªæ¨¡å‹&quot;&quot;&quot;
        # 1. å…ˆæ·»åŠ å®ä½“æ¨¡å‹
        teacher = models.Teacher.objects.create(name=&quot;å¤§æ˜&quot;, age=32, sex=True)
        course = models.Course.objects.create(name=&quot;pythonåŸºç¡€è¯¾&quot;)
        # 2. é€šè¿‡å¤–é”®ä½¿ç”¨addç»‘å®šå…³ç³»
        teacher.course.add(course)

        # ä¹Ÿå¯ä»¥ç»™å·²æœ‰çš„æ¨¡å‹ç»‘å®šå…³ç³»
        teacher = models.Teacher.objects.filter(name=&quot;å¤§æ˜&quot;).first()
        course1 = models.Course.objects.create(name=&quot;pythonæ¡†æ¶&quot;)
        course2 = models.Course.objects.create(name=&quot;pythoné¡¹ç›®å®æˆ˜&quot;)
        teacher.course.add(course1, course2)

        return JsonResponse({})
</code></pre>
<h4 id="%E6%9F%A5%E8%AF%A2">æŸ¥è¯¢</h4>

<pre class="language-python"><code class="language-python">def get2(self, request):
    &quot;&quot;&quot;æŸ¥è¯¢æ•°æ®&quot;&quot;&quot;
    &quot;&quot;&quot;å…ˆæŸ¥å…¶ä¸­ä¸€ä¸ªæ¨¡å‹ï¼Œæ¥ç€é€šè¿‡å¤–é”®ï¼ŒæŸ¥è¯¢å¦ä¸€ä¸ªæ¨¡å‹çš„æ•°æ®&quot;&quot;&quot;
    # ä¾‹å¦‚ï¼ŒæŸ¥è¯¢å¤§æ˜çš„æˆè¯¾åˆ—è¡¨
    teacher = models.Teacher.objects.filter(name=&quot;å¤§æ˜&quot;).first()
    print(teacher.course.all())

    &quot;&quot;&quot;ä½¿ç”¨å…¶ä¸­ä¸€ä¸ªæ¨¡å‹ä½œä¸ºæ¡ä»¶ï¼ŒæŸ¥è¯¢å¦ä¸€ä¸ªæ¨¡å‹çš„æ•°æ®&quot;&quot;&quot;
    # ä¾‹å¦‚ï¼ŒæŸ¥è¯¢å¤§æ˜çš„æˆè¯¾åˆ—è¡¨
    course_objs = models.Course.objects.filter(teacher__name=&quot;å¤§æ˜&quot;).all()
    print(course_objs)

    &quot;&quot;&quot;åè¿‡æ¥ï¼Œä¹Ÿæ˜¯å¦‚æ­¤&quot;&quot;&quot;
    # ä¾‹å¦‚ï¼ŒpythonåŸºç¡€è¯¾çš„æˆè¯¾è€å¸ˆåˆ—è¡¨
    course = models.Course.objects.filter(name=&quot;pythonåŸºç¡€è¯¾&quot;).first()
    print(course.teacher.all())

    teacher_list = models.Teacher.objects.filter(course__name=&quot;pythonåŸºç¡€è¯¾&quot;).all()
    print(teacher_list)

    return JsonResponse({})
</code></pre>
<h4 id="%E6%9B%B4%E6%96%B0">æ›´æ–°</h4>

<pre class="language-python"><code class="language-python">def get(self,request):
    &quot;&quot;&quot;æ›´æ–°æ•°æ®&quot;&quot;&quot;
    # æŠŠå¤§æ˜çš„æ‰€æœ‰æˆè¯¾è¯¾ç¨‹çš„åå­—åé¢åŠ ä¸Šï¼ˆå¤§æ˜ä¸“è®²ï¼‰
    teacher = models.Teacher.objects.filter(name=&quot;å¤§æ˜&quot;).first()
    if teacher:
        for course in teacher.course.all():
            course.name = course.name + &quot;ï¼ˆå¤§æ˜ä¸“è®²ï¼‰&quot;
            course.save()

    # # é€šè¿‡updateä¿®æ”¹, å­—ç¬¦ä¸²çš„æ‹¼æ¥éœ€è¦ä½¿ç”¨Concat
    from django.db.models import F, Value
    from django.db.models.functions import Concat
    models.Course.objects.filter(teacher__name=&quot;å¤§ç™½&quot;).update(name=Concat(F(&quot;name&quot;), Value(&quot;[ç²¾è®²]&quot;)))
    return JsonResponse({})
</code></pre>
<h4 id="%E5%88%A0%E9%99%A4">åˆ é™¤</h4>

<pre class="language-python"><code class="language-python">    def get4(self,request):
        &quot;&quot;&quot;åˆ é™¤æ•°æ®&quot;&quot;&quot;
        &quot;&quot;&quot;åˆ é™¤æ¨¡å‹è¡¨è®°å½•æ—¶ï¼Œå¯¹åº”çš„å…³ç³»ä¹Ÿä¼šè¢«åˆ é™¤&quot;&quot;&quot;
        # åˆ é™¤å¤§æ˜çš„ä¿¡æ¯ï¼Œmysqlä¼šè‡ªåŠ¨åˆ é™¤ç»‘å®šå…³ç³»
        models.Teacher.objects.filter(name=&quot;å¤§æ˜&quot;).delete()

        &quot;&quot;&quot;è§£ç»‘å…³ç³»&quot;&quot;&quot;
        teacher = models.Teacher.objects.filter(name=&quot;å¤§ç™½&quot;).first()
        course = models.Course.objects.filter(name=&quot;javaåŸºç¡€è¯¾&quot;).first()
        teacher.course.remove(course) # æ³¨æ„ï¼šè¿™å¹¶éåˆ é™¤è¯¾ç¨‹ï¼Œè€Œæ˜¯è§£é™¤ç»‘å®šå…³ç³»è€Œå·²

        return JsonResponse({})

</code></pre>
<h3 id="%E8%87%AA%E5%85%B3%E8%81%94">è‡ªå…³è”</h3>
<p>è‡ªå…³è”å°±æ˜¯1å¼ æ•°æ®è¡¨ä¸­ï¼Œä¸»é”®å’Œå¤–é”®éƒ½åœ¨ä¸€å¼ è¡¨ä¸Šã€‚ä¸€èˆ¬ä¼šåœ¨å¤šçº§éƒ¨é—¨ï¼Œå¤šçº§èœå•ï¼Œå¤šçº§æƒé™ï¼Œçœå¸‚åŒºè¡Œæ”¿åŒºåˆ’ï¼Œç²‰ä¸å…³æ³¨ï¼Œå¥½å‹å…³ç³»ï¼Œè¿™äº›ä¸šåŠ¡ä¸­ä½¿ç”¨åˆ°ã€‚ä¸¾ä¾‹ï¼š</p>
<p>è¡Œæ”¿åŒºåˆ’è¡¨ tb_area, è¿™é‡Œçš„ä¸€ä¸ªåœ°åŒºçš„ä¸Šä¸€çº§å¯ä»¥æ˜¯åŒä¸€ä¸ªè¡¨é‡Œé¢çš„å¦ä¸€é¡¹</p>
<table>
<thead>
<tr>
  <th>id</th>
  <th>name</th>
  <th>parent_id/pid</th>
</tr>
</thead>
<tbody>
<tr>
  <td>1</td>
  <td>æ²³å—çœ</td>
  <td></td>
</tr>
<tr>
  <td>2</td>
  <td>æ²³åŒ—çœ</td>
  <td></td>
</tr>
<tr>
  <td>3</td>
  <td>éƒ‘å·å¸‚</td>
  <td>1</td>
</tr>
<tr>
  <td>4</td>
  <td>å¼€å°å¸‚</td>
  <td>1</td>
</tr>
<tr>
  <td>5</td>
  <td>çŸ³å®¶åº„</td>
  <td>2</td>
</tr>
<tr>
  <td>6</td>
  <td>é‚¯éƒ¸å¸‚</td>
  <td>2</td>
</tr>
<tr>
  <td>7</td>
  <td>äºŒä¸ƒåŒº</td>
  <td>3</td>
</tr>
<tr>
  <td>8</td>
  <td>æ–°éƒ‘åŒº</td>
  <td>3</td>
</tr>
<tr>
  <td>9</td>
  <td>éƒ‘ä¸œæ–°åŒº</td>
  <td>3</td>
</tr>
</tbody>
</table>
<p>è¦ç†è§£è‡ªå…³è”ï¼Œå°±è¦è¿™ä¸ªæ•°æ®è¡¨ç†è§£æˆ2å¼ æˆ–è€…3å¼ è¡¨å°±å¯ä»¥äº†ã€‚</p>
<p>çœçº§åˆ«ï¼Œprovinceï¼Œ</p>
<table>
<thead>
<tr>
  <th>id</th>
  <th>name</th>
  <th></th>
</tr>
</thead>
<tbody>
<tr>
  <td>1</td>
  <td>æ²³å—çœ</td>
  <td></td>
</tr>
<tr>
  <td>2</td>
  <td>æ²³åŒ—çœ</td>
  <td></td>
</tr>
</tbody>
</table>
<p>å¸‚çº§åˆ«ï¼Œcityï¼Œ</p>
<table>
<thead>
<tr>
  <th>id</th>
  <th>name</th>
  <th>parent_id/pid</th>
</tr>
</thead>
<tbody>
<tr>
  <td>3</td>
  <td>éƒ‘å·å¸‚</td>
  <td>1</td>
</tr>
<tr>
  <td>4</td>
  <td>å¼€å°å¸‚</td>
  <td>1</td>
</tr>
<tr>
  <td>5</td>
  <td>çŸ³å®¶åº„</td>
  <td>2</td>
</tr>
<tr>
  <td>6</td>
  <td>é‚¯éƒ¸å¸‚</td>
  <td>2</td>
</tr>
</tbody>
</table>
<p>åŒºçº§åˆ«ï¼Œareaï¼Œ</p>
<table>
<thead>
<tr>
  <th>id</th>
  <th>name</th>
  <th>parent_id/pid</th>
</tr>
</thead>
<tbody>
<tr>
  <td>7</td>
  <td>äºŒä¸ƒåŒº</td>
  <td>3</td>
</tr>
<tr>
  <td>8</td>
  <td>æ–°éƒ‘åŒº</td>
  <td>3</td>
</tr>
<tr>
  <td>9</td>
  <td>éƒ‘ä¸œæ–°åŒº</td>
  <td>3</td>
</tr>
</tbody>
</table>
<p>ä¸Šé¢å¾ˆæ˜æ˜¾æ˜¯1ä¸ªçœä»½æœ‰å¤šä¸ªåŸå¸‚ï¼Œ1ä¸ªåŸå¸‚æœ‰å¤šä¸ªåœ°åŒºï¼Œè¿™å°±æ˜¯å±äº1å¯¹å¤šçš„è‡ªå…³è”</p>
<p>ç”¨æˆ·ä¸ç”¨æˆ·ä¹‹é—´çš„å¥½å‹å…³ç³»ï¼Œè¿™å°±æ˜¯å±äºå¤šå¯¹å¤šçš„è‡ªå…³è”ã€‚</p>
<p>ç”¨æˆ·è¡¨ user</p>
<table>
<thead>
<tr>
  <th>id</th>
  <th>username</th>
</tr>
</thead>
<tbody>
<tr>
  <td>1</td>
  <td>å°æ˜</td>
</tr>
<tr>
  <td>2</td>
  <td>å°çº¢</td>
</tr>
<tr>
  <td>3</td>
  <td>å°é»‘</td>
</tr>
<tr>
  <td>4</td>
  <td>å°ç™½</td>
</tr>
<tr>
  <td>5</td>
  <td>å°è¾‰</td>
</tr>
</tbody>
</table>
<p>å¥½å‹å…³ç³»è¡¨ user_friend</p>
<table>
<thead>
<tr>
  <th>id</th>
  <th>user1</th>
  <th>user2</th>
</tr>
</thead>
<tbody>
<tr>
  <td>1</td>
  <td>1</td>
  <td>2</td>
</tr>
<tr>
  <td>2</td>
  <td>1</td>
  <td>3</td>
</tr>
<tr>
  <td>3</td>
  <td>1</td>
  <td>4</td>
</tr>
<tr>
  <td>4</td>
  <td>2</td>
  <td>3</td>
</tr>
<tr>
  <td>5</td>
  <td>2</td>
  <td>4</td>
</tr>
<tr>
  <td>6</td>
  <td>2</td>
  <td>5</td>
</tr>
<tr>
  <td>7</td>
  <td>3</td>
  <td>4</td>
</tr>
</tbody>
</table>
<h4 id="%E6%A8%A1%E5%9E%8B%E5%AE%9E%E7%8E%B0">æ¨¡å‹å®ç°</h4>
<p>è¿˜æ˜¯ä½¿ç”¨çš„<code>ForeignKey</code>å’Œ<code>ManyToManyField</code>ä½†æ˜¯ä¸æ˜¯å†™å¦ä¸€ä¸ªæ¨¡å‹çš„åå­—æ˜¯ä½¿ç”¨self, åœ¨è¿›è¡Œå¤šå¯¹å¤šçš„æ—¶å€™ä¸ºäº†é¿å…é€’å½’æœå¯», é»˜è®¤æ˜¯ä¸æ”¯æŒåå‘æŸ¥è¯¢çš„, éœ€è¦åŠ ä¸€ä¸‹å‚æ•°<code>symmetrical=True</code></p>

<pre class="language-python"><code class="language-python">class Area(models.Model):
    &quot;&quot;&quot;ä¸€å¯¹å¤šçš„è‡ªå…³è”&quot;&quot;&quot;
    name = models.CharField(max_length=50)
    parent = models.ForeignKey(&quot;self&quot;, on_delete=models.SET_NULL, related_name=&quot;to_son&quot;, null=True, blank=True)
    class Meta:
        db_table = &quot;orm_area&quot;
        verbose_name = 'è¡Œæ”¿åŒºåˆ’è¡¨'
        verbose_name_plural = verbose_name

    def __str__(self):
        return str({&quot;id&quot;:self.id, &quot;name&quot;:self.name})


class Member(models.Model):
    &quot;&quot;&quot;å¤šå¯¹å¤šçš„è‡ªå…³è”&quot;&quot;&quot;
    name = models.CharField(max_length=50, unique=True, verbose_name=&quot;ç”¨æˆ·å&quot;)
    age = models.SmallIntegerField(default=0, verbose_name=&quot;å¹´é¾„&quot;)
    # symmetrical=True é»˜è®¤å€¼ï¼Œè¡¨ç¤ºåŒå‘å…³ç³»ï¼Œç»‘å®šçš„å…³ç³»æ˜¯åŒå‘ï¼Œä¸€èˆ¬ç”¨äºå¥½å‹å…³ç³»
    # è¿™ç§æƒ…å†µä¸‹ï¼Œdjangoä¸æä¾›åå‘æŸ¥è¯¢
    friends = models.ManyToManyField(to=&quot;self&quot;, symmetrical=True)
    # symmetrical=False è¡¨ç¤ºå•å‘å…³ç³»ï¼Œç»‘å®šçš„å…³ç³»æ˜¯å•å‘ï¼Œä¸€èˆ¬ç”¨äºå•å‘å…³æ³¨ï¼Œé»‘åå•
    focus = models.ManyToManyField(to=&quot;self&quot;, symmetrical=False, related_name=&quot;fans_list&quot;)

    class Meta:
        db_table = &quot;orm_member&quot;
        verbose_name = 'ä¼šå‘˜ä¿¡æ¯è¡¨'
        verbose_name_plural = verbose_name

    def __str__(self):
        return str({&quot;id&quot;:self.id, &quot;name&quot;:self.name})

</code></pre>
<p>æ•°æ®è¿ç§»</p>

<pre class="language-none"><code class="language-none">python manage.py makemigrations
python manage.py migrate
</code></pre>
<p>åˆ†æï¼š</p>

<pre class="language-none"><code class="language-none">çˆ¶çº§å¯¹è±¡ï¼šarea.parent  # parentå°±æ˜¯è‡ªå…³è”æ¨¡å‹çš„å¤–é”®å±æ€§ï¼Œå¹¶éå›ºå®šå±æ€§ï¼Œçœ‹åˆ›å»ºæ¨¡å‹æ—¶çš„è®¾ç½®
çˆ¶çº§è·å–å­çº§æ•°æ®å¯¹è±¡ï¼šarea.son_list.all()
</code></pre>
<h4 id="%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE">æ·»åŠ æ•°æ®</h4>

<pre class="language-python"><code class="language-python">class Student4View(View):
    &quot;&quot;&quot;è‡ªå…³è”&quot;&quot;&quot;
    def get1(self, request):
        &quot;&quot;&quot;æ·»åŠ æ•°æ®&quot;&quot;&quot;
        # æ·»åŠ çœä»½æ•°æ®ï¼Œå› ä¸ºæ²¡æœ‰ä¸Šçº§è¾–åŒºï¼Œæ‰€ä»¥ä¸éœ€è¦å£°æ˜å…¶ä»–å­—æ®µ
        area1 = Area.objects.create(name=&quot;æ²³å—çœ&quot;)
        area2 = Area.objects.create(name=&quot;æ²³åŒ—çœ&quot;)
        #
        # # æ·»åŠ åŸå¸‚æ•°æ®
        area3 = Area.objects.get(name=&quot;æ²³å—çœ&quot;)
        area3.to_son.add(
            Area.objects.create(name=&quot;éƒ‘å·å¸‚&quot;),
            Area.objects.create(name=&quot;å¼€å°å¸‚&quot;)
        )

        area4 = Area.objects.get(name=&quot;æ²³åŒ—çœ&quot;)
        Area.objects.create(name=&quot;çŸ³å®¶åº„&quot;, parent=area4)
        Area.objects.create(name=&quot;é‚¯éƒ¸å¸‚&quot;, parent_id=area4.id)

        # # æ·»åŠ åœ°åŒºæ•°æ®
        area5 = Area.objects.get(name=&quot;éƒ‘å·å¸‚&quot;)
        area5.to_son.add(*[
            Area.objects.create(name=&quot;äºŒä¸ƒåŒº&quot;),
            Area.objects.create(name=&quot;æ–°éƒ‘åŒº&quot;),
            Area.objects.create(name=&quot;éƒ‘ä¸œæ–°åŒº&quot;)
        ])

        province = Area.objects.create(name=&quot;å¹¿ä¸œçœ&quot;)
        area_list = [
            Area(name=&quot;ä½›å±±å¸‚&quot;),
            Area(name=&quot;å¹¿å·å¸‚&quot;),
            Area(name=&quot;ç æµ·å¸‚&quot;),
            Area(name=&quot;æ·±åœ³å¸‚&quot;),
        ]
        # bulkå±æ€§åªæœ‰åœ¨ä¸€å¯¹å¤šçš„æ—¶å€™å­˜åœ¨ï¼Œå¤šå¯¹å¤šæ˜¯æ²¡æœ‰ã€‚bulkå…è®¸åˆ—è¡¨ä¸­å‡ºç°æ²¡æœ‰ä¿å­˜åˆ°æ•°æ®åº“ä¸­çš„æ¨¡å‹å¯¹è±¡ï¼Œdjangoä¼šè‡ªåŠ¨åˆ›å»ºåˆ°æ•°æ®åº“ä¸­
        province.to_son.add(*area_list, bulk=False)

        return HttpResponse(&quot;ok&quot;)
</code></pre>
<h4 id="%E6%9F%A5%E6%89%BE%E6%95%B0%E6%8D%AE">æŸ¥æ‰¾æ•°æ®</h4>

<pre class="language-python"><code class="language-python">def get2(self, request):
    &quot;&quot;&quot;æŸ¥è¯¢æ•°æ®&quot;&quot;&quot;
    &quot;&quot;&quot;é€šè¿‡å­çº§è®°å½•æŸ¥æ‰¾çˆ¶çº§è®°å½•ï¼Œå¾—åˆ°å”¯ä¸€çš„çˆ¶çº§&quot;&quot;&quot;
    area = Area.objects.get(name=&quot;äºŒä¸ƒåŒº&quot;)
    print(area.parent)  # {'id': 3, 'name': 'éƒ‘å·å¸‚'}
    print(area.parent.parent) # {'id': 1, 'name': 'æ²³å—çœ'}

    &quot;&quot;&quot;é€šè¿‡çˆ¶çº§è®°å½•æŸ¥æ‰¾å­çº§è®°å½•ï¼Œå¾—åˆ°å¤šä¸ªå­çº§&quot;&quot;&quot;
    area = Area.objects.get(name=&quot;æ²³å—çœ&quot;)
    son_list = area.to_son.all()
    print(son_list)  # &lt;QuerySet [&lt;Area: {'id': 3, 'name': 'éƒ‘å·å¸‚'}&gt;, &lt;Area: {'id': 4, 'name': 'å¼€å°å¸‚'}&gt;]&gt;

    data = []
    for son_area in son_list:
        grandson_list = son_area.to_son.all()
        data.extend(list(grandson_list))
    print(data)

    &quot;&quot;&quot;ä½¿ç”¨å­çº§è®°å½•ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ï¼ŒæŸ¥è¯¢æ•°æ®&quot;&quot;&quot;
    area = Area.objects.filter(to_son__name__in=[&quot;éƒ‘ä¸œæ–°åŒº&quot;]).first() # å› ä¸ºåŒä¸€ä¸ªçˆ¶çº§ä¸‹æœ‰å¤šä¸ªå­çº§è®°å½•ï¼Œæ‰€ä»¥å¿…é¡»ä½¿ç”¨inæ¥æŸ¥æ‰¾
    print(area)  # {'id': 3, 'name': 'éƒ‘å·å¸‚'}

    # é€šè¿‡å­™å­æ‰¾çˆ·çˆ·
    area = Area.objects.filter(to_son__to_son__name__in=[&quot;éƒ‘ä¸œæ–°åŒº&quot;]).first()
    print(area)  # {'id': 1, 'name': 'æ²³å—çœ'}

    &quot;&quot;&quot;ä½¿ç”¨çˆ¶çº§è®°å½•ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ï¼ŒæŸ¥è¯¢æ•°æ®&quot;&quot;&quot;
    son_list = Area.objects.filter(parent__name=&quot;æ²³å—çœ&quot;).all()
    print(son_list)  # &lt;QuerySet [&lt;Area: {'id': 3, 'name': 'éƒ‘å·å¸‚'}&gt;, &lt;Area: {'id': 4, 'name': 'å¼€å°å¸‚'}&gt;]&gt;

    grandson_list = Area.objects.filter(parent__parent__name=&quot;æ²³å—çœ&quot;).all()
    print(grandson_list) # &lt;QuerySet [&lt;Area: {'id': 7, 'name': 'äºŒä¸ƒåŒº'}&gt;, &lt;Area: {'id': 8, 'name': 'æ–°éƒ‘åŒº'}&gt;, &lt;Area: {'id': 9, 'name': 'éƒ‘ä¸œæ–°åŒº'}&gt;]&gt;
    # SQL: SELECT `orm_area`.`id`, `orm_area`.`name`, `orm_area`.`parent_id` FROM `orm_area` INNER JOIN `orm_area` T2 ON (`orm_area`.`parent_id` = T2.`id`) INNER JOIN `orm_area` T3 ON (T2.`parent_id` = T3.`id`) WHERE T3.`name` = 'æ²³å—çœ' LIMIT 21


    return HttpResponse(&quot;ok&quot;)
</code></pre>
<h4 id="%E5%A4%9A%E5%AF%B9%E5%A4%9A%E5%BB%BA%E7%AB%8B%E5%85%B3%E8%81%94">å¤šå¯¹å¤šå»ºç«‹å…³è”</h4>

<pre class="language-python"><code class="language-python">def get3(self, request):
    &quot;&quot;&quot;å¤šå¯¹å¤šçš„è‡ªå…³è”[åŒå‘]ï¼šæ·»åŠ æ•°æ®&quot;&quot;&quot;
    # æ·»åŠ æ•°æ®
    member1 = Member.objects.create(name=&quot;å°æ˜&quot;, age=16)
    member2 = Member.objects.create(name=&quot;å°çº¢&quot;, age=15)
    member3 = Member.objects.create(name=&quot;å°ç™½&quot;, age=15)
    member4 = Member.objects.create(name=&quot;å°é»‘&quot;, age=15)
    member5 = Member.objects.create(name=&quot;å°å…°&quot;, age=15)

    # å°çº¢æ·»åŠ å¥½å‹
    member1 = Member.objects.get(name=&quot;å°çº¢&quot;)
    member2 = Member.objects.get(name=&quot;å°é»‘&quot;)
    member3 = Member.objects.get(name=&quot;å°ç™½&quot;)
    member1.friends.add(member2, member3)

    # å°æ˜æ·»åŠ å¥½å‹
    member1 = Member.objects.get(name=&quot;å°æ˜&quot;)
    member2 = Member.objects.get(name=&quot;å°é»‘&quot;)
    member3 = Member.objects.get(name=&quot;å°ç™½&quot;)
    member4 = Member.objects.get(name=&quot;å°çº¢&quot;)
    member1.friends.add(member2, member3, member4)

    # å°å…°æ·»åŠ å¥½å‹
    member1 = Member.objects.get(name=&quot;å°å…°&quot;)
    member2 = Member.objects.get(name=&quot;å°é»‘&quot;)
    member3 = Member.objects.get(name=&quot;å°ç™½&quot;)
    member4 = Member.objects.get(name=&quot;å°çº¢&quot;)
    member5 = Member.objects.get(name=&quot;å°æ˜&quot;)
    member1.friends.add(member2, member3, member4, member5)

    # å°ç™½æ·»åŠ å¥½å‹
    member1 = Member.objects.get(name=&quot;å°ç™½&quot;)
    member2 = Member.objects.get(name=&quot;å°é»‘&quot;)
    member3 = Member.objects.get(name=&quot;å°æ˜&quot;)
    member4 = Member.objects.get(name=&quot;å°çº¢&quot;)
    member1.friends.add(member2, member3, member4)

    return HttpResponse(&quot;OK&quot;)
</code></pre>
<h4 id="%E5%A4%9A%E5%AF%B9%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C">å¤šå¯¹å¤šæ•°æ®æ“ä½œ</h4>

<pre class="language-python"><code class="language-python">def get4(self, request):
    &quot;&quot;&quot;å¤šå¯¹å¤šçš„è‡ªå…³è”[åŒå‘]ï¼šæŸ¥è¯¢æ•°æ®&quot;&quot;&quot;
    member = Member.objects.get(name=&quot;å°é»‘&quot;)
    # æŸ¥æ‰¾å°é»‘çš„æœ‹å‹?
    print(member.friends.all())
    return HttpResponse(&quot;OK&quot;)

def get5(self,request):
    &quot;&quot;&quot;å¤šå¯¹å¤šçš„è‡ªå…³è”[å•å‘]: æ·»åŠ æ•°æ®&quot;&quot;&quot;
    # å°çº¢çš„å…³æ³¨
    member1 = Member.objects.get(name=&quot;å°çº¢&quot;)
    member2 = Member.objects.get(name=&quot;å°é»‘&quot;)
    member3 = Member.objects.get(name=&quot;å°ç™½&quot;)
    member1.focus.add(member2, member3)

    # å°æ˜çš„å…³æ³¨
    member1 = Member.objects.get(name=&quot;å°æ˜&quot;)
    member2 = Member.objects.get(name=&quot;å°é»‘&quot;)
    member3 = Member.objects.get(name=&quot;å°ç™½&quot;)
    member4 = Member.objects.get(name=&quot;å°çº¢&quot;)
    member1.focus.add(member2, member3, member4)

    # å°å…°çš„å…³æ³¨
    member1 = Member.objects.get(name=&quot;å°å…°&quot;)
    member2 = Member.objects.get(name=&quot;å°é»‘&quot;)
    member3 = Member.objects.get(name=&quot;å°ç™½&quot;)
    member4 = Member.objects.get(name=&quot;å°çº¢&quot;)
    member5 = Member.objects.get(name=&quot;å°æ˜&quot;)
    member1.focus.add(member2, member3, member4, member5)

    # å°ç™½çš„å…³æ³¨
    member1 = Member.objects.get(name=&quot;å°ç™½&quot;)
    member2 = Member.objects.get(name=&quot;å°é»‘&quot;)
    member3 = Member.objects.get(name=&quot;å°æ˜&quot;)
    member4 = Member.objects.get(name=&quot;å°çº¢&quot;)
    member1.focus.add(member2, member3, member4)

    &quot;&quot;&quot;è‡ªå…³è”çš„æ·»åŠ å…³ç³»ä¸æ™®é€šå¤šè¡¨å…³è”çš„å…³ç³»æ“ä½œç±»ä¼¼ï¼Œä¸ä»…æ”¯æŒaddï¼Œä¹Ÿæ”¯æŒsetï¼Œclear,removeç­‰æ“ä½œ&quot;&quot;&quot;

    return HttpResponse(&quot;OK&quot;)

def get(self,request):
    &quot;&quot;&quot;å¤šå¯¹å¤šçš„è‡ªå…³è”[å•å‘]: æŸ¥è¯¢æ•°æ®&quot;&quot;&quot;
    æŸ¥è¯¢å°çº¢çš„å…³æ³¨åˆ—è¡¨
    member = Member.objects.get(name=&quot;å°çº¢&quot;)
    print(member.focus.all())

    # æŸ¥è¯¢å°çº¢çš„ç²‰ä¸åˆ—è¡¨
    member = Member.objects.get(name=&quot;å°çº¢&quot;)
    print(member.fans_list.all())

    return HttpResponse(&quot;OK&quot;)
</code></pre>

                        
                    </div>
                </div>
                <div id="previous_next">
                    <div id="previous">
                        
                        <a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/django/2025-7-29-07-æ•°æ®åº“.html">
                            <span class="icon"></span>
                            <span class="label">2025-7-29-07-æ•°æ®åº“</span>
                        </a>
                        
                    </div>
                    <div id="next">
                        
                        <a href="/note/ç¼–ç¨‹åŸºç¡€/python/è¿›é˜¶ä½¿ç”¨/django/2025-8-1-09-ORMä¼˜åŒ–.html">
                            <span class="label">2025-8-1-09-ORMä¼˜åŒ–</span>
                            <span class="icon"></span>
                        </a>
                        
                    </div>
                </div>
                <div id="comments-container"></div>
            </div>
            <div id="toc_wrapper">
                <div id="toc">
                    <div id="toc_content">
                            
                    </div>
                </div>
            </div>
        </div>
    </div>
    <a id="to_top" href="#"></a>
    <div id="doc_footer">
        <div id="footer">
            <div id="footer_top">
                <ul>
<li><a>é“¾æ¥</a><ul><li><a target="_blank" href="https://teedoc.neucrack.com">ç½‘ç«™ä½¿ç”¨ teedoc ç”Ÿæˆ</a></li>
<li><a target="_blank" href="https://neucrack.com">Copyright Â© 2021 Neucrack</a></li>
<li><a  href="/note/sitemap.xml">ç½‘ç«™åœ°å›¾</a></li>
</ul>
</li>
<li><a>æºç </a><ul><li><a target="_blank" href="https://github.com/XuSenfeng/note/">github</a></li>
<li><a target="_blank" href="https://github.com/teedoc/teedoc">æœ¬ç½‘ç«™æºæ–‡ä»¶</a></li>
</ul>
</li>
</ul>

            </div>
            <div id="footer_bottom">
                <ul>
<li><a target="_blank" href="https://beian.miit.gov.cn">æ¸ICPå¤‡19015320å·</a></li>
<li><a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44030602004109">ç²¤å…¬ç½‘å®‰å¤‡44030602004109å·</a></li>
</ul>

            </div>
        </div>
    </div>
    
        <script src="/note/teedoc-plugin-markdown-parser/mermaid.min.js"></script>
    
        <script>mermaid.initialize({startOnLoad:true});</script>
    
        <script type="text/javascript">
                var transLoaded = false;
                var loading = false;
                var domain = "translate.google.com";
                var domainDefault = domain;
                var storeDomain = localStorage.getItem("googleTransDomain");
                if(storeDomain){
                    domain = storeDomain;
                    console.log("load google translate domain from local storage:" + domain);
                }
                function getUrl(domain){
                    if(domain == "/")
                        return "/static/js/google_translate/element.js?cb=googleTranslateElementInit";
                    else
                        return "https://" + domain + "/translate_a/element.js?cb=googleTranslateElementInit";
                }
                var url = getUrl(domain);
                console.log("google translate domain:" + domain + ", url: " + url);
                function googleTranslateElementInit() {
                    new google.translate.TranslateElement({pageLanguage: "auto", layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
                }
                function loadJS( url, callback ){
                    var script = document.createElement('script');
                    fn = callback || function(){ };
                    script.type = 'text/javascript';
                    if(script.readyState){
                        script.onreadystatechange = function(){
                            if( script.readyState == 'loaded' || script.readyState == 'complete' ){
                                script.onreadystatechange = null;
                                fn();
                            }
                        };
                    }else{
                        script.onload = function(){
                            fn();
                        };
                    }
                    script.src = url;
                    document.getElementsByTagName('head')[0].appendChild(script);
                }
                function removeHint(){
                    var hint = document.getElementById("loadingTranslate");
                    if(hint){
                        hint.remove();
                    }
                }
                var btn = document.getElementById("google_translate_element");
                btn.onclick = function(){
                    if(transLoaded) return;
                    if(loading){
                        var flag = confirm("loading from " + domain + ", please wait, or change domain?");
                        if(flag){
                            newDomain = prompt("domain, default: " + domainDefault + ", now: " + domain);
                            if(newDomain){
                                domain = newDomain;
                                console.log(domain);
                                url = getUrl(domain);
                                loadJS(url, function(){
                                    localStorage.setItem("googleTransDomain", domain);
                                    removeHint()
                                    transLoaded = true;
                                });
                            }
                        }
                        return;
                    }
                    btn.innerHTML = '<span id="loadingTranslate"><img class="icon" src="/note/static/image/google_translate/translate.svg"/>Loading ...</span>';
                    loading = true;
                    loadJS(url, function(){
                        localStorage.setItem("googleTransDomain", domain);
                        removeHint()
                        transLoaded = true;
                    });
                }
                </script>
            
    
        <script src="/note/static/js/theme_default/tocbot.min.js"></script>
    
        <script src="/note/static/js/theme_default/main.js"></script>
    
        <script src="/note/static/js/theme_default/viewer.min.js"></script>
    
        <script src="/note/static/css/theme_default/prism.min.js"></script>
    
        <script src="/note/static/js/search/search_main.js"></script>
    
        <script src="/note/static/js/plugin_blog/main.js"></script>
    
        <link rel="stylesheet" href="/note/static/js/add_hint/style.css" type="text/css"/>
    
        <script src="/note/static/js/add_hint/main.js"></script>
    
        <script src="/note/static/js/gitalk/gitalk.min.js"></script>
    
        <script src="/note/static/js/gitalk/main.js"></script>
    
        <script src="/note/static/js/custom.js"></script>
    
</body>

</html>