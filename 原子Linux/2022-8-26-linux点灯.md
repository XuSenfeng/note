---
layout: post
title: "Linux点灯" 
date:   2022-8-23 15:39:08 +0800
tags: 嵌入式 原子Linux 
---

# Linux点灯

Linux也可以直接操作寄存器, 但是很麻烦, 不能直接对寄存器的物理地址进行操作, 因为Linux会使用MMU进行操作, 完成虚拟空间到物理空间的映射, 还有进行内存保护, 对于32位的寄存器可以映射的地址是4GB空间

在Linux中进行的都是虚拟的地址, 在对物理地址进行操作之前, 需要先得到物理地址对应的虚拟地址, 开启MMU以后就需要使用ioremap函数, 定义在arch/arm/linux/asm/io.h文件之中, 第一个参数是物理地址起始地址, 第二个是内存的长度

在使用后需要使用函数进行释放, iounmap, 只有一个参数, 是首地址, 返回的



## 流程

初始化时钟, 初始化复用, 电气属性

在输入输出的时候, 有专门的操作函数

readb(地址)

readw

read

读取参数

writeb(值, 地址)

writew

writel

写操作









