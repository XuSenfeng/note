# EchoAI代码

## 唤醒词

[Snowboy Personal Wake Word](https://snowboy.hahack.com/)

可以在这个网页生成.pmdl文件, 使用的是Snowboy

```c
void IdleState::Run(Application* app) {
    USER_LOG_INFO("Idle state run.");
    SnowboyDetect* detector = SnowboyDetectConstructor("third_party/snowboy/resources/common.res",
                                                     "third_party/snowboy/resources/models/echo.pmdl");
    SnowboyDetectSetSensitivity(detector, "0.5");
    SnowboyDetectSetAudioGain(detector, 1);
    SnowboyDetectApplyFrontend(detector, false);
    std::vector<int16_t> data;
    while (state_running_.load() == true) {
        if(app->audio_processor_.recordedQueueIsEmpty() == false) {
            app->audio_processor_.getRecordedAudio(data);
            // 检测唤醒词
            int result = SnowboyDetectRunDetection(detector, data.data(), data.size(), false);
            if (result > 0) {
                // 发生唤醒事件
                USER_LOG_INFO("Wake detected.");
                app->eventQueue_.Enqueue(static_cast<int>(AppEvent::wake_detected));
                break;
            }
        }
    }
    SnowboyDetectDestructor(detector);
}
```

Snowboy 是一个基于深度神经网络（DNN）的唤醒词检测引擎，最初由 Kitt.AI 开发，旨在为语音激活应用提供高效的解决方案。它允许设备在检测到特定唤醒词（如“Hey Siri”或“OK Google”）时启动语音处理，而无需依赖云端服务

Snowboy 提供了多种语言的 SDK，包括 Python、C++、Java 等