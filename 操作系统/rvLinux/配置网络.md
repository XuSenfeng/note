# 配置网络

![image-20250901155622714](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202509011556788.png)

实际的登录使用这个ip

![image-20250901160200912](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202509011602945.png)

### WIFI连接[](https://no-chicken.com/content/Echo-Mate/5.开发板操作.html#_2-wifi连接)

1. 开启wifi

    ```
    ifconfig wlan0 up
    ```

2. 进入wpa conf，`vi /etc/wpa_supplicant.conf`，配置wifi名和密码。(可以网上搜一下参数配置)

    ```
    ctrl_interface=/var/run/wpa_supplicant
    ap_scan=1
    update_config=1
    
    network={
            ssid="wifi-name"
            psk="12345678"
            key_mgmt=WPA-PSK
            scan_ssid=1 #为链接隐藏的网络
    }
    ```

3. 创建一个socket文件

    ```
    mkdir -p /var/run/wpa_supplicant
    ```

4. 然后使用`wpa_supplicant -B -c /etc/wpa_supplicant.conf -i wlan0`连接wifi，然后需要等待一会，如果是串口调试，会输出以下内容（SSH调试不会自动出现，需要使用dmesg命令查看更多log）：

    bash

    ```
    [root@root ]# wpa_supplicant -B -c /etc/wpa_supplicant.conf -i wlan0
    
    Successfully initialized wpa_supplicant
    rfkill: Cannot open RFKILL control device
    [  670.124975] RTL8723BS: rtw_set_802_11_connect(wlan0)  fw_state = 0x00000008
    [  678.988193] RTL8723BS: rtw_set_802_11_connect(wlan0)  fw_state = 0x00000008
    [  688.127631] RTL8723BS: rtw_set_802_11_connect(wlan0)  fw_state = 0x00000008
    [  697.804890] RTL8723BS: rtw_set_802_11_connect(wlan0)  fw_state = 0x00000008
    [  698.446240] RTL8723BS: start auth
    [  698.466241] RTL8723BS: auth success, start assoc
    [  698.521065] RTL8723BS: rtw_cfg80211_indicate_connect(wlan0) BSS not found !!
    [  698.521119] RTL8723BS: assoc success
    [  698.598174] RTL8723BS: send eapol packet
    [  698.643221] RTL8723BS: send eapol packet
    [  698.644951] RTL8723BS: set pairwise key camid:4, addr:9e:a4:d3:f5:da:8d, kid:0, type:AES
    [  698.647953] RTL8723BS: set group key camid:5, addr:9e:a4:d3:f5:da:8d, kid:1, type:AES
    ```

5. 上面的wpa_supplicant服务启动后，建议等待一会，再配置IP

    bash

    ```
    udhcpc -i wlan0
    ```

    1

6. 然后你就可以ping一下baidu等网站测下网络了

7. 如果想要切换`WiFi`，需要重启 `wpa_supplicant` 服务，需要运行

    bash

    ```
    killall -9 wpa_supplicant
    ```