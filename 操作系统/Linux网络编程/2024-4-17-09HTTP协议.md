---
layout: post
title: "HTTP协议" 
date:   2024-4-14 15:39:08 +0800
tags: Linux 网络
---

# HTTP协议

HTTP，超文本传输协议（ HyperText Transfer Protocol ）。[互联网](https://baike.baidu.com/item/互联网)应用最为广泛的一种[网络应用层协议](https://baike.baidu.com/item/网络协议)。它可以减少网络传输，使浏览器更加高效。

​    通常HTTP消息包括客户机向服务器的请求消息和服务器向客户机的响应消息。

### 请求消息(Request) 

浏览器 —> 发给 —> 服务器。主旨内容包含4部分：

+ 请求行: 说明请求类型, 要访问的资源, 以及使用的http版本
+ 请求头: 说明服务器要使用的附加信息
+ 空行: 必须！, 即使没有请求数据
+ 请求数据: 也叫主体, 可以添加任意的其他数据

以下是浏览器发送给服务器的http**协议头**内容举例, 注意：9行的空行(\r\n)也是协议头的一部分：

1. GET  /hello.c  HTTP/1.1
2. Host: localhost:2222
3. User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:24.0) Gecko/201001  01 Firefox/24.0
4. Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.
5. Accept-Language: zh-cn,zh;q=0.8,en-us;q=0.5,en;q=0.3
6.  Accept-Encoding: gzip, deflate
7. Connection: keep-alive
8. If-Modified-Since: Fri, 18 Jul 2014 08:36:36 GMT
9. 

> 默认使用的是TCP连接

### 响应消息(Response)

服务器 —> 发给 —> 浏览器。主旨内容包含4部分：

+ 状态行: 包括http协议版本号, 状态码, 状态信息
+ 消息报头: 说明客户端要使用的一些附加信息
+ 空行: 必须!
+ 响应正文: 服务器返回给客户端的文本信息

以下是经服务器按照http协议，写回给浏览器的内容举例，1~9行是**协议头**部分。注意：9行\r\n的空行不可忽略

1. HTTP/1.1  200  Ok
2. Server: xhttpd
3. Date: Fri, 18 Jul 2014 14:34:26 GMT
4. Content-Type: text/plain; charset=iso-8859-1 (字符文件, 以及使用的编码, 必选项)
5. Content-Length: 32 （ 要么不写 或者 传-1， 要写务必精确 ！(实际测试的时候在服务器-1会出问题) ）
6. Content-Language: zh-CN
7. Last-Modified: Fri, 18 Jul 2014 08:36:36 GMT
8. Connection: close
9. 
10. #include <stdio.h>    (从这里开始是实际返回的额信息)
11. 
12. int main(void)
13. {  
14. printf(“ Welcome to itcast ... \n");
15. return 0;
16. }

### HTTP请求方法

+ **GET**   

请求指定的页面信息，并返回实体主体。

+ **POST**  

向指定资源提交数据进行处理请求（例如提交表单或者上传文件）。数据被包含在请求体中。POST请求可能会导致新的资源的建立和/或已有资源的修改。

+  **HEAD**  

类似于get请求，只不过返回的响应中没有具体的内容，用于获取报头

+ **PUT**   

从客户端向服务器传送的数据取代指定的文档的内容。

+ **DELETE**   

请求服务器删除指定的页面。

+ **CONNECT**  

HTTP/1.1协议中预留给能够将连接改为管道方式的代理服务器。

+ **OPTIONS**     

允许客户端查看服务器的性能。

+ **TRACE**   

回显服务器收到的请求，主要用于测试或诊断。

### HTTP常用状态码

状态代码有三位数字组成，第一个数字定义了响应的类别，共分五种类别:

o  1xx：指示信息--表示请求已接收，继续处理

o  2xx：成功--表示请求已被成功接收、理解、接受

o  3xx：重定向--要完成请求必须进行更进一步的操作

o  4xx：客户端错误--请求有语法错误或请求无法实现

o  5xx：服务器端错误--服务器未能实现合法的请求

l **常见状态码：**

200 OK        客户端请求成功

400 Bad Request    客户端请求有语法错误，不能被服务器所理解

401 Unauthorized   请求未经授权，

403 Forbidden     服务器收到请求，但是拒绝提供服务

404 Not Found     请求资源不存在，eg：输入了错误的URL

500 Internal Server Error   服务器发生不可预期的错误

503 Server Unavailable   服务器当前不能处理客户端的请求。

### 常见网络文件类型：

普通文件: text/plain; charset=iso-8859-1

*.html : text/html; charset=iso-8859-1

*.jpg : image/jpeg 

*.gif : image/gif 

*.png: image/png 

*.wav: audio/wav

*.avi : video/x-msvideo

*.mov   : video/quicktime

*.mp3   : audio/mpeg

charset=iso-8859-1      西欧的编码，说明网站采用英文编码

charset=gb2312      说明网站采用的编码是简体中文

charset=utf-8         代表世界通用的语言编码；可以用到中文、韩文、日文等世界上所有语言编码

charset=euc-kr    说明网站采用的编码是韩文；

charset=big5     说明网站采用的编码是繁体中文；



