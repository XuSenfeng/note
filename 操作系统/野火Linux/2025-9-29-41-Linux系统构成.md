# Linux系统构成

## Uboot

U-Boot 是一个主要用于嵌入式系统的引导加载程序，可以支持多种不同的计算机系统结构，包括 PPC、ARM、AVR32、MIPS、x86、68k、Nios与MicroBlaze。

用来启动操作系统内核，它分为两个阶段，即boot+loader，**boot**阶段启动系统，**初始化硬件设备**，建立内存空间映射图，将系统的软硬件带到一个**合适的状态**，**loader**阶段将操作系统**内核文件加载**至内存，之后跳转到内核所在地址运行。

![image-20250929175526182](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202509291755243.png)

## 内核

Linux内核的主要模块（或组件）分以下几个部分：进程管理子系 统、内存管理子系统、文件子系统、网络子系统、设备子系统等

![image-20250929182622435](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202509291826703.png)

## 设备树

Uboot 和 Linux 不能直接识别DTS文件，而DTB可以被内核与BootLoader识别解析，通常在制 作NANDFlash、SDCard启动镜像时，通常会为DTB文件留下一部分存储区域以存储DTB，在 BootLoader 启动内核时，会先读取DTB到内存，再提供给内核使用。

![image-20250929182827788](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202509291828829.png)

## 根文件系统

根文件系统（rootfs）是linux在初始化时加载的第一个文件系统，根文件系统包括根目录和真实 文件系统，它包含系统引导和使其他文件系统得以挂载（mount）所必要的文件。根文件系统包 函Linux 启动时所必须的目录和关键性的文件，例如Linux启动时必要的初始化文件，它在init 目录下，此外根文件系统中还包括了许多的应用程序bin目录等，任何包括这些Linux系统启动 所必须的文件都可以成为根文件系统。

在Linux 内核启动的初始阶段，首先内核会初始化一个基于内存的文件系统，如initramfs，initrd 等，然后以只读的方式去加载根文件系统（loadrootfs），读取并且运行/sbin/init初始化文件，根 据/etc/inittab 配置文件完成系统的初始化工作（提示：/sbin/init是一个二进制可执行文件，为系统 的初始化程序，而/etc/inittab是它的配置文件），在初始化的过程中，还会以读写的方式重新挂载 根文件系统，在系统启动后，根文件系统就可用于存储数据了，存在根文件系统是Linux启动时 的必要条件

![image-20250929183041495](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202509291830534.png)

## image-builder项目

移植自 BeagleBone 公司的 image-builder, 基于 qemu 和 debootstrap 等工具来生成和定制 arm 架构的debian 文件系统。

debootstrap 是 Debian 官方提供的，适用于生成不同架构、不同版本的debian文件 系统

> https://github.com/beagleboard/image-builder

### 原理

在使用debootstrap 工具生成debian文件系统后，然后qemu使用新构建的debian文件系统作为文 件系统，在qemu模拟arm架构的处理器并启动后，就可以用apt install命令预装各种应用软件， linux 内核和设备树都是在这个阶段中安装更新的。安装完毕后，使用dd命令把得到的文件系统 和u-boot 一起打包到img文件中，即可生成用于sd卡烧录的debian系统镜像。

### 下载

```c
git clone https://gitee.com/Embedfire/ebf-image-builder.git
```

+ configs 目录:主要是Debian文件系统的一些配置项，主要有:预安装软件列表、镜像源地址 等。
+ doc 目录:说明文档。
+ env 目录:设置环境设置相关脚本。
+ local_directory 目录: 读者可在这个目录下创建或添加一些想要的文件或者目录，最终会被 添加到根文件系统/usr/share目录下。
+ local_pkg 目录：读者可在这个目录下放一些想要打包进镜像的软件包。
+ publish 目录: 这个目录下存放着编译debian固件的起始脚本，是整个项目的编译入口。
+ scripts 目录: 存放了一些执行特殊功能的脚本，在编译过程中会被调用。
+ target 目录: 这里面放置的内容比较杂散，有启动参数的说明文档、systemd的启动服务和 deb 镜像源的密钥等等。
+ tools 目录: 主要是打包脚本，完成把文件系统和uboot打包成img镜像的功能。 

在执行编译镜像之后，在该目录下会增加几个新的目录

+ build 目录: 编译得到的uboot、内核、以及内核安装包。
+ deploy 目录: 编译的到的完整镜像目录。
+ ebf_linux_kernel 目录: 编译需要的内核源码路径。
+ ebf_linux_uboot 目录: 编译需要的uboot 源码路径。

### 使用

```base
jiao@jiao-virtual-machine:~/yh-linux/image-builder/ebf-image-builder$ source env/setenv.sh 

Choose install type:
1. ALL
2. NAND
3. eMMC/SD

Which install type would you like? [1] 1

Choose fire board:
1. ebf_imx_6ull_mini
2. ebf_imx_6ull_pro
3. ebf_imx_8m_mini
4. ebf_rockchip_3328
5. ebf_rockchip_3399
6. ebf_stm_mp157_star

Which board would you like? [1] 2
Skiping tfa... 

Choose uboot version:
1. uboot-2020.10

Which uboot version would you like? [1] 1

Choose uboot tag:
1. uboot-latest

Which uboot tag would you like? [1] 1

Choose linux version:
1. linux-4.19.35
2. linux-4.19.35-rt19
3. linux-4.19.71

Which linux version would you like? [1] 1

Choose linux tag:
1. linux-latest
2. linux-ebf_imx_4.19_2020_12_09

Which linux tag would you like? [1] 1

Choose distribution:
1. Debian
2. Ubuntu

Which distribution would you like? [1] 1

Choose Debian release:
1. buster

Which Debian release would you like? [1] 1

Choose Debian type:
1. console
2. qt
3. desktop

Which Debian type would you like? [1] 1
===========================================

#FIRE_BOARD=ebf_imx_6ull_pro
#TFA=
#LINUX=4.19.35
#UBOOT=2020.10
#DISTRIBUTION=Debian
#DISTRIB_RELEASE=buster
#DISTRIB_TYPE=console
#INSTALL_TYPE=ALL

===========================================

Environment setup done.
Type 'make' to build.
```

配置完成之后打印信息，若有想要修改配置信息，重新执行source env/setenv.sh即可

```bash
make DOWNLOAD_MIRROR=china
```

当重复多次编译镜像时，uboot、内核并不会反复编译。如果需要重新编译uboot、内核，可加入 `FORCE_UPDATE=enable`

生成的image镜像位于deploy/lubancat-carp-xxx-armhf-202x-xx-xx/目录下，后缀名为.img，可使用 sd 卡烧录工具将其烧录到sd卡中

#### 编译uboot 

在ebf-image-builder 目录下，可使用以下命令只编译

`make uboot`

生成uboot文件位于build目录下

#### 编译内核 

在ebf-image-builder目录下，可使用以下命令只编译内核

`make kernel`

生成文件位于build/images目录下

#### 编译内核安装包

`make kernel-deb`

生成deb包位于build/debs目录下

### 原理

![image-20250929191305694](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202509291913832.png)

### 配置

用户若想要对编译出来的镜像做些调整，主要需要涉及到的目录为configs目录

![image-20250929191448290](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202509291914323.png)

+ boards: 该目录主要存放板级相关配置信息，在后面将逐渐添加新的板子。在通常情况下这个目录下的配置文 件不需要用户修改，仅做为了解即可
+ common.conf: 通用的配置信息，包括软件源、需要预安装的软件包等信息。
+ function: 编译相关脚本，实现uboot、kernel等编译，用户可以不关心。
+ user.conf: 用户的配置文件，用户账号密码、以及上电时打印提示信息等

> 用户若想要往板子里添加一些自己的文件，可将这些文件放在local_directory目录下，在构建完 整的镜像时，这些文件将被拷贝到/usr/share/目录下

#### config/boards

```python
## [Git Remote Repository]
	SUPPORTED_UBOOT=("2020.10")
	SUPPORTED_UBOOT_TAGS=("latest") ## 记录UBOOT,LINUX内核以及git信息
	SUPPORTED_LINUX=( "4.19.35" "4.19.35-rt19" "4.19.71")
	SUPPORTED_LINUX_TAGS=("latest" "ebf_imx_4.19_2020_12_09")
	## UBOOT相关的信息
	case "$UBOOT" in
		2020.10)
			UBOOT_GIT_BRANCH="ebf_v2020_10_imx"
			UBOOT_COMPILER="arm-none-eabi-"
			UBOOT_DIR="$ROOT/ebf_linux_uboot"
			UBOOT_BUILD_FILE="u-boot-dtb.imx"
			NUBOOT_FILE="u-boot-nand.imx"
			MUBOOT_FILE="u-boot-mmc.imx"
			UBOOT_MMC_DEFCONFIG="mx6ull_fire_mmc_defconfig"
			UBOOT_NAND_DEFCONFIG="mx6ull_fire_nand_defconfig"
			;;
	esac

	case "$UBOOT_TAGS" in
		latest)
			UBOOT_GIT_TAGS=""
			;;
		ebf_imx_4.19_2020_12_09)
			UBOOT_GIT_TAGS="ebf_imx_4.19_2020_12_09"
			;;
	esac
	## 关于内核设备树文件，git仓库分支，编译工具链，内核仓库分支，内核配置文件，以及生成的deb包文件
	case "$LINUX" in
		4.19.71)
			LINUX_MMC_DTB="imx6ull-mmc-npi.dtb"
			LINUX_NAND_DTB="imx6ull-nand-npi.dtb"
			LINUX_GIT_BRANCH="ebf_4.19_imx"
			LINUX_DEFCONFIG="npi_v7_defconfig"
			KERNEL_COMPILER="arm-linux-gnueabihf-"
			LINUX_DIR="$ROOT/ebf_linux_kernel"
			LOCAL_VERSION="-imx6"
			KERNEL_DEB="linux-image-${LINUX}${LOCAL_VERSION}_${KDEB_VERSION}_armhf.deb"
			;;
		
		4.19.35)
			LINUX_MMC_DTB="imx6ull-mmc-npi.dtb"
			LINUX_NAND_DTB="imx6ull-nand-npi.dtb"
			LINUX_GIT_BRANCH="ebf_4.19.35_imx6ul"
			LINUX_DEFCONFIG="npi_v7_defconfig"
			KERNEL_COMPILER="arm-linux-gnueabihf-"
			LINUX_DIR="$ROOT/ebf_linux_kernel"
			LOCAL_VERSION="-imx6"
			KERNEL_DEB="linux-image-${LINUX}${LOCAL_VERSION}_${KDEB_VERSION}_armhf.deb"
			;;

		4.19.35-rt19)
			LINUX_MMC_DTB="imx6ull-mmc-npi.dtb"
			LINUX_NAND_DTB="imx6ull-nand-npi.dtb"
			LINUX_GIT_BRANCH="ebf_4.19.35-rt19_imx6ul"
			LINUX_DEFCONFIG="npi_v7_defconfig"
			KERNEL_COMPILER="arm-linux-gnueabihf-"
			LINUX_DIR="$ROOT/ebf_linux_kernel"
			LOCAL_VERSION="-imx6"
			KERNEL_DEB="linux-image-${LINUX}${LOCAL_VERSION}_${KDEB_VERSION}_armhf.deb"
			;;
	esac

	case "$LINUX_TAGS" in
		latest)
			LINUX_GIT_TAGS=""
			;;
		ebf_imx_4.19_2020_12_09)
			LINUX_GIT_TAGS="ebf_imx_4.19_2020_12_09"
			;;
	esac

## [Image Build Info]，关于uboot需要烧录到sd卡的位置，其中dd_uboot_seek表示块偏移，dd_uboot_bs
## 表示块大小(单位为字节)，imx6ull规定若想从sd启动u-boot.imx要有一个1Kbyte的偏移
	ARCH="arm"
	ebf_repo_dist="carp-imx6"	
	deb_arch="armhf"
	time=$(date +%Y-%m-%d)
	image_name="${deb_distribution}-${release}-${DISTRIB_TYPE}-${deb_arch}-${time}"
	target_name="imx6ull"
	options="--img-2gb ${target_name}-${image_name} --enable-fat-partition"
	options="${options} --enable-uboot-cape-overlays --force-device-tree ${LINUX_MMC_DTB} "
	options="${options} --backup-device-tree ${LINUX_NAND_DTB} --bootloader ${BUILD}"
	conf_board="fire-imx6ull-npi"
	chroot_COPY_SETUP_SDCARD="enable"
	chroot_bootPart_logo="enable"
	chroot_custom_setup_sdcard="imxv7_setup_sdcard.sh"
	include_firmware="enable"

## [Bootloader Partition]设置boot分区大小以及文件系统类型等。其中conf_boot_endm表示boot分区的
## 大小，conf_boot_startmb表示整个uboot的起始地址，两个单位都是mb
	bootloader_location="dd_uboot_boot"
	boot_name="$MUBOOT_FILE"
	dd_uboot_count=""
	dd_uboot_seek="2"
	dd_uboot_conf=""
	dd_uboot_bs="512"
	conf_boot_startmb="4"
	conf_boot_endmb="40"
	conf_boot_fstype="fat"
	conf_root_device="/dev/mmcblk0"
	USE_LOCAL_BOOT="yes"
## Extra software
	board_deb_include="ebf-gst"
	other_pk="ebf-gst"
## [Firmware]
	ROOT_FIRMWARE_PATH=""
	NEED_EXT4_IMG="false"	
##	[Device Tree Overlays] 镜像默认配置的设备树插件
OVERLAYS="
dtoverlay=/usr/lib/linux-image-${LINUX}${LOCAL_VERSION}/overlays/imx-fire-i2c1.dtbo
dtoverlay=/usr/lib/linux-image-${LINUX}${LOCAL_VERSION}/overlays/imx-fire-i2c2.dtbo
dtoverlay=/usr/lib/linux-image-${LINUX}${LOCAL_VERSION}/overlays/imx-fire-74hc595.dtbo
#dtoverlay=/usr/lib/linux-image-${LINUX}${LOCAL_VERSION}/overlays/imx-fire-485r1.dtbo
#dtoverlay=/usr/lib/linux-image-${LINUX}${LOCAL_VERSION}/overlays/imx-fire-485r2.dtbo
dtoverlay=/usr/lib/linux-image-${LINUX}${LOCAL_VERSION}/overlays/imx-fire-adc1.dtbo
dtoverlay=/usr/lib/linux-image-${LINUX}${LOCAL_VERSION}/overlays/imx-fire-hdmi.dtbo
#dtoverlay=/usr/lib/linux-image-${LINUX}${LOCAL_VERSION}/overlays/imx-fire-cam.dtbo
#dtoverlay=/usr/lib/linux-image-${LINUX}${LOCAL_VERSION}/overlays/imx-fire-btwifi.dtbo
#dtoverlay=/usr/lib/linux-image-${LINUX}${LOCAL_VERSION}/overlays/imx-fire-can1.dtbo
#dtoverlay=/usr/lib/linux-image-${LINUX}${LOCAL_VERSION}/overlays/imx-fire-can2.dtbo
#dtoverlay=/usr/lib/linux-image-${LINUX}${LOCAL_VERSION}/overlays/imx-fire-dht11.dtbo
#dtoverlay=/usr/lib/linux-image-${LINUX}${LOCAL_VERSION}/overlays/imx-fire-ecspi3.dtbo
dtoverlay=/usr/lib/linux-image-${LINUX}${LOCAL_VERSION}/overlays/imx-fire-key.dtbo
dtoverlay=/usr/lib/linux-image-${LINUX}${LOCAL_VERSION}/overlays/imx-fire-lcd.dtbo
dtoverlay=/usr/lib/linux-image-${LINUX}${LOCAL_VERSION}/overlays/imx-fire-touch-capacitive-goodix.dtbo
#dtoverlay=/usr/lib/linux-image-${LINUX}${LOCAL_VERSION}/overlays/imx-fire-touch-capacitive-gt1151.dtbo
dtoverlay=/usr/lib/linux-image-${LINUX}${LOCAL_VERSION}/overlays/imx-fire-led.dtbo
dtoverlay=/usr/lib/linux-image-${LINUX}${LOCAL_VERSION}/overlays/imx-fire-sound.dtbo
#dtoverlay=/usr/lib/linux-image-${LINUX}${LOCAL_VERSION}/overlays/imx-fire-sound-aic3106.dtbo
dtoverlay=/usr/lib/linux-image-${LINUX}${LOCAL_VERSION}/overlays/imx-fire-uart2.dtbo
#dtoverlay=/usr/lib/linux-image-${LINUX}${LOCAL_VERSION}/overlays/imx-fire-uart3.dtbo
dtoverlay=/usr/lib/linux-image-${LINUX}${LOCAL_VERSION}/overlays/imx-fire-mpu6050.dtbo
#dtoverlay=/usr/lib/linux-image-${LINUX}${LOCAL_VERSION}/overlays/imx-fire-bluetooth.dtbo
#dtoverlay=/usr/lib/linux-image-${LINUX}${LOCAL_VERSION}/overlays/imx-fire-otg1.dtbo
"
```

#### config/common.conf

通用的配置文件，在通常情况下该配置文件不需要用户修 改

```python
## [Project Path] 工程路径
	ROOT="$(dirname "$(dirname "$(readlink -fm "$0")")")"
	CONFIG="$ROOT/configs"
	BOARD_CONFIG="$CONFIG/boards"
	BUILD="$ROOT/build"
	BUILD_IMAGES="$BUILD/images"
	BUILD_DEBS="$BUILD/debs"
	BUILD_SCRIPT="$ROOT/scripts"
	LOCAL_PKG="$ROOT/local_pkg"
	LOCAL_DIR="$ROOT/local_directory"

## [download mirror] 默认的镜像源
	DEBIAN_MIRROR='archive.debian.org/debian'
	UBUNTU_MIRROR='ports.ubuntu.com/'
	if [[ $DOWNLOAD_MIRROR == china ]] ; then
		# DEBIAN_MIRROR='mirrors.tuna.tsinghua.edu.cn/debian'
		# UBUNTU_MIRROR='mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/'
		# DEBIAN_MIRROR='mirrors.bfsu.edu.cn/debian'
		# UBUNTU_MIRROR='mirrors.bfsu.edu.cn/ubuntu-ports/'
		DEBIAN_MIRROR='mirrors.aliyun.com/debian-archive/debian'
		UBUNTU_MIRROR='mirrors.ustc.edu.cn/ubuntu-ports/'		
	fi
	#repo_external_server="https://Embedfire.github.io"
	repo_external_server="https://cloud.embedfire.com/mirrors/ebf-debian"
	#repo_external_server="https://cloud.embedfire.com/mirrors/ebf-test"
	repo_external_server_backup1="https://Embedfire.github.io/"
	repo_external_server_backup2="https://sourceforge.net/projects/embedfire-debian-sources/files/"

## [pakage features] 系统版本定义
	if [[ $DISTRIBUTION == Debian ]]; then
		release="carp"
		deb_distribution="lubancat"
		deb_codename=$DISTRIB_RELEASE
		#deb_arch="armhf"
		deb_components="main contrib non-free"
		deb_mirror=$DEBIAN_MIRROR
		repo_external_dist=$DISTRIB_RELEASE
		repo_external_components="main"
		#KDEB_VERSION="2.2LubanCat"
		KDEB_VERSION="1.$(date +%g%m)stable"
	else
		deb_distribution="ubuntu"
		deb_codename=$DISTRIB_RELEASE
		#deb_arch="armhf"
		deb_components="main universe multiverse"
		repo_external_dist=$DISTRIB_RELEASE
		repo_external_components="main"
		deb_mirror=$UBUNTU_MIRROR
		if [[ $DISTRIB_RELEASE == bionic ]]; then 
		release="18.04"
		#KDEB_VERSION="18.04-Ubuntu"
		KDEB_VERSION="1.$(date +%g%m)stable"
		fi

		if [[ $DISTRIB_RELEASE == focal ]]; then 
		release="20.04"
		#KDEB_VERSION="20.04-Ubuntu"
		KDEB_VERSION="1.$(date +%g%m)stable"
		fi
		
	fi
	chroot_tarball="enable"

## [install default pakage] 默认的软件包
	deb_arch="armhf"
	deb_include="apt-transport-https ca-certificates connman curl dosfstools\
				gnupg gnupg2 ifupdown initramfs-tools isc-dhcp-client nano \
				net-tools netcat rsync sudo udhcpd parted mtd-utils mmc-utils\
				rng-tools haveged wpasupplicant udhcpc openssh-server avahi-daemon\
				gpiod kpartx jq libgpiod-dev rfkill usbutils exfat-fuse exfat-utils \
				ssh alsa-utils" 

	deb_exclude="aptitude aptitude-common groff-base info install-info man-db manpages\
				manpages-dev tasksel tasksel-data"

## [install extern pakage] 不同的版本安装不同的软件包(Qt等)
	repo_external_arch="armhf"
	repo_external="enable"
	repo_external_key="keyfile"
	repo_local_file="enable"
	case $DISTRIB_TYPE in
	console)
		repo_external_pkg_list="kobs-ng-for-imx6ull fire-config-v2 wifi-depent libatomic1 "
		system_directory="/usr/share"
	;;
	qt)
		repo_external_pkg_list="kobs-ng-for-imx6ull fire-config-v2 wifi-depent ebf-qtdemo libatomic1"
		system_directory="/usr/share"
	;;
	desktop)
		repo_external_pkg_list="kobs-ng-for-imx6ull fire-config-v2 wifi-depent xfce4"
		system_directory="/usr/share"
	;;
	esac

## [TFA & U-boot & Linux GitHub info] 是否使用国内路径下载
	if [[ $DOWNLOAD_MIRROR == china ]] ; then
		#LINUX_SOURCE_URL="https://e.coding.net/embedfire/lubancat/ebf_linux_kernel.git"
		LINUX_SOURCE_URL="https://github.com/Embedfire/ebf_linux_kernel"
		UBOOT_SOURCE_URL="https://gitee.com/Embedfire/ebf_linux_uboot"
		TFA_SOURCE_URL="https://gitee.com/Embedfire/ebf_linux_tfa"
	else
		LINUX_SOURCE_URL="https://github.com/Embedfire/ebf_linux_kernel"
		UBOOT_SOURCE_URL="https://github.com/Embedfire/ebf_linux_uboot"
		TFA_SOURCE_URL="https://github.com/Embedfire/ebf_linux_tfa/"
	fi

	if [[ $SOURCE_URL == gitlab ]] ; then	
		LINUX_SOURCE_URL="git@gitlab.ebf.local:st-mp1/ebf_linux_kernel.git"
		UBOOT_SOURCE_URL="git@gitlab.ebf.local:st-mp1/ebf_linux_uboot.git"
	fi

	GIT_CLONE_OPTIONS="--depth=1"
	FENIX_BRANCH="master"
	ROOTFSCACHE_VERSION=6
	DATE=$(date +%F | sed 's/-//g')
	IMAGE_RELEASE_VERSION="${DATE:2}"

## [CPU info]
	NR_JOBS_MAX=20
	NR_CPUS=$(grep -c processor /proc/cpuinfo)
	if [ ${NR_CPUS} -le ${NR_JOBS_MAX} ]; then
		NR_JOBS=${NR_CPUS}
	else
		NR_JOBS=${NR_JOBS_MAX}
fi

## [Define colors]
	BLACK="\e[0;30m"
	BOLDBLACK="\e[1;30m"
	RED="\e[0;31m"
	BOLDRED="\e[1;31m"
	GREEN="\e[0;32m"
	BOLDGREEN="\e[1;32m"
	YELLOW="\e[0;33m"
	BOLDYELLOW="\e[1;33m"
	BLUE="\e[0;34m"
	BOLDBLUE="\e[1;34m"
	MAGENTA="\e[0;35m"
	BOLDMAGENTA="\e[1;35m"
	CYAN="\e[0;36m"
	BOLDCYAN="\e[1;36m"
	WHITE="\e[0;37m"
	BOLDWHITE="\e[1;37m"
	ENDCOLOR="\e[0m"

## [Enable Proxy?]
	#apt_proxy=localhost:3142/

## [info colors]
	ERROR="${RED}Error:${ENDCOLOR}"
	WARNING="${YELLOW}Warning:${ENDCOLOR}"
	INFO="${GREEN}Info:${ENDCOLOR}"
```

#### configs/user.conf

debian和ubuntu版本的用户配置信息，其中包括用户账号密码、本地语 言、以及上电时打印提示信息等

```python
## [user setting]
if [[ $FIRE_BOARD == ebf_imx_6ull_pro ]] || [[ $FIRE_BOARD == ebf_imx_6ull_mini ]]; then
	
	## the system information of imx6ull 用户名密码
	if [[ $DISTRIBUTION == Debian ]]; then
	    rfs_username="debian"
	    rfs_fullname="lubancat"
	    rfs_password="temppwd"
	    rfs_hostname="npi"
	    rfs_default_locale="en_US.UTF-8" ## 语言
	    rfs_etc_dogtag="embedfire.com Debian Image" ## 提示信息
	    rfs_console_banner="Support/FAQ: www.firebbs.cn/forum.php" ## 提示信息
	    rfs_console_user_pass="enable"
	    rfs_ssh_banner="Support/FAQ: www.firebbs.cn/forum.php" ## ssh提示信息
	    rfs_ssh_user_pass="enable"
	else
	    rfs_username="ubuntu"
	    rfs_fullname="lubancat"
	    rfs_password="temppwd"
	    rfs_hostname="npi" 
	    rfs_default_locale="en_US.UTF-8"
	    rfs_etc_dogtag="embedfire.com Debian Image"
	    rfs_console_banner="Support/FAQ: www.firebbs.cn/forum.php"
	    rfs_console_user_pass="enable"
	    rfs_ssh_banner="Support/FAQ: www.firebbs.cn/forum.php"
	    rfs_ssh_user_pass="enable"
	fi
else
	if [[ $DISTRIBUTION == Debian ]]; then
	    rfs_username="debian"
	    rfs_fullname="lubancat"
	    rfs_password="temppwd"
	    rfs_hostname="lubancat"
	    rfs_default_locale="en_US.UTF-8"
	    rfs_etc_dogtag="embedfire.com Debian Image"
	    rfs_console_banner="Support/FAQ: www.firebbs.cn/forum.php"
	    rfs_console_user_pass="enable"
	    rfs_ssh_banner="Support/FAQ: www.firebbs.cn/forum.php"
	    rfs_ssh_user_pass="enable"
	else
	    rfs_username="ubuntu"
	    rfs_fullname="lubancat"
	    rfs_password="temppwd"
	    rfs_hostname="lubancat" 
	    rfs_default_locale="en_US.UTF-8"
	    rfs_etc_dogtag="embedfire.com Debian Image"
	    rfs_console_banner="Support/FAQ: www.firebbs.cn/forum.php"
	    rfs_console_user_pass="enable"
	    rfs_ssh_banner="Support/FAQ: www.firebbs.cn/forum.php"
	    rfs_ssh_user_pass="enable"
	fi
fi
```

