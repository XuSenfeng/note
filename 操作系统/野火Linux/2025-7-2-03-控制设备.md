# 控制设备

控制设备的时候可以使用`/dev`目录或者`/sys`目录下边的文件对一个外设进行控制, /sys目录的一般是根据设备的功能进行划分以后, /dev可以使用同一个文件实现多个功能的控制

> 可以使用/sys/class/leds/blue/brightness这个文件进行控制
>
> /sys目录下边的实际是系统导出的操作接口

在进行文件读写的时候可能有缓冲区

在控制GPIO的时候, 没有进行导出操作接口, 比如GPIO1_19是蜂鸣器的, 可以在/sys/class/gpio/export下边写入引脚的编号进行引脚的导出, 默认的时候是没有这个引脚的控制接口的

`echo 19 > /sys/class/gpio/export`, 之后会出现一个gpio19的目录, 可以控制direction改变输入输出模式(in/out), 也可以使用value控制引脚的输出电平

## 控制按键输入

/dev/input/by-path/plaform-gpio-keys-event是按键的设备文件

### input子系统

+ 按键
+ 键盘
+ 触摸屏
+ ...

```c
struct input_event{
    struct timeval time;  //触发时间
    __u16 type; //触发的事件类型. 比如按键, 坐标等, 还有特殊EV_SYN是一种同步事件, 提醒处理事件, 不是实际的触发
    __u16 code;  // 实际的事件的代号, 记录按键的位置 
    __s32 value; // 记录事件的具体的值, 比如按键按下为1, 松开的时候是0
};
```

> 需要使用头文件`linux/input.h`, 以及`linux/input-event-codes.h`两个文件

可以使用`/dev/input/by-path/platform-gpio-kesy-input`这个文件, 使用一个`input_event`结构体进行读取这个文件







