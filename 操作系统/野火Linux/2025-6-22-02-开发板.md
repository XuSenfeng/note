# 开发板

![pro高清图](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202506221954771.jpeg)

使用的硬件外设比较多, 所以需要使用12V进行供电, 一共有四路串口, 1 个EBF接口(使用1*6P2.54间距排母引出，单独引出部分IO，适用于连接部分串 口型野火模块)

BOOT设置开发板的启动方式, SPDIF使用光纤进行音频的传输

咪头，是将声音信号转换为电信号的能量转换器件，是和喇叭正好相反的一个器件（电→声）。是声音设备的两个终端，咪头是输入，喇叭是输出。又名咪芯，麦克风，话筒，传声器。

WIFI和SD使用同一个SDIO接口, 所以会冲突

## 烧录

可以使用以下两个软件

Etcher工具: https://www.balena.io/etcher/ 

![image-20250622201050582](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202506222010678.png)

野火Debian镜像: https://pan.baidu.com/s/1pji1U1vvgP8sl_TTZp59qg/ https://sourceforge.net/projects/ebf-debian-firmware/files

[6. 烧写系统 — [野火\]快速使用手册——基于i.MX6ULL开发板 文档](https://doc.embedfire.com/linux/imx6/quick_start/zh/latest/quick_start/install_debian/install_debian.html)

![image-20250622204404066](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202506222044142.png)

## 通信

这里使用的串口是115200的波特率, 默认的密码会在连接之前通过日志打印出来, root用户的密码是root

## 使用fire-config配置设备

[4. 鲁班猫系统特色功能 — [野火\]快速使用手册——基于i.MX6ULL开发板 文档](https://doc.embedfire.com/linux/imx6/quick_start/zh/latest/quick_start/debian_sys/debian_sys.html#fire-config)

![image-20250622210514979](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202506222105071.png)

> 使用命令`sudo fire-config`进行启动

fire-config工具集成了Device Tree Overlays机制，用来管理一些硬件资源的分配和模块的加载， 从而缓解多个驱动程序争用系统资源的问题。

在传统开发模式中，这个机制通常是由设备树来完成的：在开发之前根据项目需求， 提前确定系统中所有用到的硬件设备。在设备树中把所有的外围设备信息以设备树特定的语法进行描述， 在设备树被编译为dtb文件后，被linux内核加载使用。

可以看到，在传统开发过程，一旦硬件资源发生变化，就要重新修改、编译、下载设备树。比较极端的情况是: 当项目中要支持多种的硬件模块，而不同模块间往往会共用某些系统资源(如IO引脚)。 一旦系统要兼容模块任意组合使用，那么随着模块数量增加，需要编译的设备树数量将爆炸增长。

因此，使用传统设备树是不利于项目的维护和扩展的。内核为了解决这个提出了一套新的解决方案， 那就是Device Tree Overlays，中文上可理解为“设备树插件”。 它的核心原理是，通过扩展传统的设备树语法，使得各个硬件模块的信息可以独立地用新的设备树语法来描述。 这样一来，传统的主设备树中只需要保留最基础的硬件信息(主要是cpu和内存)，其他模块单独编译成“设备树插件”。 在系统实际使用时，根据实际应用情景，需要用到哪些硬件模块就把对应的设备树插件加入到主设备树即可。

如下为实际内存中设备树的示意图:

![设备树示意图](https://doc.embedfire.com/linux/imx6/quick_start/zh/latest/_images/device_tree_overlays.png)

“设备树插件”无疑提高了系统的可维护性和减少了大量的重复工作，目前， 我们已经把常见的硬件模块都编译成了“设备树插件”,比如LCD、HDMI、WiFi等等。 用户可以通过fire-config工具轻松地实现对硬件模块的便捷管理。

### fire-config刷机

可以使用这个软件使用SD卡进行刷机

1、执行sudo fire-config，选择“Advanced”项。

如下图所示:

![image-20250622223922319](C:\Users\14586\AppData\Roaming\Typora\typora-user-images\image-20250622223922319.png)

2、在“Advanced”,能够选择从sd烧写镜像到emmc或nand中，也可以选择从emmc或nand烧写系统到sd卡中， 从sd烧写镜像到emmc或nand可选择单次烧录，也可选择持续烧录模式方便量产使用，普通用户选择单次烧录即可。 此处我们选择从sd单次烧录到emmc或nand选项。

如下图所示：

![image-20250622223936662](C:\Users\14586\AppData\Roaming\Typora\typora-user-images\image-20250622223936662.png)

3、系统提示: “Would you like the flasher to be enabled”，选择<Enable>。

如下图所示:

![image-20250622223945239](C:\Users\14586\AppData\Roaming\Typora\typora-user-images\image-20250622223945239.png)

4、系统提示：“The flasher is enabled”,选择<Ok>.

如下图所示:

![image-20250622223954928](C:\Users\14586\AppData\Roaming\Typora\typora-user-images\image-20250622223954928.png)

5、返回fire-config初始界面,选择<Finish>。

如下图所示:

![image-20250622224006535](C:\Users\14586\AppData\Roaming\Typora\typora-user-images\image-20250622224006535.png)

6、在初始界面,选择<Finish>项。 系统提示：“Some config will take effect after reboot，would you like to reboot now?” 选择<Yes>选项

如下图所示:

![image-20250622224016889](C:\Users\14586\AppData\Roaming\Typora\typora-user-images\image-20250622224016889.png)

7、系统自动重启，重启后的系统将自动进行eMMC或者nandflash刷机。

如下图所示(以eMMC刷机为例):

![image-20250622224029225](C:\Users\14586\AppData\Roaming\Typora\typora-user-images\image-20250622224029225.png)

> 成功以后需要把这个模式关闭, 不然每一次启动都会进行刷机

### 使用wifi模块

由于WIFI和SD卡使用的是同一个SDIO, 所以需要通过一个跳线帽进行选择功能

![image-20250622224937499](C:\Users\14586\AppData\Roaming\Typora\typora-user-images\image-20250622224937499.png)

在使用这给模块的时候, 会有比较多的日志输出, 可以使用命令`echo "1 4 1 7" > /proc/sys/kernel/printk`

使用之前的工具使能一下WIFI即可, 重启以后可以使用扫描进行连接

[24. 板载wifi — [野火\]快速使用手册——基于i.MX6ULL开发板 文档](https://doc.embedfire.com/linux/imx6/quick_start/zh/latest/quick_start/wifi/wifi.html)

可以使用ipconfig命令查看是不是连接成功, 可以使用命令`udhcpc -b -1 网卡`动态请求一个ip

### 点灯

[10. led子系统 — [野火\]快速使用手册——基于i.MX6ULL开发板 文档](https://doc.embedfire.com/linux/imx6/quick_start/zh/latest/quick_start/led_subsystem/led_subsystem.html)

在/sys/class里面是一系列的硬件接口, 可以进入led子目录, 控制RGB灯的显示, 记录不同的灯的属性, 其中的brightness是一个0-255的数值, 可以使用命令`echo 255 > brightness`进行更改

## 使用脚本进行控制

使用`sudo apt update`以后可以使用`sudo apt install peripheral`下载野火软件源的脚本

可以在家目录下边有一个脚本文件的文件夹, 需要使用fireconfig使能模块

测试按键的时候需要安装`evtest`的软件包

## 安装nfs

### 服务器

```
sudo apt install nfs-kernel-server -y
```

安装服务

```
sudo vim /etc/exports
```

> ```
> # /etc/exports: the access control list for filesystems which may be exported
> #               to NFS clients.  See exports(5).
> #
> # Example for NFSv2 and NFSv3:
> # /srv/homes       hostname1(rw,sync,no_subtree_check) hostname2(ro,sync,no_subtree_check)
> #
> # Example for NFSv4:
> # /srv/nfs4        gss/krb5i(rw,sync,fsid=0,crossmnt,no_subtree_check)
> # /srv/nfs4/homes  gss/krb5i(rw,sync,no_subtree_check)
> #
> /home/jiao/yh-linux *(rw,sync,no_root_squash)
> ```

```
sudo exportfs -arv
showmount -e
```

### 客户端

```
sudo apt install nfs-common -y
showmount -e "192.168.64.173"
sudo mount -t nfs 192.168.64.173:/home/jiao/yh-linux /mnt
```

