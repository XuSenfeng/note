---
layout: post
title: "样式表"
date:   2022-9-13 15:39:08 +0800
tags: qt
---

# 样式表

## 添加资源文件

+   第一种使用绝对路径

```c
ui->action->setIcon(QIcon("/home/jiao/qt/avatar.png"));
```

>   action是在ui界面中添加的一个菜单栏选项

+   使用相对路径

把文件放到这个文件夹里面

项目->添加新文件->Qt ->Qt Resource File

会创建文件.qrc, 使用open in Editor打开编辑界面

![image-20251229220546361](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202512292205437.png)

![image-20251229220709437](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202512292207499.png)

![image-20251229220940365](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202512292209399.png)

在这里添加Prefix, 选择文件的分类路径, 然后添加文件

![image-20251229221105051](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202512292211102.png)

使用: 

代码不变, 但是路径" : + 前缀名 + 路径名  "

```c++
//点击新建弹出一个对话框
connect(ui->actionnew, &QAction::triggered, [=](){
    //对话框
    //模态和非模态
    //模态就是不可以对其他窗口进行操作，会进行阻塞
    QDialog dlg(this);
    dlg.resize(100,75);
    dlg.exec();
    qDebug() << "模态对话框弹出" << endl;


});
```

```c++
//非模态, 由于不会阻塞, 所以应该使用堆栈, 否则函数结束就会释放
QDialog *dlg2 = new QDialog(this);
dlg2->show();
```



## 样式表

Qt的样式表(style sheet)和CSS的语法比较类似, 是自定义小组件样式使用的, 图片等资源都是一个样式表

<img src="https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202512292214821.png" alt="image-20251229221428779" style="zoom:50%;" />

![image-20251229221649321](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202512292216381.png)

![image-20251229221817070](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202512292218110.png)

![image-20251229221847598](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202512292218650.png)

```css
 QFrame, QLabel, QToolTip {
     border-image: url(:/icons/logo.png)
 }
```

### 代码实现

```cpp
this->setStyleSheet(" QWidget {border-image: url(:/icons/logo.png)}");
```

### qss文件

![image-20251229233115863](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202512292331508.png)

![image-20251229232830514](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202512292328598.png)

![image-20251229233152324](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202512292331581.png)

```cpp
QFile file(":/icons/style.qss");
if(file.exists()){
    file.open(QFile::ReadOnly);
    QString styleSheet = QLatin1String(file.readAll());
    qApp->setStyleSheet(styleSheet);
    file.close();        
}
```

```css
QWidget {
    border-image: url(:/icons/logo.png)
}
```

这里设置的是这一个类的所有的style, 可以使用`setObjectName`这个单独设置名字进行添加样式

```css
QLabel#label2 {
    border-image: url(:/icons/logo.png)
}
```

可以使用`:`继续指定状态, 比如悬停的时候时候替换图片, 选中时候另一种

```css
QLabel#label2:hover {
    border-image: url(:/icons/logo2.png)
}
QLabel#label2:checked {
    border-image: url(:/icons/logo3.png)
}
QLabel#label2:checked:hover {
    border-image: url(:/icons/logo4.png)
}
```

