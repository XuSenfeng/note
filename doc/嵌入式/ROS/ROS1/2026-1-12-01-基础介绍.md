# ROS

Robot Operating System机器人领域的一个标准

+ 通信机制
+ 开发工具
+ 应用功能
+ 生态系统

## 安装

```bash
sudo sh -c '. /etc/lsb-release && echo "deb http://mirrors.tuna.tsinghua.edu.cn/ros/ubuntu/ `lsb_release -cs` main" > /etc/apt/sources.list.d/ros-latest.list'
sudo apt-key adv --keyserver 'hkp://keyserver.ubuntu.com:80' --recv-key C1CF6E31E6BADE8868B172B4F42ED6FBAB17C654
sudo apt update
sudo apt install ros-melodic-desktop-full
sudo apt install python-rosdep2
conda create -n ros python=3.10
conda activate ros
sudo rosdep init
sudo pip3 install rosdep2 --upgrade
sudo rosdep init
sudo rosdep update
echo "source /opt/ros/melodic/setup.bash" >> ~/.bashrc
```

默认安装在opt/ros里面, 现在安装的是melodic版本

```bash
#测试
# 
roscore
# 仿真器
rosrun turtlesim turtlesim_node
# 控制节点
rosrun turtlesim turtle_teleop_key
```

## 概念

### 通信机制

是一个松耦合的分布式通信机制

![image-20260112212600094](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202601122126158.png)

不同的功能之间连接, 抽象成为一个计算图

### 开发工具

![image-20260112213102381](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202601122131549.png)

### 应用功能

![image-20260112213208816](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202601122132960.png)

实现不同机器人的功能包![](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202601122132960.png)![](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202601122132960.png)

### 生态系统

1.发行版（Distribution）：ROS发行版包括一系列带有版本号、可以直接安装的功能包。
2.软件源（Repository）：ROS依赖于共享网络上的开源代码，不同的组织机构可以开发或者共享自己的机器人软件。
3.ROSwiki：记录ROS信息文档的主要论坛。
4.邮件列表（Mailinglist)：交流ROS更新的主要渠道，同时也可以交流ROS开发的各种疑问。
5.ROSAnswers：咨询ROS相关问题的网站。
6.博客（Blog）：发布ROS社区中的新闻、图片、视频(http://www.ros.org/news)

![image-20260112214824198](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202601122148261.png)

### 通信机制

#### 节点node

![image-20260113101839324](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202601131018453.png)

+ 节点: 以及具体的**执行单元**, 可以独立运行的文件, 可以使用不同的语言, 名称必须是唯一的
+ 节点管理器(ROS Master): 为节点提供命名以及注册服务, 跟踪以及记录话题/服务通信, 辅助节点互相查找, 建立连接, 提供参数服务器, 节点使用服务器存储以及检索运行时候的参数

![image-20260113102140091](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202601131021156.png)

#### 异步topic

+ 话题: **异步**通信机制, 节点之间使用发布以及订阅的形式
+ 消息: 话题里面数据, 有一定的类型以及数据结构, 可以自定义, 通过.msg文件配置, 编译的过程中生成对应的文件

![image-20260113105003595](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202601131050644.png)

#### 同步Server

+ 服务(Server): **同步**数据传输机制, 使用客户端服务器的形式, 客户端发送请求, 服务器完成请求处理以后应答, 使用编程语言无关的.srv文件定义请求和应答数据结构, 编译的过程生成对应的代码(一般是单词请求单次配置)

![image-20260113105610354](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202601131056410.png)

![image-20260113105703656](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202601131057725.png)

#### 区分

![image-20260113110513032](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202601131105123.png)

#### 参数

全局共享的字典, 通过网络进行共享, 可以使用这个服务器存储以及检索运行时候的参数, 适合存储静态, 非二进制的配置参数, 不适合存储动态的配置参数

![image-20260113111108418](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202601131111479.png)

#### 文件系统

+ 功能包: ROS功能的基本单元, 包含源码, 配置文件, 数据定义
+ 功能包清单: 记录包的基本功能, 包含作者信息, 许可证, 依赖配置, 编译标志
+ 元功能包: 组织多个用于同一个目的的功能包

![image-20260113111703523](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202601131117614.png)

