# 工作空间/功能包

## 工作空间

存放一个工程开发相关文件的文件夹

+ src: 代码空间, 所有的功能包
+ build: 编译空间
+ devel: 开发空间, 开发时候的可执行文件, 以及库文件(开发中的执行文件)
+ install: 安装空间, 最终的可执行文件(开发后的执行文件)

![image-20260113121250585](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/lenovo-picture/202601131212642.png)

## 创建

```bash
# 创建工作空间, 文件的命令需要是src
(base) jiao@jiao:~/JHY/ros$ mkdir -p catkin_ws/src
(base) jiao@jiao:~/JHY/ros$ cd catkin_ws/src/
(base) jiao@jiao:~/JHY/ros/catkin_ws/src$ catkin_init_workspace # 初始化文件夹
Creating symlink "/home/jiao/JHY/ros/catkin_ws/src/CMakeLists.txt" pointing to "/opt/ros/noetic/share/catkin/cmake/toplevel.cmake" 
# 编译, 在根目录进行
cd ../
catkin_make
# 安装
catkin_make install

(base) jiao@jiao:~/JHY/ros/catkin_ws$ ls
build  devel  install  src
```

### 创建功能包

所有的代码都是在一个功能包里面, 所以需要创建一个功能包, 同一个工作空间里面不可以有名字一样的功能包

```bash
cd src
# catkin_create_pkg <package_name> [depend1] [depend2] ...
# 使用ros的标志数据结构, cpp以及py接口
catkin_create_pkg test_pkg std_msgs roscpp rospy

(base) jiao@jiao:~/JHY/ros/catkin_ws/src$ tree
.
├── CMakeLists.txt -> /opt/ros/noetic/share/catkin/cmake/toplevel.cmake
└── test_pkg
    ├── CMakeLists.txt
    ├── include # 头文件
    │   └── test_pkg
    ├── package.xml
    └── src # 源码文件

4 directories, 3 files
```

编译

```bash
# 在根目录里面
catkin_make
# 设置公共空间变量
source devel/setup.bash
# 实际是获取到变量
(base) jiao@jiao:~/JHY/ros/catkin_ws$ echo $ROS_PACKAGE_PATH
/home/jiao/JHY/ros/catkin_ws/src:/opt/ros/noetic/share
```

### 功能包基本文件

#### CMake

编译基本规则

#### package.xml

+ 名字, 版本信息, 维护email, 开源许可证
+ 依赖信息