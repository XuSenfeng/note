# 预测

## 基础使用

```python
from ultralytics import YOLO

yolo = YOLO("yolov8n.pt", task="detect")
result = yolo(source="../ultralytics/ultralytics/assets/bus.jpg")
```

在文件ultralytics/ultralytics/cfg/default.yaml里面可以查看到使用的参数, 输入可以是图片, 视频, `screen`屏幕, `0`摄像头

使用参数`save=True`可以把结果记录在`ultralytics/runs/detect/predict/bus.jpg`文件里面

conf: 可信度阈值

iou: 交并比（IoU）是用于非极大值抑制（NMS）的阈值。较低的值会通过消除重叠框来减少检测数量，这对于减少重复项很有用。

```python
from ultralytics import YOLO
import matplotlib.pyplot as plt
import cv2  # 用于BGR转RGB（核心修复）

# 1. 加载YOLOv8预训练模型
yolo = YOLO("yolov8n.pt", task="detect")

# 2. 推理（预测）并保存结果
# save=True 会在项目根目录生成 runs/detect/predict 文件夹，保存标注后的图片
result = yolo(source="../ultralytics/ultralytics/assets/bus.jpg", save=True)

# 3. 提取标注后的图像数组（关键：YOLO返回的是BGR格式，matplotlib需要RGB）
annotated_img = result[0].plot()  # 返回BGR格式的numpy数组
annotated_img_rgb = cv2.cvtColor(annotated_img, cv2.COLOR_BGR2RGB)  # 转为RGB

# 4. 绘图并显示（适配普通Python脚本）
plt.figure(figsize=(12, 8))  # 设置画布大小（可选）
plt.imshow(annotated_img_rgb)  # 显示RGB格式的图像
plt.axis('off')  # 关闭坐标轴（可选，更美观）
plt.show()  # 核心：触发图像弹窗显示（脚本中必须加）
```

默认的通道是bgr, 需要转换, 返回的result是一个数组的形式

+   plot是对应的标注好的图像
+   boxes: 对应的边框的信息

![image-20251213101506195](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/mac-picture/image-20251213101506195.png)

```python
result[0].boxes.xywh.cpu().numpy()  # 获取边界框的xywh坐标（numpy数组格式）
```

![image-20251213101609131](https://picture-01-1316374204.cos.ap-beijing.myqcloud.com/mac-picture/image-20251213101609131.png)