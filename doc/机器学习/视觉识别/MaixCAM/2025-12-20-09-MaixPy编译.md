# MaixPy编译

## setup.py

在这个文件里面使用`project.py`编译一下maixcam这个项目

使用命令

```bash
python project.py build -p maixcam --release --config-file configs/config_platform_maixcam.mk
```

这个命令会包所有的文件编译为库文件, 这些库文件放在

生成对应的文档文件, 使用 `pybind11-stubgen` 为 C++ 扩展生成 `.pyi` 存根文件

```bash
python -u components/maix/gen_api.py --doc docs/api --sdk_path {maixcdk_path}
```

指定在打包的时候把maixcdk的库文件编译进去

## maix项目代码





### gen_api_cpp

1.  **生成 pybind11 模块代码**
    -   自动生成 `maixpy_wrapper.cpp` 中的 PYBIND11_MODULE 部分
    -   将 C++ 类、函数、变量、枚举等暴露给 Python
2.  **解析 API 定义**
    -   从 C++ 头文件中提取 MaixPy API（通过特殊注释标记）
    -   递归扫描 SDK 的 [components](vscode-file://vscode-app/Applications/Visual Studio Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html) 目录中的所有 `.h` 和 `.hpp` 文件
    -   排除 `3rd_party` 目录下的代码
3.  **处理不同的 API 类型**
    -   **模块（module）**：创建子模块
    -   **类（class）**：生成类绑定，包括构造函数、成员函数、成员变量
    -   **函数（func）**：处理普通函数和静态方法
    -   **变量（var）**：绑定类成员和模块变量（只读/读写）
    -   **枚举（enum）**：生成枚举类型绑定
4.  **优化头文件顺序**
    -   根据 `headers_priority.txt` 文件排序头文件，确保依赖关系正确
5.  **命令行工具**
    -   可独立运行生成 API 包装代码
    -   支持自定义输出路径和 SDK 路径